function MediumButton(n){if((n.label===undefined||!/\S{1}/.test(n.label)||n.start===undefined||!/\S{1}/.test(n.start)||n.end===undefined||!/\S{1}/.test(n.end))&&(n.label===undefined||!/\S{1}/.test(n.label)||n.action===undefined||!/\S{1}/.test(n.action))){console.error('[Custom-Button] You need to specify "label", "start" and "end" OR "label" and "action"');return}n.start=n.start===undefined?"":n.start;n.end=n.end===undefined?"":n.end;this.options=n;this.button=document.createElement("button");this.button.className=n.class!=undefined&&n.class!=""?"medium-editor-action "+n.class:"medium-editor-action";this.button.innerHTML=n.label;this.button.onclick=function(){var s,i,f,h,c,a,u;var r=getCurrentSelection(),o=window.getSelection(),l=getCurrentSelectionOuterHtml();if((getCurrentSelection().includes("li>")||getCurrentSelection().includes("<li"))&&($(event.target).hasClass("writecomment")||$(event.target).find(".writecomment").length>0))return criticalNotify("Comment is restricted on multi line selection in a bullet point list","","Warning"),!1;s=$(getSelection().getRangeAt(0).startContainer).parents("li").first();$(s).length>0&&!r.includes("<li")&&($(event.target).hasClass("orderedList")||$(event.target).hasClass("unoderedlist"))&&(r=s[0].outerHTML);var e="",t="";if(n.start===undefined||r.indexOf(n.start)==-1&&r.indexOf(n.end)==-1?(n.action!=undefined&&(t=n.action(r,l,!0)),t=n.start+t+n.end):(n.action!=undefined&&(t=n.action(r,l,!0)),e=t,t=String(t).split(n.start).join(""),t=String(t).split(n.end).join("")),e=="false")return!1;if(e!=""&&(RemoveEmptyList(),o.getRangeAt&&o.rangeCount)){if(i=window.getSelection().getRangeAt(0),$(event.target).hasClass("orderedList")||$(event.target).hasClass("unoderedlist")){if(startElem=getSelection().getRangeAt(0).startContainer.parentElement,!$(startElem).is("li")&&$($(startElem).parent()).is("li")&&(startElem=getSelection().getRangeAt(0).startContainer.parentElement.parentElement),endElem=getSelection().getRangeAt(0).endContainer.parentElement,!$(endElem).is("li")&&$($(endElem).parent()).is("li")?endElem=getSelection().getRangeAt(0).endContainer.parentElement.parentElement:($(endElem).is("ol")||$(endElem).is("ul"))&&(endElem=endElem.prev()),$(startElem).is("li")&&$(endElem).is("li")&&(r.includes("<ul")||r.includes("<ol")))return!1;$(startElem).is("li")&&$(endElem).is("li")&&$(startElem).prev().length!=$(endElem).next().length?(nFlag=1,startCount=$(startElem).parent().children().index(startElem),endCount=$(endElem).parent().children().index(endElem),theChildren=$(startElem).parent().children(),$(startElem).prev().length==0&&$(endElem).next().length==0?theChildren.parent().remove():$.each(theChildren,function(n){if(n<startCount)return!0;if(n>endCount)return!1;$(theChildren[n]).remove()}),i.deleteContents()):i.deleteContents()}else i.deleteContents();if(i.createContextualFragment)f=i.createContextualFragment(t);else for(h=document.createElement("div"),h.innerHTML=t,f=document.createDocumentFragment();child=h.firstChild;)f.appendChild(child);if(c=f.firstChild,a=f.lastChild,i.insertNode(f),c&&(i.setStartBefore(c),i.setEndAfter(a)),o.removeAllRanges(),o.addRange(i),$(e).prop("tagName")){u=$(e).attr("id");$("#"+u+" .comment-content").focus();$("#"+u+" .comment-content").on("keydown",function(n){(n.keyCode===8||n.keyCode===32)&&(this.value.trim().length===0&&(this.value=this.value.trim()),($(this).html().length===0||this.value.trim().length===0)&&n.preventDefault())});$("#"+u+" .comment-content").focusout(function(){var n=$(this);n.text().replace(" ","").length||n.empty()});$(".commentbox-close").on("click",function(){var i=$(this).parent().find(".comment-content").val(),n,t;i==""||i=="undefined"?(n=$(this).parent().find(".comment-content").attr("tabindex"),t="",t=$("#"+n).parents("p.toc-text").length>0?$("#"+n).contents().first().text():"<p class='toc-text'>"+$("#"+n).contents().first().text()+"<\/p>",$("#"+n).next().remove(),$("#"+n).replaceWith(t),$("#tableDetails1 li[data-value='"+n+"']").remove()):$(this).closest(".comment-box").hide()});$("#"+u+" .comment-content").on("paste",function(n){var t=$(this).val()+n.originalEvent.clipboardData.getData("Text"),i=$(this);$("#tableDetails1 li").each(function(){$(this).attr("data-value")==$(i).attr("tabindex")&&$(this).find(".comment-contentpanelitem text").html(t)})});$("#"+u+" .comment-content").on("keyup",function(n){if(n.ctrlKey==!0&&(charCode==67||charCode==86||charCode==88))return!0;if((n.keyCode===8||n.keyCode===32)&&this.value.trim().length===0)return this.value=this.value.trim(),!1;var t=$(this).val(),i=$(this);$("#tableDetails1 li").each(function(){$(this).attr("data-value")==$(i).attr("tabindex")&&$(this).find(".comment-contentpanelitem text").html(t)});$("#"+u+" .comment-content").html(t)});$("#tableDetails1 li").on("click",function(){$("#tableDetails .comment-box").each(function(){$(this).hide()});var n=$("#"+$(this).attr("data-value"));$(n).find(".comment-box").css("display")=="none"&&($(n).find(".comment-box").css("display",""),$(n).focus(),$(this).closest("li").addClass("active").siblings("li").removeClass("active"))})}$(".comment-box").css("left","auto");$(".comment-box").css("right","auto")}}}function MediumLinkButton(n){if((n.label===undefined||!/\S{1}/.test(n.label)||n.start===undefined||!/\S{1}/.test(n.start)||n.end===undefined||!/\S{1}/.test(n.end))&&(n.label===undefined||!/\S{1}/.test(n.label)||n.action===undefined||!/\S{1}/.test(n.action))){console.error('[Custom-Button] You need to specify "label", "start" and "end" OR "label" and "action"');return}n.start=n.start===undefined?"":n.start;n.end=n.end===undefined?"":n.end;this.options=n;this.button=document.createElement("button");this.button.className="medium-editor-action";this.button.innerHTML=n.label;this.button.onclick=function(t){var f,s,a,u,i,o,v,y,h,c,p,l;if(f=getCurrentSelection(),s=window.getSelection(),f.includes("<td"))return!1;if((getCurrentSelection().includes("li>")||getCurrentSelection().includes("<li"))&&($(event.target).hasClass("linkdoc")||$(event.target).find(".linkdoc").length))return criticalNotify("HyperLink is restricted on multi line selection in a bullet point list","","Warning"),!1;if(f!=null&&f!=""&&(a=f.match(/<ol/g)||f.match(/\/ol>/g)||f.match(/<ul/g)||f.match(/\/ul>/g),a!=null))return!1;if(u=getCurrentSelectionOuterHtml(),u=t.target,$(u).prop("tagName")=="BUTTON"&&(u=u.children),($(u).hasClass("unoderedlist")||$(u).hasClass("orderedList"))&&getSelection().getRangeAt(0).commonAncestorContainer!=null&&($(getSelection().getRangeAt(0).commonAncestorContainer).parents("blockquote").length||$(getSelection().getRangeAt(0).commonAncestorContainer).find("blockquote").length||$(getSelection().getRangeAt(0).commonAncestorContainer).is("blockquote")))return criticalNotify("Bullet point tool not applicable for indented content<\/b>","","Warning"),!1;if(elem=getSelection().baseNode.parentElement,($(u).hasClass("unoderedlist")||$(u).hasClass("orderedList"))&&!($(elem).parents("#resizeTable").length||$(elem).parents(".textDragger").length||$(elem).parents("[data-column=column-two-layout]").length))return criticalNotify("Not applicable to the selected control/template<\/b>","","Warning"),!1;if((startElem=$(getSelection().getRangeAt(0).startContainer).closest("li")[0],$(startElem).is("li")||$(startElem).is("ul")||$(startElem).is("ol")||$(startElem).is("div")||(liElem=$(startElem).parents("li").first(),$(liElem).children("ol").length==0&&$(liElem).children("ul").length==0&&(startElem=liElem)),startId=$(startElem).parent().attr("id"),startInd=$(startElem).parent().index(),parElem=$(startElem).parent().parent(),endElem=$(getSelection().getRangeAt(0).endContainer).closest("li")[0],($(startElem).parents("#resizeTable").length||$(startElem).parents(".two-column").length)&&($(t.target).hasClass("unoderedlist")||$(t.target).hasClass("orderedList")||$(t.target).find(".unoderedlist").length>0||$(t.target).find(".orderedList").length>0)&&!($(startElem).prev()!=null&&$(startElem).prev().length==0&&$(endElem).next()!=null&&$(endElem).next().length==0))||($(endElem).is("li")||$(endElem).is("ul")||$(endElem).is("ol")||$(endElem).is("div")||(liElem=$(endElem).parents("li").first(),$(liElem).children("ol").length==0&&$(liElem).children("ul").length==0&&(endElem=liElem)),isNewSelection=$(startElem).parent("[tabindex]").length,$(startElem).parentsUntil(".text-editor").last().attr("id")!=$(endElem).parentsUntil(".text-editor").last().attr("id")))return!1;var e="",r="";if(n.start===undefined||f.indexOf(n.start)==-1&&f.indexOf(n.end)==-1?(n.action!=undefined&&(r=n.action(f,u,!0)),r=n.start+r+n.end):(n.action!=undefined&&(r=n.action(f,u,!0)),e=r,r=String(r).split(n.start).join(""),r=String(r).split(n.end).join("")),e!=""){if(RemoveEmptyList(),loopFlag=0,dFlag=0,nFlag=0,v=!1,s.getRangeAt&&s.rangeCount){if(i=window.getSelection().getRangeAt(0),$(i.commonAncestorContainer).parents("#resizeTable").length&&$(i.commonAncestorContainer).parents("ol,ul").length==0&&$(i.commonAncestorContainer).parent("div").length==0&&(v=!0),$(u).hasClass("orderedList")||$(u).hasClass("unoderedlist")?f.includes("<ul")||f.includes("<ol")||$(startElem).children("li").length||$(endElem).children("li").length?(endElem=getSelection().getRangeAt(0).endContainer.parentElement,pinElem=$(endElem).parent(),$(pinElem).children().length==0&&(r.includes("<ul")||r.includes("<ol")==!1)&&(pinId=$(pinElem).attr("id"),i.deleteContents(),$("#"+pinId).children()[0].insertAdjacentHTML("beforebegin",r),$("#"+pinId).parent().find("li:empty").remove(),$("#"+pinId).parent().find("ul:empty").remove(),$("#"+pinId).parent().find("ol:empty").remove(),childList=$("#"+pinId).children(),childList.each(function(){$(this).text().trim()===""&&$(this).remove()}),dFlag=1)):$(startElem).is("li")&&$(endElem).is("li")?(nFlag=1,startCount=$(startElem).parent().children().index(startElem),endCount=$(endElem).parent().children().index(endElem),theChildren=$(startElem).parent().children(),$(startElem).prev().length==0&&$(endElem).next().length==0?theChildren.parent().remove():$.each(theChildren,function(n){if(n<startCount)return!0;if(n>endCount)return!1;$(theChildren[n]).remove()}),i.deleteContents()):(i.deleteContents(),$(i.commonAncestorContainer).parents(".resizeCol").length&&$(i.commonAncestorContainer).find("p:empty").remove()):(i.deleteContents(),$(i.commonAncestorContainer).parents(".resizeCol").length&&$(i.commonAncestorContainer).find("p:empty").remove()),dFlag==0&&nFlag==0&&((r.includes("<ul")||r.includes("<ol"))&&isNewSelection?(checkElem=$(startElem).parent().children(),rflag=0,$.each(checkElem,function(n){if(checkElem[n]==startElem||rflag==1){if(rflag=1,$(checkElem[n]).children().length)return nextElem=$(checkElem[n]).next(),$(nextElem).length?$(checkElem[n]).remove():(prevElem=$(checkElem[n]).prev(),$(prevElem).length&&$(checkElem[n]).remove()),!1;$(checkElem[n]).remove()}}),$(nextElem).length==1?($(nextElem)[0].insertAdjacentHTML("beforebegin",r),dFlag=1):$(prevElem).length?($(prevElem)[0].insertAdjacentHTML("afterend",r),dFlag=1):(pinElem=$(endElem).parent(),pinId=$(pinElem).attr("id"),i.deleteContents(),$("#"+pinId).remove(),$(".text-editor").find("ul li:empty").remove(),$(".text-editor").find("ol li:empty").remove(),$(".text-editor").find("ul:empty").remove(),$(".text-editor").find("ol:empty").remove(),$(".text-editor").find("li:empty").remove())):i.deleteContents()),$(i.startContainer).parents("p").length&&(y=/^[\n\r]*$/.test($(i.startContainer).parents("p")[0].innerText),y&&$(i.startContainer).parents("p").remove()),dFlag==0){if(i.createContextualFragment)o=i.createContextualFragment(r);else for(h=document.createElement("div"),h.innerHTML=r,o=document.createDocumentFragment();child=h.firstChild;)o.appendChild(child);c=o.firstChild;p=o.lastChild;i.insertNode(o);c&&(i.setStartBefore(c),i.setEndAfter(p));s.removeAllRanges();s.addRange(i)}if(e=e.trim(),$(e).prop("tagName")){l=$(e).attr("id");$("#"+l+".linkcontent").focus();$("#"+l).on("keydown",function(n){n.keyCode===8&&$(this).html().length===0&&n.preventDefault()})}}}else if(r=="false")return!1;if($(u).hasClass("orderedList")||$(u).hasClass("unoderedlist")){RemoveEmptyList();$("#"+startId).length==0&&(startId=$($(parElem).children()[startInd]).attr("id"));var w=uniqueObjectId(),b=uniqueObjectId();startId!=null&&startId!="undefined"&&(r.startsWith("<ol")?$("#"+startId).find("li").removeClass("ul-box").removeClass("ul-box2").removeClass("ul-hyp-box").removeClass("ol-box2").removeClass("ul-chk-box").addClass("ol-box2"):r.startsWith("<ul")&&$(this).find(".alphabet").length?$("#"+startId).find("li").removeClass("ul-box").removeClass("ul-box2").removeClass("ul-hyp-box").removeClass("ol-box2").removeClass("ul-chk-box").addClass("ul-box2"):r.startsWith("<ul")&&$(this).find(".alpha").length?$("#"+startId).find("li").removeClass("ul-box").removeClass("ul-box2").removeClass("ul-hyp-box").removeClass("ol-box2").removeClass("ul-chk-box").addClass("ul-hyp-box"):!r.startsWith("<ul")||!$(this).find(".unoderedlist").length||$(this).find(".alpha").length||$(this).find(".alphabet").length||$(this).find(".checkboxlist").length?r.startsWith("<ul")&&$(this).find(".checkboxlist").length&&$("#"+startId).find("li").removeClass("ul-box").removeClass("ul-box2").removeClass("ul-hyp-box").removeClass("ul-chk-box").removeClass("ol-box2").addClass("ul-chk-box"):$("#"+startId).find("li").removeClass("ul-box").removeClass("ul-box2").removeClass("ul-hyp-box").removeClass("ol-box2").removeClass("ul-chk-box").addClass("ul-box"),$("#"+startId).attr("class").includes("level")||$("#"+startId).removeClass("sub-disc-list"));rectifySequence(i.commonAncestorContainer);isNewSelection!=0&&AutomateNumbering(i.commonAncestorContainer,13)}SetList();getSelection().empty();WikiApp.dragandDrop._AddItemsToUndo()}}function getCurrentSelection(){var i="",n,r,t,u;if(typeof getSelection!="undefined"){if(n=window.getSelection(),n.rangeCount){for(r=document.createElement("div"),t=0,u=n.rangeCount;t<u;++t)r.appendChild(n.getRangeAt(t).cloneContents());i=r.innerHTML}}else typeof document.selection!="undefined"&&document.selection.type=="Text"&&(i=document.selection.createRange().htmlText);return i}function getCurrentSelectionOuterHtml(){var n;return typeof getSelection!="undefined"&&window.getSelection.focusNode!=null?(n=window.getSelection(),n.focusNode.parentElement):""}function ResetNumbering(){return"<span class='list-numbering-box' contenteditable='false''><i class=\"fa fa-bolt fa-rotate-270\" aria-hidden=\"true\"><\/i><ul><li onclick='CountinueNumbering(this)'>Continue Numbering<\/li><li onclick='RemoveNumbering(this)'>Restart Numbering<\/li><\/ul><\/span>"}function SetList(){var n,t,i;RemoveEmptyList();$(".medium-insert-active").text().trim().length==0&&$(".medium-insert-active").remove();n=$("#tableDragger").find("p.medium-insert-active");$.each(n,function(){$(this).removeClass("medium-insert-active").addClass("toc-text")});t=$("#tableDragger").find("p.toc-text:empty");$.each(t,function(){$(this).remove()});$("#tableDragger").find(".sub-list").length&&(i="",$("#tableDragger").find(".sub-list").removeClass("sub-list"));RemoveEmptyList();$("#tableDragger").find(".remove-list").length&&$(".text-editor").find(".remove-list").length?($("#tableDragger").find(".remove-list").is(".ol-box")&&$("#tableDragger").find(".remove-list").prevAll(".ol-box").first().children("li.ol-box2").length||$("#tableDragger").find(".remove-list").is(".ul-alpha-box")&&$("#tableDragger").find(".remove-list").prevAll(".ul-alpha-box").first().children("li.ul-box2").length?$("#tableDragger").find(".remove-list").before(ResetNumbering()):$("#tableDragger").find(".remove-list").is(".ol-box")&&$("#tableDragger").find(".remove-list").parent().prevAll(".ol-box").first().children("li.ol-box2").length||$("#tableDragger").find(".remove-list").is(".ul-alpha-box")&&$("#tableDragger").find(".remove-list").parent().prevAll(".ul-alpha-box").first().children("li.ul-box2").length?$("#tableDragger").find(".remove-list").before(ResetNumbering()):$("#tableDragger").find(".remove-list").is(".ol-box")&&$("#tableDragger").find(".remove-list").prevAll("p").find(".ol-box").first().children("li.ol-box2").length||$("#tableDragger").find(".remove-list").is(".ul-alpha-box")&&$("#tableDragger").find(".remove-list").prevAll("p").find(".ul-alpha-box").first().children("li.ul-box2").length?$("#tableDragger").find(".remove-list").before(ResetNumbering()):$("#tableDragger").find(".remove-list").is(".ol-box")&&$("#tableDragger").find(".remove-list").parent().prevAll("p").find(".ol-box").first().children("li.ol-box2").length||$("#tableDragger").find(".remove-list").is(".ul-alpha-box")&&$("#tableDragger").find(".remove-list").parent().prevAll("p").find(".ul-alpha-box").first().children("li.ul-box2").length?$("#tableDragger").find(".remove-list").before(ResetNumbering()):$(".text-editor").find(".remove-list").is(".ol-box")&&!$(".text-editor").find(".remove-list").parent().is("li")&&$(".text-editor").find(".remove-list").closest("table.draggable-item").closest("tr").prevAll("tr.textDragger").find(".ol-box").not(".sub-disc-list").first().children("li.ol-box2").length||$(".text-editor").find(".remove-list").is(".ul-alpha-box")&&!$(".text-editor").find(".remove-list").parent().is("li")&&$(".text-editor").find(".remove-list").closest("table.draggable-item").closest("tr").prevAll("tr.textDragger").find(".ul-alpha-box").not(".sub-disc-list").first().children("li.ul-box2").length?$(".text-editor").find(".remove-list").before(ResetNumbering()):$(".text-editor").find(".remove-list").is(".ol-box")&&!$(".text-editor").find(".remove-list").parent().is("li")&&$(".text-editor").find(".remove-list").closest("table.draggable-item").closest("tr").prevAll("tr.textDragger").find("ol[id],ul[id]").not(".sub-disc-list").first().children("li.ol-box2").length||$(".text-editor").find(".remove-list").is(".ul-alpha-box")&&!$(".text-editor").find(".remove-list").parent().is("li")&&$(".text-editor").find(".remove-list").closest("table.draggable-item").closest("tr").prevAll("tr.textDragger").find("ol[id],ul[id]").not(".sub-disc-list").first().children("li.ul-box2").length?$(".text-editor").find(".remove-list").before(ResetNumbering()):$("#tableDragger").find(".remove-list").is(".ol-box")&&$("#tableDragger").find(".remove-list").prevAll("ol[id],ul[id]").first().children("li.ol-box2").length||$("#tableDragger").find(".remove-list").is(".ul-alpha-box")&&$("#tableDragger").find(".remove-list").prevAll("ol[id],ul[id]").first().children("li.ul-box2").length?$(".text-editor").find(".remove-list").before(ResetNumbering()):($("#tableDragger").find(".remove-list").is(".ol-box")&&$("#tableDragger").find(".remove-list").closest("table.draggable-item").closest("tr").prevAll("tr.textDragger").find("ol[id],ul[id]").not(".sub-disc-list").children("li.ol-box2").length||$("#tableDragger").find(".remove-list").is(".ul-alpha-box")&&$("#tableDragger").find(".remove-list").closest("table.draggable-item").closest("tr").prevAll("tr.textDragger").find("ol[id],ul[id]").not(".sub-disc-list").children("li.ul-box2").length)&&$(".text-editor").find(".remove-list").before(ResetNumbering()),$("#tableDragger").find(".remove-list").removeClass("remove-list")):$("table#resizeTable").find(".remove-list").length&&($("td.resizeCol").find(".remove-list").is(".ol-box")&&($("td.resizeCol").find(".remove-list").prevAll(".ol-box").length||$("td.resizeCol").find(".remove-list").prevAll("div").children(".ol-box").length)&&$("td.resizeCol").find(".remove-list").before(ResetNumbering()),$("td.resizeCol").find(".remove-list").is(".ul-alpha-box")&&($("td.resizeCol").find(".remove-list").prevAll(".ul-alpha-box").length||$("td.resizeCol").find(".remove-list").prevAll("div").children(".ul-alpha-box").length)&&$("td.resizeCol").find(".remove-list").before(ResetNumbering()),$("#tableDragger").find(".remove-list").removeClass("remove-list"));$("#pageSize").val()=="A4"||$("#DocumentType").val()=="1"?($("#tableDragger").find("ul.ul-box").removeClass("Procedure"),$("#tableDragger").find("ol.ol-box").removeClass("Procedure"),$("#tableDragger").find("ul.ul-alpha-box").removeClass("Procedure"),$("#tableDragger").find("ul.ul-hyp-box").removeClass("Procedure"),$("#tableDragger").find("ul.ul-chk-box").removeClass("Procedure"),$("#tableDragger").find("ul.ul-box").addClass("guidlisce"),$("#tableDragger").find("ol.ol-box").addClass("guidlisce"),$("#tableDragger").find("ul.ul-alpha-box").addClass("guidlisce"),$("#tableDragger").find("ul.ul-hyp-box").addClass("guidlisce"),$("#tableDragger").find("ul.ul-chk-box").addClass("guidlisce")):($("#pageSize").val()=="A5"||$("#DocumentType").val()=="2")&&($("#tableDragger").find("ul.ul-box").addClass("Procedure"),$("#tableDragger").find("ol.ol-box").addClass("Procedure"),$("#tableDragger").find("ul.ul-alpha-box").addClass("Procedure"),$("#tableDragger").find("ul.ul-hyp-box").addClass("Procedure"),$("#tableDragger").find("ul.ul-chk-box").addClass("Procedure"),$("#tableDragger").find("ul.ul-box").removeClass("guidlisce"),$("#tableDragger").find("ol.ol-box").removeClass("guidlisce"),$("#tableDragger").find("ul.ul-alpha-box").removeClass("guidlisce"),$("#tableDragger").find("ul.ul-hyp-box").removeClass("guidlisce"),$("#tableDragger").find("ul.ul-chk-box").removeClass("guidlisce"))}function RemoveEmptyList(){$("#tableDragger").find(".ul-box>li:empty").remove();$("#tableDragger").find(".ol-box>li:empty").remove();$("#tableDragger").find(".ul-alpha-box>li:empty").remove();$("#tableDragger").find(".ul-hyp-box>li:empty").remove();$("#tableDragger").find(".ul-chk-box>li:empty").remove();$("#tableDragger").find(".ul-box:empty").remove();$("#tableDragger").find(".ol-box:empty").remove();$("#tableDragger").find(".ul-alpha-box:empty").remove();$("#tableDragger").find(".ul-hyp-box:empty").remove();$("#tableDragger").find(".ul-chk-box:empty").remove();$("#tableDragger").find(".ul-alpha-box").last().parent().is("p")&&$("#tableDragger").find(".ul-alpha-box").last().parent().replaceWith(function(){return this.childNodes});$("#tableDragger").find(".ul-box").last().parent().is("p")&&$("#tableDragger").find(".ul-box").last().parent().replaceWith(function(){return this.childNodes});$("#tableDragger").find(".ol-box").last().parent().is("p")&&$("#tableDragger").find(".ol-box").last().parent().replaceWith(function(){return this.childNodes});$("#tableDragger").find(".ul-hyp-box").last().parent().is("p")&&$("#tableDragger").find(".ul-hyp-box").last().parent().replaceWith(function(){return this.childNodes});$("#tableDragger").find(".ul-chk-box").last().parent().is("p")&&$("#tableDragger").find(".ul-chk-box").last().parent().replaceWith(function(){return this.childNodes})}function setColor(n){colorPickerNode.extentOffset?setSelectedTextColor(colorPickerNode,n.toHexString()):$(colorPickerNode.baseNode).css("color",n.toHexString())}function sethighlightColor(n){colorPickerNode.extentOffset?setSelectedTextHighlightColor(colorPickerNode,n):$(colorPickerNode.baseNode).css("background-color",n.toHexString())}function initPicker(n){$(n).spectrum({allowEmpty:!0,color:"#000000",showInput:!0,showAlpha:!1,showPalette:!0,showButtons:!0,hideAfterPaletteSelect:!0,preferredFormat:"hex",showInitial:!1,clickoutFiresChange:!1,change:function(n){setColor(n)},hide:function(){colorPickerNode={}},show:function(){if(window.getSelection()){var n=window.getSelection();colorPickerNode={baseNode:n.baseNode,baseOffset:n.baseOffset,extentNode:n.extentNode,extentOffset:n.extentOffset,isReverse:!1};let t=document.createRange();t.setStart(n.baseNode,n.baseOffset);t.setEnd(n.extentNode,n.extentOffset);t.collapsed&&(colorPickerNode={baseNode:n.extentNode,baseOffset:n.extentOffset,extentNode:n.baseNode,extentOffset:n.baseOffset,isReverse:!1})}},palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"],["#A4343A","#E0E0E0"," #FAF9F6","#FFFFFF","#313131"]]})}function initPickerforhighlight(n){$(n).spectrum({allowEmpty:!0,color:"#000000",showInput:!0,showAlpha:!0,showPalette:!0,showButtons:!0,hideAfterPaletteSelect:!0,preferredFormat:"hex",showInitial:!1,clickoutFiresChange:!1,show:function(){if(window.getSelection()){var n=window.getSelection();colorPickerNode={baseNode:n.baseNode,baseOffset:n.baseOffset,extentNode:n.extentNode,extentOffset:n.extentOffset,isReverse:!1};let t=document.createRange();t.setStart(n.baseNode,n.baseOffset);t.setEnd(n.extentNode,n.extentOffset);t.collapsed&&(colorPickerNode={baseNode:n.extentNode,baseOffset:n.extentOffset,extentNode:n.baseNode,extentOffset:n.baseOffset,isReverse:!1})}},change:function(n){sethighlightColor(n)},palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"],["#A4343A","#E0E0E0"," #FAF9F6","#FFFFFF","#313131"]]})}function setSelectedTextColor(n,t){var i=document.createRange(),r;colorPickerNode.isReverse?(i.setStart(n.extentNode,n.extentOffset),i.setEnd(n.baseNode,n.baseOffset)):(i.setStart(n.baseNode,n.baseOffset),i.setEnd(n.extentNode,n.extentOffset));i.collapsed=colorPickerNode.isReverse;r=document.getSelection();r.removeAllRanges();r.addRange(i);document.execCommand("foreColor",!1,t);colorPickerNode={};r.removeAllRanges()}function setSelectedTextHighlightColor(n,t){var i=document.createRange(),r;colorPickerNode.isReverse?(i.setStart(n.extentNode,n.extentOffset),i.setEnd(n.baseNode,n.baseOffset)):(i.setStart(n.baseNode,n.baseOffset),i.setEnd(n.extentNode,n.extentOffset));i.collapsed=colorPickerNode.isReverse;r=document.getSelection();r.removeAllRanges();r.addRange(i);console.log(t);document.execCommand("backColor",!1,t.toRgbString());colorPickerNode={};r.removeAllRanges()}var editor;!function(n,t,i,r){function l(n,t){var i=Math.max(0,n[0]-t[0],t[0]-n[1]),r=Math.max(0,n[2]-t[1],t[1]-n[3]);return i+r}function a(t,i,r,u){var o=t.length,e,f;for(u=u?"offset":"position",r=r||0;o--;)e=t[o].el?t[o].el:n(t[o]),f=e[u](),f.left+=parseInt(e.css("margin-left"),10),f.top+=parseInt(e.css("margin-top"),10),i[o]=[f.left-r,f.left+e.outerWidth()+r,f.top-r,f.top+e.outerHeight()+r]}function f(n,t){var i=t.offset();return{left:n.left-i.left,top:n.top-i.top}}function v(n,t,i){t=[t.left,t.top];i=i&&[i.left,i.top];for(var u,r=n.length,f=[];r--;)u=n[r],f[r]=[r,l(u,t),i&&l(u,i)];return f.sort(function(n,t){return t[1]-n[1]||t[2]-n[2]||t[0]-n[0]})}function e(t){this.options=n.extend({},u,t);this.containers=[];this.options.rootGroup||(this.scrollProxy=n.proxy(this.scroll,this),this.dragProxy=n.proxy(this.drag,this),this.dropProxy=n.proxy(this.drop,this),this.placeholder=n(this.options.placeholder),t.isValidTarget||(this.options.isValidTarget=r))}function c(t,i){this.el=t;this.options=n.extend({},p,i);this.group=e.get(this.options);this.rootGroup=this.options.rootGroup||this.group;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var r=this.rootGroup.options.itemPath;this.target=r?this.el.find(r):this.el;this.target.on(o.start,this.handle,n.proxy(this.dragInit,this));this.options.drop&&this.group.containers.push(this)}var o,p={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},u={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(n,t){n.css(t)},onDragStart:function(t,i){t.css({height:t.outerHeight(),width:t.outerWidth()});t.addClass(i.group.options.draggedClass);n("body").addClass(i.group.options.bodyClass)},onDrop:function(t,i){t.removeClass(i.group.options.draggedClass).removeAttr("style");n("body").removeClass(i.group.options.bodyClass)},onMousedown:function(n,t,i){if(!i.target.nodeName.match(/^(input|select|textarea)$/i))return i.preventDefault(),!0},placeholderClass:"placeholder",placeholder:'<li class="placeholder"><\/li>',pullPlaceholder:!0,serialize:function(t,i,r){return(t=n.extend({},t.data()),r)?[i]:(i[0]&&(t.children=i),delete t.subContainers,delete t.sortable,t)},tolerance:0},s={},y=0,w={left:0,top:0,bottom:0,right:0},h;o={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"};e.get=function(n){return s[n.group]||(n.group===r&&(n.group=y++),s[n.group]=new e(n)),s[n.group]};e.prototype={dragInit:function(t,i){this.$document=n(i.el[0].ownerDocument);var r=n(t.target).closest(this.options.itemSelector);r.length&&(this.item=r,this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,u.onMousedown,t)&&(this.setPointer(t),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0))},drag:function(n){if(!this.dragging){if(!this.distanceMet(n)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,u.onDragStart,n);this.item.before(this.placeholder);this.dragging=!0}this.setPointer(n);this.options.onDrag(this.item,f(this.pointer,this.item.offsetParent()),u.onDrag,n);n=this.getPointer(n);var t=this.sameResultBox,i=this.options.tolerance;(!t||t.top-i>n.top||t.bottom+i<n.top||t.left-i>n.left||t.right+i<n.left)&&!this.searchValidTarget()&&(this.placeholder.detach(),this.lastAppendedItem=r)},drop:function(n){if(this.toggleListeners("off"),this.dragInitDone=!1,this.dragging){if(this.placeholder.closest("html")[0])this.placeholder.before(this.item).detach();else this.options.onCancel(this.item,this.itemContainer,u.onCancel,n);this.options.onDrop(this.item,this.getContainer(this.item),u.onDrop,n);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=r;this.dragging=!1}},searchValidTarget:function(n,t){var u,e,i,o;for(n||(n=this.relativePointer||this.pointer,t=this.lastRelativePointer||this.lastPointer),u=v(this.getContainerDimensions(),n,t),e=u.length;e--;)if(i=u[e][0],(!u[e][1]||this.options.pullPlaceholder)&&(i=this.containers[i],!i.disabled)&&(this.$getOffsetParent()||(o=i.getItemOffsetParent(),n=f(n,o),t=f(t,o)),i.searchValidTarget(n,t)))return!0;this.sameResultBox&&(this.sameResultBox=r)},movePlaceholder:function(n,t,i,r){var u=this.lastAppendedItem;(r||!u||u[0]!==t[0])&&(t[i](this.placeholder),this.lastAppendedItem=t,this.sameResultBox=r,this.options.afterMove(this.placeholder,n,t))},getContainerDimensions:function(){return this.containerDimensions||a(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(n){return n.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===r){var n=this.containers.length-1,t=this.containers[n].getItemOffsetParent();if(!this.options.rootGroup)for(;n--;)if(t[0]!=this.containers[n].getItemOffsetParent()[0]){t=!1;break}this.offsetParent=t}return this.offsetParent},setPointer:function(n){if(n=this.getPointer(n),this.$getOffsetParent()){var t=f(n,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=t}this.lastPointer=this.pointer;this.pointer=n},distanceMet:function(n){return n=this.getPointer(n),Math.max(Math.abs(this.pointer.left-n.left),Math.abs(this.pointer.top-n.top))>=this.options.distance},getPointer:function(n){var t=n.originalEvent||n.originalEvent.touches&&n.originalEvent.touches[0];return{left:n.pageX||t.pageX,top:n.pageY||t.pageY}},setupDelayTimer:function(){var n=this;this.delayMet=!this.options.delay;this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){n.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(t){var i=this;n.each(["drag","drop","scroll"],function(n,r){i.$document[t](o[r],i[r+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=r},clearDimensions:function(){this.traverse(function(n){n._clearDimensions()})},traverse:function(n){n(this);for(var t=this.containers.length;t--;)this.containers[t].traverse(n)},_clearDimensions:function(){this.containerDimensions=r},_destroy:function(){s[this.options.group]=r}};c.prototype={dragInit:function(n){var t=this.rootGroup;!this.disabled&&!t.dragInitDone&&this.options.drag&&this.isValidDrag(n)&&t.dragInit(n,this)},isValidDrag:function(n){return 1==n.which||"touchstart"==n.type&&1==n.originalEvent.touches.length},searchValidTarget:function(n,t){var u=v(this.getItemDimensions(),n,t),r=u.length,i=this.rootGroup,f=!i.options.isValidTarget||i.options.isValidTarget(i.item,this);if(!r&&f)return i.movePlaceholder(this,this.target,"append"),!0;for(;r--;)if(i=u[r][0],!u[r][1]&&this.hasChildGroup(i)){if(this.getContainerGroup(i).searchValidTarget(n,t))return!0}else if(f)return this.movePlaceholder(i,n),!0},movePlaceholder:function(t,i){var u=n(this.items[t]),f=this.itemDimensions[t],e="after",o=u.outerWidth(),s=u.outerHeight(),r=u.offset(),r={left:r.left,right:r.left+o,top:r.top,bottom:r.top+s};this.options.vertical?i.top<=(f[2]+f[3])/2?(e="before",r.bottom-=s/2):r.top+=s/2:i.left<=(f[0]+f[1])/2?(e="before",r.right-=o/2):r.left+=o/2;this.hasChildGroup(t)&&(r=w);this.rootGroup.movePlaceholder(this,u,e,r)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),a(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var n=this.el;return"relative"===n.css("position")||"absolute"===n.css("position")||"fixed"===n.css("position")?n:n.offsetParent()},hasChildGroup:function(n){return this.options.nested&&this.getContainerGroup(n)},getContainerGroup:function(t){var u=n.data(this.items[t],"subContainers"),f;return u===r&&(f=this.$getChildren(this.items[t],"container"),u=!1,f[0]&&(u=n.extend({},this.options,{rootGroup:this.rootGroup,group:y++}),u=f[i](u).data(i).group),n.data(this.items[t],"subContainers",u)),u},$getChildren:function(t,i){var r=this.rootGroup.options,u=r[i+"Path"],r=r[i+"Selector"];return t=n(t),u&&(t=t.find(u)),t.children(r)},_serialize:function(t,i){var r=this,u=this.$getChildren(t,i?"item":"container").not(this.options.exclude).map(function(){return r._serialize(n(this),!i)}).get();return this.rootGroup.options.serialize(t,u,i)},traverse:function(t){n.each(this.items||[],function(i){(i=n.data(this,"subContainers"))&&i.traverse(t)});t(this)},_clearDimensions:function(){this.itemDimensions=r},_destroy:function(){var t=this;this.target.off(o.start,this.handle);this.el.removeData(i);this.options.drop&&(this.group.containers=n.grep(this.group.containers,function(n){return n!=t}));n.each(this.items||[],function(){n.removeData(this,"subContainers")})}};h={enable:function(){this.traverse(function(n){n.disabled=!1})},disable:function(){this.traverse(function(n){n.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(n){n._clearDimensions()})},destroy:function(){this.traverse(function(n){n._destroy()})}};n.extend(c.prototype,h);n.fn[i]=function(t){var u=Array.prototype.slice.call(arguments,1);return this.map(function(){var f=n(this),e=f.data(i);return e&&h[t]?h[t].apply(e,u)||this:(e||t!==r&&"object"!=typeof t||f.data(i,new c(f,t)),this)})}}(jQuery,window,"sortable"),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)}(function(n){var i=0,t=Array.prototype.slice,r;n.cleanData=function(t){return function(i){for(var r,u,f=0;(u=i[f])!=null;f++)try{r=n._data(u,"events");r&&r.remove&&n(u).triggerHandler("remove")}catch(e){}t(i)}}(n.cleanData);n.widget=function(t,i,r){var s,f,u,o,h={},e=t.split(".")[0];return t=t.split(".")[1],s=e+"-"+t,r||(r=i,i=n.Widget),n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)},n[e]=n[e]||{},f=n[e][t],u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)},n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]}),o=new i,o.options=n.widget.extend({},o.options),n.each(r,function(t,r){if(!n.isFunction(r)){h[t]=r;return}h[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},u=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}()}),u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s}),f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u),n.widget.bridge(t,u),u};n.widget.extend=function(i){for(var e=t.call(arguments,1),f=0,o=e.length,r,u;f<o;f++)for(r in e[f])u=e[f][r],e[f].hasOwnProperty(r)&&u!==undefined&&(i[r]=n.isPlainObject(u)?n.isPlainObject(i[r])?n.widget.extend({},i[r],u):n.widget.extend({},u):u);return i};n.widget.bridge=function(i,r){var u=r.prototype.widgetFullName||i;n.fn[i]=function(f){var s=typeof f=="string",o=t.call(arguments,1),e=this;return s?this.each(function(){var t,r=n.data(this,u);return f==="instance"?(e=r,!1):r?!n.isFunction(r[f])||f.charAt(0)==="_"?n.error("no such method '"+f+"' for "+i+" widget instance"):(t=r[f].apply(r,o),t!==r&&t!==undefined?(e=t&&t.jquery?e.pushStack(t.get()):t,!1):void 0):n.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+f+"'")}):(o.length&&(f=n.widget.extend.apply(null,[f].concat(o))),this.each(function(){var t=n.data(this,u);t?(t.option(f||{}),t._init&&t._init()):n.data(this,u,new r(f,this))})),e}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=n(r||this.defaultElement||this)[0];this.element=n(r);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=n();this.hoverable=n();this.focusable=n();r!==this&&(n.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===r&&this.destroy()}}),this.document=n(r.style?r.ownerDocument:r.document||r),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(t,i){var e=t,r,u,f;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof t=="string")if(e={},r=t.split("."),t=r.shift(),r.length){for(u=e[t]=n.widget.extend({},this.options[t]),f=0;f<r.length-1;f++)u[r[f]]=u[r[f]]||{},u=u[r[f]];if(t=r.pop(),arguments.length===1)return u[t]===undefined?null:u[t];u[t]=i}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];e[t]=i}return this._setOptions(e),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.unbind(i).undelegate(i);this.bindings=n(this.bindings.not(t).get());this.focusable=n(this.focusable.not(t).get());this.hoverable=n(this.hoverable.not(t).get())},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}});r=n.widget});"classList"in document.createElement("_")||function(n){"use strict";var f;if("Element"in n){var e="classList",t="prototype",o=n.Element[t],r=Object,l=String[t].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[t].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1},s=function(n,t){this.name=n;this.code=DOMException[n];this.message=t},u=function(n,t){if(t==="")throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(n,t)},h=function(n){for(var i=l.call(n.getAttribute("class")||""),r=i?i.split(/\s+/):[],t=0,u=r.length;t<u;t++)this.push(r[t]);this._updateClassName=function(){n.setAttribute("class",this.toString())}},i=h[t]=[],c=function(){return new h(this)};if(s[t]=Error[t],i.item=function(n){return this[n]||null},i.contains=function(n){return n+="",u(this,n)!==-1},i.add=function(){var t=arguments,i=0,f=t.length,n,r=!1;do n=t[i]+"",u(this,n)===-1&&(this.push(n),r=!0);while(++i<f);r&&this._updateClassName()},i.remove=function(){var i=arguments,r=0,e=i.length,t,f=!1,n;do for(t=i[r]+"",n=u(this,t);n!==-1;)this.splice(n,1),f=!0,n=u(this,t);while(++r<e);f&&this._updateClassName()},i.toggle=function(n,t){n+="";var i=this.contains(n),r=i?t!==!0&&"remove":t!==!1&&"add";return r&&this[r](n),t===!0||t===!1?t:!i},i.toString=function(){return this.join(" ")},r.defineProperty){f={get:c,enumerable:!0,configurable:!0};try{r.defineProperty(o,e,f)}catch(v){v.number===-2146823252&&(f.enumerable=!1,r.defineProperty(o,e,f))}}else r[t].__defineGetter__&&o.__defineGetter__(e,c)}}(self),function(n){"use strict";var t,i;if(n.URL=n.URL||n.webkitURL,n.Blob&&n.URL)try{new Blob;return}catch(r){}t=n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||function(n){var s=function(n){return Object.prototype.toString.call(n).match(/^\[object\s(.*)\]$/)[1]},h=function(){this.data=[]},t=function(n,t,i){this.data=n;this.size=n.length;this.type=t;this.encoding=i},u=h.prototype,r=t.prototype,c=n.FileReaderSync,l=function(n){this.code=this[this.name=n]},a="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),f=a.length,i=n.URL||n.webkitURL||n,v=i.createObjectURL,y=i.revokeObjectURL,e=i,p=n.btoa,w=n.atob,b=n.ArrayBuffer,o=n.Uint8Array,k=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(t.fake=r.fake=!0;f--;)l.prototype[a[f]]=f+1;return i.createObjectURL||(e=n.URL=function(n){var t=document.createElementNS("http://www.w3.org/1999/xhtml","a"),i;return t.href=n,"origin"in t||(t.protocol.toLowerCase()==="data:"?t.origin=null:(i=n.match(k),t.origin=i&&i[1])),t}),e.createObjectURL=function(n){var u=n.type,r;return(u===null&&(u="application/octet-stream"),n instanceof t)?(r="data:"+u,n.encoding==="base64")?r+";base64,"+n.data:n.encoding==="URI"?r+","+decodeURIComponent(n.data):p?r+";base64,"+p(n.data):r+","+encodeURIComponent(n.data):v?v.call(i,n):void 0},e.revokeObjectURL=function(n){n.substring(0,5)!=="data:"&&y&&y.call(i,n)},u.append=function(n){var i=this.data,e;if(o&&(n instanceof b||n instanceof o)){for(var u="",f=new o(n),r=0,h=f.length;r<h;r++)u+=String.fromCharCode(f[r]);i.push(u)}else if(s(n)==="Blob"||s(n)==="File")if(c)e=new c,i.push(e.readAsBinaryString(n));else throw new l("NOT_READABLE_ERR");else n instanceof t?n.encoding==="base64"&&w?i.push(w(n.data)):n.encoding==="URI"?i.push(decodeURIComponent(n.data)):n.encoding==="raw"&&i.push(n.data):(typeof n!="string"&&(n+=""),i.push(unescape(encodeURIComponent(n))))},u.getBlob=function(n){return arguments.length||(n=null),new t(this.data.join(""),n,"raw")},u.toString=function(){return"[object BlobBuilder]"},r.slice=function(n,i,r){var u=arguments.length;return u<3&&(r=null),new t(this.data.slice(n,u>1?i:this.data.length),r,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0;delete this.data},h}(n);n.Blob=function(n,i){var o=i?i.type||"":"",f=new t,r,e,u;if(n)for(r=0,e=n.length;r<e;r++)Uint8Array&&n[r]instanceof Uint8Array?f.append(n[r].buffer):f.append(n[r]);return u=f.getBlob(o),!u.slice&&u.webkitSlice&&(u.slice=u.webkitSlice),u};i=Object.getPrototypeOf||function(n){return n.__proto__};n.Blob.prototype=i(new n.Blob)}(typeof self!="undefined"&&self||typeof window!="undefined"&&window||this.content||this),function(n,t){"use strict";typeof module=="object"?module.exports=t:typeof define=="function"&&define.amd?define(function(){return t}):n.MediumEditor=t}(this,function(){"use strict";function n(n,t){return this.init(n,t)}return n.extensions={},function(t){function f(n,t){var i,f=Array.prototype.slice.call(arguments,2),u,r;for(t=t||{},u=0;u<f.length;u++)if(r=f[u],r)for(i in r)r.hasOwnProperty(i)&&typeof r[i]!="undefined"&&(n||t.hasOwnProperty(i)===!1)&&(t[i]=r[i]);return t}var e=!1,r,u,i;try{r=document.createElement("div");u=document.createTextNode(" ");r.appendChild(u);e=r.contains(u)}catch(o){}i={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(n){return i.isMac&&n.metaKey||!i.isMac&&n.ctrlKey?!0:!1},isKey:function(n,t){var r=i.getKeyCode(n);return!1===Array.isArray(t)?r===t:-1===t.indexOf(r)?!1:!0},getKeyCode:function(n){var t=n.which;return null===t&&(t=n.charCode!==null?n.charCode:n.keyCode),t},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var n=[!0].concat(Array.prototype.slice.call(arguments));return f.apply(this,n)},defaults:function(){var n=[!1].concat(Array.prototype.slice.call(arguments));return f.apply(this,n)},createLink:function(n,t,r,u){var f=n.createElement("a");return i.moveTextRangeIntoElement(t[0],t[t.length-1],f),f.setAttribute("href",r),u&&f.setAttribute("target",u),f},findOrCreateMatchingTextNodes:function(n,t,r){for(var h=n.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),s=[],e=0,f=!1,u=null,o=null;(u=h.nextNode())!==null;)if(u.nodeType>3)continue;else if(u.nodeType===3){if(!f&&r.start<e+u.nodeValue.length&&(f=!0,o=i.splitStartNodeIfNeeded(u,r.start,e)),f&&i.splitEndNodeIfNeeded(u,o,r.end,e),f&&e===r.end)break;else if(f&&e>r.end+1)throw new Error("PerformLinking overshot the target!");f&&s.push(o||u);e+=u.nodeValue.length;o!==null&&(e+=o.nodeValue.length,h.nextNode());o=null}else u.tagName.toLowerCase()==="img"&&(!f&&r.start<=e&&(f=!0),f&&s.push(u));return s},splitStartNodeIfNeeded:function(n,t,i){return t!==i?n.splitText(t-i):null},splitEndNodeIfNeeded:function(n,t,i,r){var u,f;u=r+(t||n).nodeValue.length+(t?n.nodeValue.length:0)-1;f=(t||n).nodeValue.length-(u+1-i);u>=i&&r!==u&&f!==0&&(t||n).splitText(f)},splitByBlockElements:function(t){var r,f,u,i,e;if(t.nodeType!==3&&t.nodeType!==1)return[];if(r=[],f=n.util.blockContainerElementNames.join(","),t.nodeType===3||t.querySelectorAll(f).length===0)return[t];for(u=0;u<t.childNodes.length;u++)i=t.childNodes[u],i.nodeType===3?r.push(i):i.nodeType===1&&(e=i.querySelectorAll(f),e.length===0?r.push(i):r=r.concat(n.util.splitByBlockElements(i)));return r},findAdjacentTextNodeWithContent:function(n,t,i){for(var u=!1,f=i.createNodeIterator(n,NodeFilter.SHOW_TEXT,null,!1),r=f.nextNode();r;){if(r===t)u=!0;else if(u&&r.nodeType===3&&r.nodeValue&&r.nodeValue.trim().length>0)break;r=f.nextNode()}return r},findPreviousSibling:function(n){if(!n||i.isMediumEditorElement(n))return!1;for(var t=n.previousSibling;!t&&!i.isMediumEditorElement(n.parentNode);)n=n.parentNode,t=n.previousSibling;return t},isDescendant:function(n,t,i){if(!n||!t)return!1;if(n===t)return!!i;if(n.nodeType!==1)return!1;if(e||t.nodeType!==3)return n.contains(t);for(var r=t.parentNode;r!==null;){if(r===n)return!0;r=r.parentNode}return!1},isElement:function(n){return!!(n&&n.nodeType===1)},throttle:function(n,t){var r,u,f,i=null,e=0,o=function(){e=Date.now();i=null;f=n.apply(r,u);i||(r=u=null)};return t||t===0||(t=50),function(){var h=Date.now(),s=t-(h-e);return r=this,u=arguments,s<=0||s>t?(i&&(clearTimeout(i),i=null),e=h,f=n.apply(r,u),i||(r=u=null)):i||(i=setTimeout(o,s)),f}},traverseUp:function(n,t){if(!n)return!1;do{if(n.nodeType===1){if(t(n))return n;if(i.isMediumEditorElement(n))return!1}n=n.parentNode}while(n);return!1},htmlEntities:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,r){var o,f,e,s,l,h,u,c=!1,a=["insertHTML",!1,r];if(!n.util.isEdge&&t.queryCommandSupported("insertHTML"))try{return t.execCommand.apply(t,a)}catch(v){}if(o=t.getSelection(),o.rangeCount){if(f=o.getRangeAt(0),u=f.commonAncestorContainer,i.isMediumEditorElement(u)&&!u.firstChild)f.selectNode(u.appendChild(t.createTextNode("")));else if(u.nodeType===3&&f.startOffset===0&&f.endOffset===u.nodeValue.length||u.nodeType!==3&&u.innerHTML===f.toString()){while(!i.isMediumEditorElement(u)&&u.parentNode&&u.parentNode.childNodes.length===1&&!i.isMediumEditorElement(u.parentNode))u=u.parentNode;f.selectNode(u)}for(f.deleteContents(),e=t.createElement("div"),e.innerHTML=r,s=t.createDocumentFragment();e.firstChild;)l=e.firstChild,h=s.appendChild(l);f.insertNode(s);h&&(f=f.cloneRange(),f.setStartAfter(h),f.collapse(!0),n.selection.selectRange(t,f));c=!0}return t.execCommand.callListeners&&t.execCommand.callListeners(a,c),c},execFormatBlock:function(t,r){var u=i.getTopBlockContainer(n.selection.getSelectionStart(t)),f;if(r==="blockquote"){if(u&&(f=Array.prototype.slice.call(u.childNodes),f.some(function(n){return i.isBlockContainer(n)})))return t.execCommand("outdent",!1,null);if(i.isIE)return t.execCommand("indent",!1,r)}if(u&&r===u.nodeName.toLowerCase()&&(r="p"),i.isIE&&(r="<"+r+">"),u&&u.nodeName.toLowerCase()==="blockquote"){if(i.isIE&&r==="<p>")return t.execCommand("outdent",!1,r);if((i.isFF||i.isEdge)&&r==="p")return f=Array.prototype.slice.call(u.childNodes),f.some(function(n){return!i.isBlockContainer(n)})&&t.execCommand("formatBlock",!1,r),t.execCommand("outdent",!1,r)}return t.execCommand("formatBlock",!1,r)},setTargetBlank:function(n,t){var i,r=t||!1;if(n.nodeName.toLowerCase()==="a")n.target="_blank";else for(n=n.getElementsByTagName("a"),i=0;i<n.length;i+=1)(!1===r||r===n[i].attributes.href.value)&&(n[i].target="_blank")},removeTargetBlank:function(n,t){var i;if(n.nodeName.toLowerCase()==="a")n.removeAttribute("target");else for(n=n.getElementsByTagName("a"),i=0;i<n.length;i+=1)t===n[i].attributes.href.value&&n[i].removeAttribute("target")},addClassToAnchors:function(n,t){var r=t.split(" "),u,i;if(n.nodeName.toLowerCase()==="a")for(i=0;i<r.length;i+=1)n.classList.add(r[i]);else for(n=n.getElementsByTagName("a"),u=0;u<n.length;u+=1)for(i=0;i<r.length;i+=1)n[u].classList.add(r[i])},isListItem:function(n){if(!n)return!1;if(n.nodeName.toLowerCase()==="li")return!0;for(var t=n.parentNode,r=t.nodeName.toLowerCase();r==="li"||!i.isBlockContainer(t)&&r!=="div";){if(r==="li")return!0;if(t=t.parentNode,t)r=t.nodeName.toLowerCase();else return!1}return!1},cleanListDOM:function(t,r){if(r.nodeName.toLowerCase()==="li"){var u=r.parentElement;u.parentElement.nodeName.toLowerCase()==="p"&&(i.unwrap(u.parentElement,t),n.selection.moveCursor(t,r.firstChild,r.firstChild.textContent.length))}},splitOffDOMTree:function(n,t,i){for(var f=t,u=null,e=!i,h;f!==n;){var o=f.parentNode,c=o.cloneNode(!1),r=e?f:o.firstChild,s;for(u&&(e?c.appendChild(u):s=u),u=c;r;)h=r.nextSibling,r===f?(r.hasChildNodes()?r=r.cloneNode(!1):r.parentNode.removeChild(r),r.textContent&&u.appendChild(r),r=e?h:null):(r.parentNode.removeChild(r),(r.hasChildNodes()||r.textContent)&&u.appendChild(r),r=h);s&&u.appendChild(s);f=o}return u},moveTextRangeIntoElement:function(n,t,r){var u,h,l,a,e,f,s,c,v,o;if(!n||!t||(u=i.findCommonRoot(n,t),!u))return!1;if(t===n)return h=n.parentNode,l=n.nextSibling,h.removeChild(n),r.appendChild(n),l?h.insertBefore(r,l):h.appendChild(r),r.hasChildNodes();for(a=[],c=0;c<u.childNodes.length;c++)if(s=u.childNodes[c],e)if(i.isDescendant(s,t,!0)){f=s;break}else a.push(s);else i.isDescendant(s,n,!0)&&(e=s);return v=f.nextSibling,o=u.ownerDocument.createDocumentFragment(),e===n?(e.parentNode.removeChild(e),o.appendChild(e)):o.appendChild(i.splitOffDOMTree(e,n)),a.forEach(function(n){n.parentNode.removeChild(n);o.appendChild(n)}),f===t?(f.parentNode.removeChild(f),o.appendChild(f)):o.appendChild(i.splitOffDOMTree(f,t,!0)),r.appendChild(o),f.parentNode===u?u.insertBefore(r,f):v?u.insertBefore(r,v):u.appendChild(r),r.hasChildNodes()},depthOfNode:function(n){for(var i=0,t=n;t.parentNode!==null;)t=t.parentNode,i++;return i},findCommonRoot:function(n,t){for(var f=i.depthOfNode(n),e=i.depthOfNode(t),r=n,u=t;f!==e;)f>e?(r=r.parentNode,f-=1):(u=u.parentNode,e-=1);while(r!==u)r=r.parentNode,u=u.parentNode;return r},isElementAtBeginningOfBlock:function(n){for(var r,t;!i.isBlockContainer(n)&&!i.isMediumEditorElement(n);){for(t=n;t=t.previousSibling;)if(r=t.nodeType===3?t.nodeValue:t.textContent,r.length>0)return!1;n=n.parentNode}return!0},isMediumEditorElement:function(n){return n&&n.getAttribute&&!!n.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(n){return i.traverseUp(n,function(n){return i.isMediumEditorElement(n)})},isBlockContainer:function(n){return n&&n.nodeType!==3&&i.blockContainerElementNames.indexOf(n.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(n){return i.traverseUp(n,function(n){return i.isBlockContainer(n)||i.isMediumEditorElement(n)})},getTopBlockContainer:function(n){var t=i.isBlockContainer(n)?n:!1;return i.traverseUp(n,function(n){return(i.isBlockContainer(n)&&(t=n),!t&&i.isMediumEditorElement(n))?(t=n,!0):!1}),t},getFirstSelectableLeafNode:function(n){while(n&&n.firstChild)n=n.firstChild;if(n=i.traverseUp(n,function(n){return i.emptyElementNames.indexOf(n.nodeName.toLowerCase())===-1}),n.nodeName.toLowerCase()==="table"){var t=n.querySelector("th, td");t&&(n=t)}return n},getFirstTextNode:function(n){return i.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),i._getFirstTextNode(n)},_getFirstTextNode:function(n){var t,r;if(n.nodeType===3)return n;for(t=0;t<n.childNodes.length;t++)if(r=i._getFirstTextNode(n.childNodes[t]),r!==null)return r;return null},ensureUrlHasProtocol:function(n){return n.indexOf("://")===-1?"http://"+n:n},warn:function(){t.console!==undefined&&typeof t.console.warn=="function"&&t.console.warn.apply(t.console,arguments)},deprecated:function(n,t,r){var u=n+" is deprecated, please use "+t+" instead.";r&&(u+=" Will be removed in "+r);i.warn(u)},deprecatedMethod:function(n,t,r,u){i.deprecated(n,t,u);typeof this[t]=="function"&&this[t].apply(this,r)},cleanupAttrs:function(n,t){t.forEach(function(t){n.removeAttribute(t)})},cleanupTags:function(n,t){t.forEach(function(t){n.nodeName.toLowerCase()===t&&n.parentNode.removeChild(n)})},getClosestTag:function(n,t){return i.traverseUp(n,function(n){return n.nodeName.toLowerCase()===t.toLowerCase()})},unwrap:function(n,t){for(var i=t.createDocumentFragment(),u=Array.prototype.slice.call(n.childNodes),r=0;r<u.length;r++)i.appendChild(u[r]);i.childNodes.length?n.parentNode.replaceChild(i,n):n.parentNode.removeChild(n)},guid:function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}};n.util=i}(window),function(){var t=function(t){n.util.extend(this,t)};t.extend=function(t){var r=this,i,u;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},n.util.extend(i,r),u=function(){this.constructor=i},u.prototype=r.prototype,i.prototype=new u,t&&n.util.extend(i.prototype,t),i};t.prototype={init:function(){},base:undefined,name:undefined,checkState:undefined,destroy:undefined,queryCommandState:undefined,isActive:undefined,isAlreadyApplied:undefined,setActive:undefined,setInactive:undefined,window:undefined,document:undefined,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(n){return this.base.options[n]}};["execAction","on","off","subscribe","trigger"].forEach(function(n){t.prototype[n]=function(){return this.base[n].apply(this.base,arguments)}});n.Extension=t}(),function(){function t(t){return n.util.isBlockContainer(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var i={findMatchingSelectionParent:function(t,i){var r=i.getSelection(),u,f;return r.rangeCount===0?!1:(u=r.getRangeAt(0),f=u.commonAncestorContainer,n.util.traverseUp(f,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(t){return n.util.isMediumEditorElement(t)},t)},exportSelection:function(n,t){var r,e,i,u,f,o,s;return n?(r=null,e=t.getSelection(),e.rangeCount>0&&(i=e.getRangeAt(0),u=i.cloneRange(),u.selectNodeContents(n),u.setEnd(i.startContainer,i.startOffset),f=u.toString().length,r={start:f,end:f+i.toString().length},this.doesRangeStartWithImages(i,t)&&(r.startsWithImage=!0),o=this.getTrailingImageCount(n,r,i.endContainer,i.endOffset),o&&(r.trailingImageCount=o),f!==0&&(s=this.getIndexRelativeToAdjacentEmptyBlocks(t,n,i.startContainer,i.startOffset),s!==-1&&(r.emptyBlocksIndex=s))),r):null},importSelection:function(n,t,i,r){var f,l,a;if(n&&t){f=i.createRange();f.setStart(t,0);f.collapse(!0);var u=t,v=[],e=0,c=!1,y=!1,p=0,s=!1,h,w=!1,o=null;for((r||n.startsWithImage||typeof n.emptyBlocksIndex!="undefined")&&(w=!0);!s&&u;){if(u.nodeType>3){u=v.pop();continue}if(u.nodeType!==3||y){if(n.trailingImageCount&&y&&(u.nodeName.toLowerCase()==="img"&&p++,p===n.trailingImageCount)){for(l=0;u.parentNode.childNodes[l]!==u;)l++;f.setEnd(u.parentNode,l+1);s=!0}if(!s&&u.nodeType===1)for(a=u.childNodes.length-1;a>=0;)v.push(u.childNodes[a]),a-=1}else h=e+u.length,!c&&n.start>=e&&n.start<=h&&(w||n.start<h?(f.setStart(u,n.start-e),c=!0):o=u),c&&n.end>=e&&n.end<=h&&(n.trailingImageCount?y=!0:(f.setEnd(u,n.end-e),s=!0)),e=h;s||(u=v.pop())}!c&&o&&(f.setStart(o,o.length),f.setEnd(o,o.length));typeof n.emptyBlocksIndex!="undefined"&&(f=this.importSelectionMoveCursorPastBlocks(i,t,n.emptyBlocksIndex,f));r&&(f=this.importSelectionMoveCursorPastAnchor(n,f));this.selectRange(i,f)}},importSelectionMoveCursorPastAnchor:function(t,i){var o=function(n){return n.nodeName.toLowerCase()==="a"},e,r,f,u;if(t.start===t.end&&i.startContainer.nodeType===3&&i.startOffset===i.startContainer.nodeValue.length&&n.util.traverseUp(i.startContainer,o)){for(e=i.startContainer,r=i.startContainer.parentNode;r!==null&&r.nodeName.toLowerCase()!=="a";)r.childNodes[r.childNodes.length-1]!==e?r=null:(e=r,r=r.parentNode);if(r!==null&&r.nodeName.toLowerCase()==="a"){for(f=null,u=0;f===null&&u<r.parentNode.childNodes.length;u++)r.parentNode.childNodes[u]===r&&(f=u);i.setStart(r.parentNode,f+1);i.collapse(!0)}}return i},importSelectionMoveCursorPastBlocks:function(i,r,u,f){var o=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,t,!1),s=f.startContainer,h,e,c=0;for(u=u||1,h=s.nodeType===3&&n.util.isBlockContainer(s.previousSibling)?s.previousSibling:n.util.getClosestBlockContainer(s);o.nextNode();)if(e){if(e=o.currentNode,c++,c===u)break;if(e.textContent.length>0)break}else h===o.currentNode&&(e=o.currentNode);return e||(e=h),f.setStart(n.util.getFirstSelectableLeafNode(e),0),f},getIndexRelativeToAdjacentEmptyBlocks:function(i,r,u,f){var e,s,c;if(u.textContent.length>0&&f>0)return-1;if(e=u,e.nodeType!==3&&(e=u.childNodes[f]),e){if(!n.util.isElementAtBeginningOfBlock(e))return-1;if(s=n.util.findPreviousSibling(e),s){if(s.nodeValue)return-1}else return-1}for(var l=n.util.getClosestBlockContainer(u),h=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,t,!1),o=0;h.nextNode();){if(c=h.currentNode.textContent==="",(c||o>0)&&(o+=1),h.currentNode===l)return o;c||(o=0)}return o},doesRangeStartWithImages:function(n,t){var i,r,u;if(n.startOffset!==0||n.startContainer.nodeType!==1)return!1;if(n.startContainer.nodeName.toLowerCase()==="img")return!0;if(i=n.startContainer.querySelector("img"),!i)return!1;for(r=t.createTreeWalker(n.startContainer,NodeFilter.SHOW_ALL,null,!1);r.nextNode();){if(u=r.currentNode,u===i)break;if(u.nodeValue)return!1}return!0},getTrailingImageCount:function(n,t,i,r){var f,s;if(r===0||i.nodeType!==1||i.nodeName.toLowerCase()!=="img"&&!i.querySelector("img"))return 0;for(f=i.childNodes[r-1];f.hasChildNodes();)f=f.lastChild;for(var u=n,h=[],e=0,c=!1,v=!1,l=!1,o,a=0;!l&&u;){if(u.nodeType>3){u=h.pop();continue}if(u.nodeType!==3||v){if(u.nodeName.toLowerCase()==="img"&&a++,u===f)l=!0;else if(u.nodeType===1)for(s=u.childNodes.length-1;s>=0;)h.push(u.childNodes[s]),s-=1}else a=0,o=e+u.length,!c&&t.start>=e&&t.start<=o&&(c=!0),c&&t.end>=e&&t.end<=o&&(v=!0),e=o;l||(u=h.pop())}return a},selectionContainsContent:function(n){var t=n.getSelection(),i;return!t||t.isCollapsed||!t.rangeCount?!1:t.toString().trim()!==""?!0:(i=this.getSelectedParentElement(t.getRangeAt(0)),i&&(i.nodeName.toLowerCase()==="img"||i.nodeType===1&&i.querySelector("img")))?!0:!1},selectionInContentEditableFalse:function(n){var t,i=this.findMatchingSelectionParent(function(n){var i=n&&n.getAttribute("contenteditable");return i==="true"&&(t=!0),n.nodeName!=="#text"&&i==="false"},n);return!t&&i},getSelectionHtml:function(n){var t,u="",i=n.getSelection(),f,r;if(i.rangeCount){for(r=n.createElement("div"),t=0,f=i.rangeCount;t<f;t+=1)r.appendChild(i.getRangeAt(t).cloneContents());u=r.innerHTML}return u},getCaretOffsets:function(n,t){var i,r;return t||(t=window.getSelection().getRangeAt(0)),i=t.cloneRange(),r=t.cloneRange(),i.selectNodeContents(n),i.setEnd(t.endContainer,t.endOffset),r.selectNodeContents(n),r.setStart(t.endContainer,t.endOffset),{left:i.toString().length,right:r.toString().length}},rangeSelectsSingleNode:function(n){var t=n.startContainer;return t===n.endContainer&&t.hasChildNodes()&&n.endOffset===n.startOffset+1},getSelectedParentElement:function(n){return n?this.rangeSelectsSingleNode(n)&&n.startContainer.childNodes[n.startOffset].nodeType!==3?n.startContainer.childNodes[n.startOffset]:n.startContainer.nodeType===3?n.startContainer.parentNode:n.startContainer:null},getSelectedElements:function(n){var t=n.getSelection(),r,u,i;if(!t.rangeCount||t.isCollapsed||!t.getRangeAt(0).commonAncestorContainer)return[];if(r=t.getRangeAt(0),r.commonAncestorContainer.nodeType===3){for(u=[],i=r.commonAncestorContainer;i.parentNode&&i.parentNode.childNodes.length===1;)u.push(i.parentNode),i=i.parentNode;return u}return[].filter.call(r.commonAncestorContainer.getElementsByTagName("*"),function(n){return typeof t.containsNode=="function"?t.containsNode(n,!0):!0})},selectNode:function(n,t){var i=t.createRange();i.selectNodeContents(n);this.selectRange(t,i)},select:function(n,t,i,r,u){var f=n.createRange();return f.setStart(t,i),r?f.setEnd(r,u):f.collapse(!0),this.selectRange(n,f),f},clearSelection:function(n,t){t?n.getSelection().collapseToStart():n.getSelection().collapseToEnd()},moveCursor:function(n,t,i){this.select(n,t,i)},getSelectionRange:function(n){var t=n.getSelection();return t.rangeCount===0?null:t.getRangeAt(0)},selectRange:function(n,t){var i=n.getSelection();i.removeAllRanges();i.addRange(t)},getSelectionStart:function(n){var t=n.getSelection().anchorNode;return t&&t.nodeType===3?t.parentNode:t}};n.selection=i}(),function(){var t=function(n){this.base=n;this.options=this.base.options;this.events=[];this.disabledEvents={};this.customEvents={};this.listeners={}};t.prototype={InputEventOnContenteditableSupported:!n.util.isIE&&!n.util.isEdge,attachDOMEvent:function(t,i,r,u){t=n.util.isElement(t)||[window,document].indexOf(t)>-1?[t]:t;Array.prototype.forEach.call(t,function(n){n.addEventListener(i,r,u);this.events.push([n,i,r,u])}.bind(this))},detachDOMEvent:function(t,i,r,u){var e,f;t=n.util.isElement(t)||[window,document].indexOf(t)>-1?[t]:t;Array.prototype.forEach.call(t,function(n){e=this.indexOfListener(n,i,r,u);e!==-1&&(f=this.events.splice(e,1)[0],f[0].removeEventListener(f[1],f[2],f[3]))}.bind(this))},indexOfListener:function(n,t,i,r){for(var f,u=0,e=this.events.length;u<e;u=u+1)if(f=this.events[u],f[0]===n&&f[1]===t&&f[2]===i&&f[3]===r)return u;return-1},detachAllDOMEvents:function(){for(var n=this.events.pop();n;)n[0].removeEventListener(n[1],n[2],n[3]),n=this.events.pop()},detachAllEventsFromElement:function(n){for(var t,r=this.events.filter(function(t){return t&&t[0].getAttribute&&t[0].getAttribute("medium-editor-index")===n.getAttribute("medium-editor-index")}),i=0,u=r.length;i<u;i++)t=r[i],this.detachDOMEvent(t[0],t[1],t[2],t[3])},attachAllEventsToElement:function(n){this.listeners.editableInput&&(this.contentCache[n.getAttribute("medium-editor-index")]=n.innerHTML);this.eventsCache&&this.eventsCache.forEach(function(t){this.attachDOMEvent(n,t.name,t.handler.bind(this))},this)},enableCustomEvent:function(n){this.disabledEvents[n]!==undefined&&delete this.disabledEvents[n]},disableCustomEvent:function(n){this.disabledEvents[n]=!0},attachCustomEvent:function(n,t){this.setupListener(n);this.customEvents[n]||(this.customEvents[n]=[]);this.customEvents[n].push(t)},detachCustomEvent:function(n,t){var i=this.indexOfCustomListener(n,t);i!==-1&&this.customEvents[n].splice(i,1)},indexOfCustomListener:function(n,t){return!this.customEvents[n]||!this.customEvents[n].length?-1:this.customEvents[n].indexOf(t)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(n,t,i){this.customEvents[n]&&!this.disabledEvents[n]&&this.customEvents[n].forEach(function(n){n(t,i)})},destroy:function(){this.detachAllDOMEvents();this.detachAllCustomEvents();this.detachExecCommand();this.base.elements&&this.base.elements.forEach(function(n){n.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(n){this.handleDocumentExecCommand(n)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var n=this.options.ownerDocument,t;this.execCommandListener&&n.execCommand.listeners&&(t=n.execCommand.listeners.indexOf(this.execCommandListener),t!==-1&&n.execCommand.listeners.splice(t,1),n.execCommand.listeners.length||this.unwrapExecCommand())},wrapExecCommand:function(){var n=this.options.ownerDocument,i,t;n.execCommand.listeners||(i=function(t,i){n.execCommand.listeners&&n.execCommand.listeners.forEach(function(n){n({command:t[0],value:t[2],args:t,result:i})})},t=function(){var t=n.execCommand.orig.apply(this,arguments),r;return n.execCommand.listeners?(r=Array.prototype.slice.call(arguments),i(r,t),t):t},t.orig=n.execCommand,t.listeners=[],t.callListeners=i,n.execCommand=t)},unwrapExecCommand:function(){var n=this.options.ownerDocument;n.execCommand.orig&&(n.execCommand=n.execCommand.orig)},setupListener:function(n){if(!this.listeners[n]){switch(n){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0);this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0);this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={};this.base.elements.forEach(function(n){this.contentCache[n.getAttribute("medium-editor-index")]=n.innerHTML},this);this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput);this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging);this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[n]=!0}},attachToEachElement:function(n,t){this.eventsCache||(this.eventsCache=[]);this.base.elements.forEach(function(i){this.attachDOMEvent(i,n,t.bind(this))},this);this.eventsCache.push({name:n,handler:t})},cleanupElement:function(n){var t=n.getAttribute("medium-editor-index");t&&(this.detachAllEventsFromElement(n),this.contentCache&&delete this.contentCache[t])},focusElement:function(n){n.focus();this.updateFocus(n,{target:n,type:"focus"})},updateFocus:function(t,i){var o=this.base.getExtensionByName("toolbar"),s=o?o.getToolbarElement():null,f=this.base.getExtensionByName("anchor-preview"),h=f&&f.getPreviewElement?f.getPreviewElement():null,u=this.base.getFocusedElement(),r,e;u&&i.type==="click"&&this.lastMousedownTarget&&(n.util.isDescendant(u,this.lastMousedownTarget,!0)||n.util.isDescendant(s,this.lastMousedownTarget,!0)||n.util.isDescendant(h,this.lastMousedownTarget,!0))&&(r=u);r||this.base.elements.some(function(i){return!r&&n.util.isDescendant(i,t,!0)&&(r=i),!!r},this);e=!n.util.isDescendant(u,t,!0)&&!n.util.isDescendant(s,t,!0)&&!n.util.isDescendant(h,t,!0);r!==u&&(u&&e&&(u.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,u)),r&&(r.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,r)));e&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(n,t){if(this.contentCache){var i=n.getAttribute("medium-editor-index"),r=n.innerHTML;r!==this.contentCache[i]&&this.triggerCustomEvent("editableInput",t,n);this.contentCache[i]=r}},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var r=t.currentTarget.activeElement,i;this.base.elements.some(function(t){return n.util.isDescendant(t,r,!0)?(i=t,!0):!1},this);i&&this.updateInput(i,{target:r,currentTarget:i})}},handleDocumentExecCommand:function(){var n=this.base.getFocusedElement();n&&this.updateInput(n,{target:n,currentTarget:n})},handleBodyClick:function(n){this.updateFocus(n.target,n)},handleBodyFocus:function(n){this.updateFocus(n.target,n)},handleBodyMousedown:function(n){this.lastMousedownTarget=n.target},handleInput:function(n){this.updateInput(n.currentTarget,n)},handleClick:function(n){this.triggerCustomEvent("editableClick",n,n.currentTarget)},handleBlur:function(n){this.triggerCustomEvent("editableBlur",n,n.currentTarget)},handleKeypress:function(n){if(this.triggerCustomEvent("editableKeypress",n,n.currentTarget),this.keypressUpdateInput){var t={target:n.target,currentTarget:n.currentTarget};setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0)}},handleKeyup:function(n){this.triggerCustomEvent("editableKeyup",n,n.currentTarget)},handleMouseover:function(n){this.triggerCustomEvent("editableMouseover",n,n.currentTarget)},handleDragging:function(n){this.triggerCustomEvent("editableDrag",n,n.currentTarget)},handleDrop:function(n){this.triggerCustomEvent("editableDrop",n,n.currentTarget)},handlePaste:function(n){this.triggerCustomEvent("editablePaste",n,n.currentTarget)},handleKeydown:function(t){return(this.triggerCustomEvent("editableKeydown",t,t.currentTarget),n.util.isKey(t,n.util.keyCode.SPACE))?this.triggerCustomEvent("editableKeydownSpace",t,t.currentTarget):n.util.isKey(t,n.util.keyCode.ENTER)||t.ctrlKey&&n.util.isKey(t,n.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget):n.util.isKey(t,n.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget):n.util.isKey(t,[n.util.keyCode.DELETE,n.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget):void 0}};n.Events=t}(),function(){var t=n.Extension.extend({action:undefined,aria:undefined,tagNames:undefined,style:undefined,useQueryState:undefined,contentDefault:undefined,contentFA:undefined,classList:undefined,attrs:undefined,constructor:function(i){t.isBuiltInButton(i)?n.Extension.call(this,this.defaults[i]):n.Extension.call(this,i)},init:function(){n.Extension.prototype.init.apply(this,arguments);this.button=this.createButton();this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action=="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria=="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames=="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var n=this.document.createElement("button"),i=this.contentDefault,t=this.getAria(),r=this.getEditorOption("buttonLabels");return n.classList.add("medium-editor-action"),n.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(t){n.classList.add(t)}),n.setAttribute("data-action",this.getAction()),t&&(n.setAttribute("title",t),n.setAttribute("aria-label",t)),this.attrs&&Object.keys(this.attrs).forEach(function(t){n.setAttribute(t,this.attrs[t])},this),r==="fontawesome"&&this.contentFA&&(i=this.contentFA),n.innerHTML=i,n},handleClick:function(n){var t,u,r,i;if(n.preventDefault(),n.stopPropagation(),t=this.getAction(),t=this.getAction(),t){if(t=="indent"||t=="outdent"){if(u=document.createElement("bz"),document.body.appendChild(u),$("bz")[0].innerHTML=getCurrentSelection(),$("bz").find("li").length||getSelection().getRangeAt(0).commonAncestorContainer!=null&&$(getSelection().getRangeAt(0).commonAncestorContainer).parents("li,ol,ul").length)return criticalNotify("Indent tool is not applicable to bullet points<\/b>","","Warning"),!1;$("blockquote:empty").remove();$("span br").remove();$("bz").remove()}t==="outdent"?(r=$(getSelection().getRangeAt(0).commonAncestorContainer),$(r).parents(".textDragger").length||$(r).parents('[data-column = "column-one-layout"]').length||$(r).parents('[data-column = "column-two-layout"]').length?(i=getCurrentSelection(),(i.match(/<p/g)==null||i.match(/<p/g).length==0)&&(i=$(getSelection().getRangeAt(0).commonAncestorContainer).parents("p")[0].outerHTML),i.match(/<blockquote/g)!=null&&i.match(/<blockquote/g).length>1||$(getSelection().getRangeAt(0).commonAncestorContainer).parents("blockquote").length?this.execAction(t):$(getSelection().getRangeAt(0).commonAncestorContainer).is("blockquote")?($(getSelection().getRangeAt(0).commonAncestorContainer).after(i),$(getSelection().getRangeAt(0).commonAncestorContainer).remove()):($(getSelection().getRangeAt(0).commonAncestorContainer).parents("blockquote").first().after(i),$(getSelection().getRangeAt(0).commonAncestorContainer).parents("blockquote").first().remove())):this.execAction(t)):this.execAction(t)}},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass"));delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass"));delete this.knownState},queryCommandState:function(){var n=null;return this.useQueryState&&(n=this.base.queryCommandState(this.getAction())),n},isAlreadyApplied:function(n){var t=!1,i=this.getTagNames(),r,u;return this.knownState===!1||this.knownState===!0?this.knownState:(i&&i.length>0&&(t=i.indexOf(n.nodeName.toLowerCase())!==-1),!t&&this.style&&(r=this.style.value.split("|"),u=this.window.getComputedStyle(n,null).getPropertyValue(this.style.prop),r.forEach(function(n){this.knownState||(t=u.indexOf(n)!==-1,(t||this.style.prop!=="text-decoration")&&(this.knownState=t))},this)),t)}});t.isBuiltInButton=function(t){return typeof t=="string"&&n.extensions.button.prototype.defaults.hasOwnProperty(t)};n.extensions.button=t}(),function(){n.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B<\/b>",contentFA:'<i class="fa fa-bold"><\/i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I<\/i><\/b>",contentFA:'<i class="fa fa-italic"><\/i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U<\/u><\/b>",contentFA:'<i class="fa fa-underline"><\/i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A<\/s>",contentFA:'<i class="fa fa-strikethrough" title="strikethrough"><\/i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1<\/sup><\/b>",contentFA:'<i class="fa fa-superscript"><\/i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1<\/sub><\/b>",contentFA:'<i class="fa fa-subscript"><\/i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image<\/b>",contentFA:'<i class="fa fa-picture-o"><\/i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.<\/b>",contentFA:'<i class="fa fa-list-ol"><\/i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;<\/b>",contentFA:'<i class="fa fa-list-ul"><\/i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;<\/b>",contentFA:'<i class="fa fa-indent"><\/i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;<\/b>",contentFA:'<i class="fa fa-outdent"><\/i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C<\/b>",contentFA:'<i class="fa fa-align-center"><\/i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J<\/b>",contentFA:'<i class="fa fa-align-justify"><\/i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L<\/b>",contentFA:'<i class="fa fa-align-left"><\/i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R<\/b>",contentFA:'<i class="fa fa-align-right"><\/i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X<\/b>",contentFA:'<i class="fa fa-eraser"><\/i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101<\/b>",contentFA:'<i class="fa fa-code fa-lg"><\/i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1<\/b>",contentFA:'<i class="fa fa-header"><sup>1<\/sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2<\/b>",contentFA:'<i class="fa fa-header"><sup>2<\/sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3<\/b>",contentFA:'<i class="fa fa-header"><sup>3<\/sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4<\/b>",contentFA:'<i class="fa fa-header"><sup>4<\/sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5<\/b>",contentFA:'<i class="fa fa-header"><sup>5<\/sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6<\/b>",contentFA:'<i class="fa fa-header"><sup>6<\/sup>'}}}(),function(){var t=n.extensions.button.extend({init:function(){n.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var n=this.base.getExtensionByName("toolbar");n&&n.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var n=this.base.getExtensionByName("toolbar");n&&n.hideToolbarDefaultActions()},setToolbarPosition:function(){var n=this.base.getExtensionByName("toolbar");n&&n.setToolbarPosition()}});n.extensions.form=t}(),function(){var t=n.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#<\/b>",contentFA:'<i class="fa fa-link"><\/i>',init:function(){n.extensions.form.prototype.init.apply(this,arguments);this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(t){t.preventDefault();t.stopPropagation();var i=n.selection.getSelectionRange(this.document);return i.startContainer.nodeName.toLowerCase()==="a"||i.endContainer.nodeName.toLowerCase()==="a"||n.util.getClosestTag(n.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){n.util.isKey(t,n.util.keyCode.K)&&n.util.isMetaCtrlKey(t)&&!t.shiftKey&&this.handleClick(t)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var n=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return n.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"><\/i>':this.formSaveLabel,"<\/a>"),n.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"><\/i>':this.formCloseLabel,"<\/a>"),this.targetCheckbox&&n.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"<\/label>","<\/div>"),this.customClassOption&&n.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"<\/label>","<\/div>"),n.join("")},isDisplayed:function(){return n.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){n.extensions.form.prototype.hideForm.apply(this);this.getInput().value=""},showForm:function(t){var i=this.getInput(),r=this.getAnchorTargetCheckbox(),u=this.getAnchorButtonCheckbox(),f;t=t||{value:""};typeof t=="string"&&(t={value:t});this.base.saveSelection();this.hideToolbarDefaultActions();n.extensions.form.prototype.showForm.apply(this);this.setToolbarPosition();i.value=t.value;i.focus();r&&(r.checked=t.target==="_blank");u&&(f=t.buttonClass?t.buttonClass.split(" "):[],u.checked=f.indexOf(this.customClassOption)!==-1)},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form);delete this.form},getFormOpts:function(){var t=this.getAnchorTargetCheckbox(),i=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",t&&t.checked&&(n.target="_blank"),i&&i.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var n=this.getFormOpts();this.completeFormSave(n)},completeFormSave:function(n){this.base.restoreSelection();this.execAction(this.action,n);this.base.checkSelection()},checkLinkFormat:function(n){return/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/.test(n)?"tel:"+n:(/^([a-z]+:)?\/\/|^(mailto|tel|maps):/i.test(n)?"":"http://")+encodeURI(n)},doFormCancel:function(){this.base.restoreSelection();this.base.checkSelection()},attachFormEvents:function(n){var t=n.querySelector(".medium-editor-toolbar-close"),i=n.querySelector(".medium-editor-toolbar-save"),r=n.querySelector(".medium-editor-toolbar-input");this.on(n,"click",this.handleFormClick.bind(this));this.on(r,"keyup",this.handleTextboxKeyup.bind(this));this.on(t,"click",this.handleCloseClick.bind(this));this.on(i,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var t=this.document,n=t.createElement("div");return n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),n.innerHTML=this.getTemplate(),this.attachFormEvents(n),n},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(t){if(t.keyCode===n.util.keyCode.ENTER){t.preventDefault();this.doFormSave();return}t.keyCode===n.util.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel())},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault();this.doFormSave()},handleCloseClick:function(n){n.preventDefault();this.doFormCancel()}});n.extensions.anchor=t}(),function(){var t=n.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,init:function(){this.anchorPreview=this.createPreview();this.getEditorOption("elementsContainer").appendChild(this.anchorPreview);this.attachToEditables()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var n=this.document.createElement("div");n.id="medium-editor-anchor-preview-"+this.getEditorId();n.className="medium-editor-anchor-preview";n.innerHTML=this.getTemplate();this.on(n,"click",this.handleClick.bind(this));return n},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"><\/a><\/div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active");this.activeAnchor=null},showPreview:function(n){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||n.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=n.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=n.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=n,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(n){var i;n=n||this.activeAnchor;var s=this.anchorPreview.offsetHeight,r=n.getBoundingClientRect(),u=(r.left+r.right)/2,e=this.diffLeft,o=this.diffTop,t,f;t=this.anchorPreview.offsetWidth/2;i=this.base.getExtensionByName("toolbar");i&&(e=i.diffLeft,o=i.diffTop);f=e-t;this.anchorPreview.style.top=Math.round(s+r.bottom-o+this.window.pageYOffset-this.anchorPreview.offsetHeight)+"px";this.anchorPreview.style.right="initial";u<t?(this.anchorPreview.style.left=f+t+"px",this.anchorPreview.style.right="initial"):this.window.innerWidth-u<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=f+u+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this));this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(n){var i=this.base.getExtensionByName("anchor"),t=this.activeAnchor;i&&t&&(n.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(t){var n={url:t.attributes.href.value,target:t.getAttribute("target"),buttonClass:t.getAttribute("class")};i.showForm(n);t=null}}.bind(this)));this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null;this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout);this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var i=n.util.getClosestTag(t.target,"a"),r;if(!1!==i){if(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML)||(r=this.base.getExtensionByName("toolbar"),!this.showWhenToolbarIsVisible&&r&&r.isDisplayed&&r.isDisplayed()))return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers();this.anchorToPreview=i;this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this);this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout);this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime();this.hovering=!0},handlePreviewMouseout:function(n){n.relatedTarget&&/anchor-preview/.test(n.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var n=(new Date).getTime()-this.lastOver;n>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer);this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)));this.hidePreview();this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime();this.hovering=!0;this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this);this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this);this.intervalTimer=setInterval(this.updatePreview.bind(this),200);this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover);this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout);this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover);this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});n.extensions.anchorPreview=t}(),function(){function e(t){return!n.util.getClosestTag(t,"a")}var i,t,r,u,f;i=[" ","\t","\n","\r","","","","","","\u2028","\u2029"];t="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw";r="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+t+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+t+"))";u=new RegExp("^("+t+")$","i");f=n.Extension.extend({init:function(){n.Extension.prototype.init.apply(this,arguments);this.disableEventHandling=!1;this.subscribe("editableKeypress",this.onKeypress.bind(this));this.subscribe("editableBlur",this.onBlur.bind(this));this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var t,i=0,n=0;n<this.window._mediumEditors.length;n++)t=this.window._mediumEditors[n],t!==null&&t.getExtensionByName("autoLink")!==undefined&&i++;return i===1},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(n,t){this.performLinking(t)},onKeypress:function(t){this.disableEventHandling||n.util.isKey(t,[n.util.keyCode.SPACE,n.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var n=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(n,!0)}catch(i){window.console&&window.console.error("Failed to perform linking",i);this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(t){var i=n.util.splitByBlockElements(t),r=!1,u;for(i.length===0&&(i=[t]),u=0;u<i.length;u++)r=this.removeObsoleteAutoLinkSpans(i[u])||r,r=this.performLinkingWithinElement(i[u])||r;return this.base.events.updateInput(t,{target:t,currentTarget:t}),r},removeObsoleteAutoLinkSpans:function(t){var r,f,i,u,o,s,h;if(!t||t.nodeType===3)return!1;for(r=t.querySelectorAll('span[data-auto-link="true"]'),f=!1,i=0;i<r.length;i++)u=r[i].textContent,u.indexOf("://")===-1&&(u=n.util.ensureUrlHasProtocol(u)),r[i].getAttribute("data-href")!==u&&e(r[i])&&(f=!0,o=u.replace(/\s+$/,""),r[i].getAttribute("data-href")===o?(s=u.length-o.length,h=n.util.splitOffDOMTree(r[i],this.splitTextBeforeEnd(r[i],s)),r[i].parentNode.insertBefore(h,r[i].nextSibling)):n.util.unwrap(r[i],this.document));return f},splitTextBeforeEnd:function(n,t){for(var u=this.document.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,!1),e=!0,f,i,r;e;)e=u.lastChild()!==null;while(t>0&&r!==null)f=u.currentNode,i=f.nodeValue,i.length>t?(r=f.splitText(i.length-t),t=0):(r=u.previousNode(),t-=i.length);return r},performLinkingWithinElement:function(t){for(var u,r=this.findLinkableText(t),i=0;i<r.length;i++)(u=n.util.findOrCreateMatchingTextNodes(this.document,t,r[i]),this.shouldNotLink(u))||this.createAutoLink(u,r[i].href);return!1},shouldNotLink:function(t){for(var i=!1,r=0;r<t.length&&i===!1;r++)i=!!n.util.traverseUp(t[r],function(n){return n.nodeName.toLowerCase()==="a"||n.getAttribute&&n.getAttribute("data-auto-link")==="true"});return i},findLinkableText:function(n){for(var h=new RegExp(r,"gi"),e=n.textContent,t=null,s=[],f,o;(t=h.exec(e))!==null;)f=!0,o=t.index+t[0].length,f=(t.index===0||i.indexOf(e[t.index-1])!==-1)&&(o===e.length||i.indexOf(e[o])!==-1),f=f&&(t[0].indexOf("/")!==-1||u.test(t[0].split(".").pop().split("?").shift())),f&&s.push({href:t[0],start:t.index,end:o});return s},createAutoLink:function(t,i){i=n.util.ensureUrlHasProtocol(i);var r=n.util.createLink(this.document,t,i,this.getEditorOption("targetBlank")?"_blank":null),u=this.document.createElement("span");for(u.setAttribute("data-auto-link","true"),u.setAttribute("data-href",i),r.insertBefore(u,r.firstChild);r.childNodes.length>1;)u.appendChild(r.childNodes[1])}});n.extensions.autoLink=f}(),function(){function i(i){var r=n.util.getContainerEditorElement(i),u=Array.prototype.slice.call(r.parentElement.querySelectorAll("."+t));u.forEach(function(n){n.classList.remove(t)})}var t="medium-editor-dragover",r=n.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){n.Extension.prototype.init.apply(this,arguments);this.subscribe("editableDrag",this.handleDrag.bind(this));this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(n){n.preventDefault();n.dataTransfer.dropEffect="copy";var r=n.target.classList?n.target:n.target.parentElement;i(r);n.type==="dragover"&&r.classList.add(t)},handleDrop:function(n){n.preventDefault();n.stopPropagation();this.base.selectElement(n.target);var t=this.base.exportSelection();t.start=t.end;this.base.importSelection(t);n.dataTransfer.files&&Array.prototype.slice.call(n.dataTransfer.files).forEach(function(n){this.isAllowedFile(n)&&n.type.match("image")&&this.insertImageFile(n)},this);i(n.target)},isAllowedFile:function(n){return this.allowedTypes.some(function(t){return!!n.type.match(t)})},insertImageFile:function(t){if(typeof FileReader=="function"){var i=new FileReader;i.readAsDataURL(t);i.addEventListener("load",function(t){var i=this.document.createElement("img");i.src=t.target.result;n.util.insertHTMLCommand(this.document,i.outerHTML)}.bind(this))}}});n.extensions.fileDragging=r}(),function(){var t=n.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){n.Extension.prototype.init.apply(this,arguments);this.subscribe("editableKeydown",this.handleKeydown.bind(this));this.keys={};this.commands.forEach(function(n){var t=n.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]);this.keys[t].push(n)},this)},handleKeydown:function(t){var i=n.util.getKeyCode(t);if(this.keys[i]){var r=n.util.isMetaCtrlKey(t),u=!!t.shiftKey,f=!!t.altKey;this.keys[i].forEach(function(n){n.meta===r&&n.shift===u&&(n.alt===f||undefined===n.alt)&&(t.preventDefault(),t.stopPropagation(),typeof n.command=="function"?n.command.apply(this):!1!==n.command&&this.execAction(n.command))},this)}}});n.extensions.keyboardCommands=t}(),function(){var t=n.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"><\/i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){n.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(n){if(n.preventDefault(),n.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontName")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none";this.getSelect().value=""},showForm:function(n){var t=this.getSelect();this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display="block";this.setToolbarPosition();t.value=n||"";t.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form);delete this.form},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection();this.clearFontName();this.base.checkSelection()},createForm:function(){var t=this.document,n=t.createElement("div"),f=t.createElement("select"),i=t.createElement("a"),r=t.createElement("a"),e,u;n.className="medium-editor-toolbar-form";n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId();this.on(n,"click",this.handleFormClick.bind(this));for(u=0;u<this.fonts.length;u++)e=t.createElement("option"),e.innerHTML=this.fonts[u],e.value=this.fonts[u],f.appendChild(e);f.className="medium-editor-toolbar-select";n.appendChild(f);this.on(f,"change",this.handleFontChange.bind(this));r.setAttribute("href","#");r.className="medium-editor-toobar-save";r.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"><\/i>':"&#10003;";n.appendChild(r);this.on(r,"click",this.handleSaveClick.bind(this),!0);i.setAttribute("href","#");i.className="medium-editor-toobar-close";i.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"><\/i>':"&times;";n.appendChild(i);this.on(i,"click",this.handleCloseClick.bind(this));return n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){n.selection.getSelectedElements(this.document).forEach(function(n){n.nodeName.toLowerCase()==="font"&&n.hasAttribute("face")&&n.removeAttribute("face")})},handleFontChange:function(){var n=this.getSelect().value;n===""?this.clearFontName():this.execAction("fontName",{value:n})},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault();this.doFormSave()},handleCloseClick:function(n){n.preventDefault();this.doFormCancel()}});n.extensions.fontName=t}(),function(){var t=n.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"><\/i>',init:function(){n.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(n){if(n.preventDefault(),n.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none";this.getInput().value=""},showForm:function(n){var t=this.getInput();this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display="block";this.setToolbarPosition();t.value=n||"";t.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form);delete this.form},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection();this.clearFontSize();this.base.checkSelection()},createForm:function(){var u=this.document,n=u.createElement("div"),t=u.createElement("input"),i=u.createElement("a"),r=u.createElement("a");n.className="medium-editor-toolbar-form";n.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId();this.on(n,"click",this.handleFormClick.bind(this));t.setAttribute("type","range");t.setAttribute("min","1");t.setAttribute("max","7");t.className="medium-editor-toolbar-input";n.appendChild(t);this.on(t,"change",this.handleSliderChange.bind(this));r.setAttribute("href","#");r.className="medium-editor-toobar-save";r.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"><\/i>':"&#10003;";n.appendChild(r);this.on(r,"click",this.handleSaveClick.bind(this),!0);i.setAttribute("href","#");i.className="medium-editor-toobar-close";i.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"><\/i>':"&times;";n.appendChild(i);this.on(i,"click",this.handleCloseClick.bind(this));return n},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){n.selection.getSelectedElements(this.document).forEach(function(n){n.nodeName.toLowerCase()==="font"&&n.hasAttribute("size")&&n.removeAttribute("size")})},handleSliderChange:function(){var n=this.getInput().value;n==="4"?this.clearFontSize():this.execAction("fontSize",{value:n})},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault();this.doFormSave()},handleCloseClick:function(n){n.preventDefault();this.doFormCancel()}});n.extensions.fontSize=t}(),function(){function e(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"<\/p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function f(n,t,i){var r=n.clipboardData||t.clipboardData||i.dataTransfer,u={},f,e,o;if(!r)return u;if(r.getData&&(f=r.getData("Text"),f&&f.length>0&&(u["text/plain"]=f)),r.types)for(e=0;e<r.types.length;e++)o=r.types[e],u[o]=r.getData(o);return u}var u="%ME_PASTEBIN%",i=null,r=null,t=function(n){n.stopPropagation()},o=n.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],init:function(){n.Extension.prototype.init.apply(this,arguments);(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editablePaste",this.handlePaste.bind(this)),this.subscribe("editableKeydown",this.handleKeydown.bind(this)))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(n,t){if(!n.defaultPrevented){var u=f(n,this.window,this.document),i=u["text/html"],r=u["text/plain"];this.window.clipboardData&&n.clipboardData===undefined&&!i&&(i=r);(i||r)&&(n.preventDefault(),this.doPaste(i,r,t))}},doPaste:function(t,i,r){var u,e="",f;if(this.cleanPastedHTML&&t)return this.cleanPaste(t);if(this.getEditorOption("disableReturn")||r&&r.getAttribute("data-disable-return"))e=n.util.htmlEntities(i);else if(u=i.split(/[\r\n]+/g),u.length>1)for(f=0;f<u.length;f+=1)u[f]!==""&&(e+="<p>"+n.util.htmlEntities(u[f])+"<\/p>");else e=n.util.htmlEntities(u[0]);n.util.insertHTMLCommand(this.document,e)},handlePasteBinPaste:function(n){if(n.defaultPrevented){this.removePasteBin();return}var i=f(n,this.window,this.document),t=i["text/html"],u=i["text/plain"],e=r;if(!this.cleanPastedHTML||t){n.preventDefault();this.removePasteBin();this.doPaste(t,u,e);return}setTimeout(function(){this.cleanPastedHTML&&(t=this.getPasteBinHtml());this.removePasteBin();this.doPaste(t,u,e)}.bind(this),0)},handleKeydown:function(t,i){n.util.isKey(t,n.util.keyCode.V)&&n.util.isMetaCtrlKey(t)&&(t.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(i))},createPasteBin:function(f){var s,o=n.selection.getSelectionRange(this.document),h=this.window.pageYOffset,e;r=f;o&&(s=o.getClientRects(),h+=s.length?s[0].top:o.startContainer.getBoundingClientRect().top);i=o;e=this.document.createElement("div");e.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now();e.setAttribute("style","border: 1px red solid; position: absolute; top: "+h+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0");e.setAttribute("contentEditable",!0);e.innerHTML=u;this.document.body.appendChild(e);this.on(e,"focus",t);this.on(e,"focusin",t);this.on(e,"focusout",t);e.focus();n.selection.selectNode(e,this.document);this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this));this.on(e,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==i&&(n.selection.selectRange(this.document,i),i=null);null!==r&&(r=null);var u=this.getPasteBin();u&&u&&(this.off(u,"focus",t),this.off(u,"focusin",t),this.off(u,"focusout",t),this.off(u,"paste",this.boundHandlePaste),u.parentElement.removeChild(u))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var n=this.getPasteBin(),t;return n?n.firstChild&&n.firstChild.id==="mcepastebin"?!1:(t=n.innerHTML,!t||t===u)?!1:t:!1},cleanPaste:function(n){for(var u,r,i,o=/<p|<br|<div/.test(n),f=[].concat(this.preCleanReplacements||[],e(),this.cleanReplacements||[]),t=0;t<f.length;t+=1)n=n.replace(f[t][0],f[t][1]);if(!o)return this.pasteHTML(n);for(r=this.document.createElement("div"),r.innerHTML="<p>"+n.split("<br><br>").join("<\/p><p>")+"<\/p>",u=r.querySelectorAll("a,p,div,br"),t=0;t<u.length;t+=1){i=u[t];i.innerHTML=i.innerHTML.replace(/\n/gi," ");switch(i.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(i);break;case"br":this.filterLineBreak(i)}}this.pasteHTML(r.innerHTML)},pasteHTML:function(t,i){i=n.util.defaults({},i,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags});var e,r,f,u,o=this.document.createDocumentFragment();for(o.appendChild(this.document.createElement("body")),u=o.querySelector("body"),u.innerHTML=t,this.cleanupSpans(u),e=u.querySelectorAll("*"),f=0;f<e.length;f+=1)r=e[f],"a"===r.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&n.util.setTargetBlank(r),n.util.cleanupAttrs(r,i.cleanAttrs),n.util.cleanupTags(r,i.cleanTags);n.util.insertHTMLCommand(this.document,u.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(n){return n&&(n.nodeName.toLowerCase()==="p"||n.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(n){/^\s*$/.test(n.textContent)&&n.parentNode&&n.parentNode.removeChild(n)},filterLineBreak:function(n){this.isCommonBlock(n.previousElementSibling)?this.removeWithParent(n):this.isCommonBlock(n.parentNode)&&(n.parentNode.firstChild===n||n.parentNode.lastChild===n)?this.removeWithParent(n):n.parentNode&&n.parentNode.childElementCount===1&&n.parentNode.textContent===""&&this.removeWithParent(n)},removeWithParent:function(n){n&&n.parentNode&&(n.parentNode.parentNode&&n.parentNode.childElementCount===1?n.parentNode.parentNode.removeChild(n.parentNode):n.parentNode.removeChild(n))},cleanupSpans:function(t){for(var i,f,u=t.querySelectorAll(".replace-with"),e=function(n){return n&&n.nodeName!=="#text"&&n.getAttribute("contenteditable")==="false"},r=0;r<u.length;r+=1)i=u[r],f=this.document.createElement(i.classList.contains("bold")?"b":"i"),f.innerHTML=i.classList.contains("bold")&&i.classList.contains("italic")?"<i>"+i.innerHTML+"<\/i>":i.innerHTML,i.parentNode.replaceChild(f,i);for(u=t.querySelectorAll("span"),r=0;r<u.length;r+=1){if(i=u[r],n.util.traverseUp(i,e))return!1;n.util.unwrap(i,this.document)}}});n.extensions.paste=o}(),function(){var t=n.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){n.Extension.prototype.init.apply(this,arguments);this.initPlaceholders();this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(function(n){n.getAttribute("data-placeholder")||n.setAttribute("data-placeholder",this.text);this.updatePlaceholder(n)},this)},destroy:function(){this.getEditorElements().forEach(function(n){n.getAttribute("data-placeholder")===this.text&&n.removeAttribute("data-placeholder")},this)},showPlaceholder:function(n){n&&n.classList.add("medium-editor-placeholder")},hidePlaceholder:function(n){n&&n.classList.remove("medium-editor-placeholder")},updatePlaceholder:function(n,t){if(n.querySelector("img, blockquote, ul, ol")||n.textContent.replace(/^\s+|\s+$/g,"")!=="")return this.hidePlaceholder(n);t||this.showPlaceholder(n)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this));this.subscribe("editableInput",this.handleInput.bind(this));this.subscribe("blur",this.handleBlur.bind(this))},handleInput:function(n,t){var i=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,i)},handleFocus:function(n,t){this.hidePlaceholder(t)},handleBlur:function(n,t){this.updatePlaceholder(t)}});n.extensions.placeholder=t}(),function(){var t=n.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,"static":!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){n.Extension.prototype.init.apply(this,arguments);this.initThrottledMethods();this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(n,t){return this.base.extensions.forEach(function(i){if(i!==this)return n.apply(t||this,arguments)},this)},createToolbar:function(){var n=this.document.createElement("div");return n.id="medium-editor-toolbar-"+this.getEditorId(),n.className="medium-editor-toolbar",n.className+=this.static?" static-toolbar":this.relativeContainer?" medium-editor-relative-toolbar":" medium-editor-stalker-toolbar",n.appendChild(this.createToolbarButtons()),this.forEachExtension(function(t){t.hasForm&&n.appendChild(t.getForm())}),this.attachEventHandlers(),n},createToolbarButtons:function(){var t=this.document.createElement("ul"),r,u,i,f,e,o;return t.id="medium-editor-toolbar-actions"+this.getEditorId(),t.className="medium-editor-toolbar-actions",t.style.display="block",this.buttons.forEach(function(i){typeof i=="string"?(e=i,o=null):(e=i.name,o=i);f=this.base.addBuiltInExtension(e,o);f&&typeof f.getButton=="function"&&(u=f.getButton(this.base),r=this.document.createElement("li"),n.util.isElement(u)?r.appendChild(u):r.innerHTML=u,t.appendChild(r))},this),i=t.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),t},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=n.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this));this.subscribe("focus",this.handleFocus.bind(this));this.subscribe("editableClick",this.handleEditableClick.bind(this));this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this));this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this));if(this.static&&this.sticky)this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0);this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){if(t&&t.target&&n.util.isDescendant(this.getToolbarElement(),t.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout);clearTimeout(this.delayShowTimeout);this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout);this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms();this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block");this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(n){n.hasForm&&n.isDisplayed()&&n.hideForm()})},multipleBlockElementsSelected:function(){var i=new RegExp("<("+n.util.blockContainerElementNames.join("|")+")[^>]*>","g"),r=n.selection.getSelectionHtml(this.document).replace(/<[^\/>][^>]*><\/[^>]+>/gim,""),t=r.match(i);return!!t&&t.length>1},modifySelection:function(){var u=this.window.getSelection(),t=u.getRangeAt(0),r,i;if(this.standardizeSelectionStart&&t.startContainer.nodeValue&&t.startOffset===t.startContainer.nodeValue.length&&(r=n.util.findAdjacentTextNodeWithContent(n.selection.getSelectionElement(this.window),t.startContainer,this.document),r)){for(i=0;r.nodeValue.substr(i,1).trim().length===0;)i=i+1;t=n.selection.select(this.document,r,i,t.endContainer,t.endOffset)}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||n.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var t=n.selection.getSelectionElement(this.window);if(!t||this.getEditorElements().indexOf(t)===-1||t.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!n.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection();this.setToolbarButtonStates();this.trigger("positionToolbar",{},this.base.getFocusedElement());this.showToolbarDefaultActions();this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(n){typeof n.isActive=="function"&&typeof n.setInactive=="function"&&n.setInactive()});this.checkActiveButtons()},checkActiveButtons:function(){var r=[],i=null,u=n.selection.getSelectionRange(this.document),t,f=function(n){typeof n.checkState=="function"?n.checkState(t):typeof n.isActive=="function"&&typeof n.isAlreadyApplied=="function"&&typeof n.setActive=="function"&&!n.isActive()&&n.isAlreadyApplied(t)&&n.setActive()};if(u&&(this.forEachExtension(function(n){if(typeof n.queryCommandState=="function"&&(i=n.queryCommandState(),i!==null)){i&&typeof n.setActive=="function"&&n.setActive();return}r.push(n)}),t=n.selection.getSelectedParentElement(u),this.getEditorElements().some(function(i){return n.util.isDescendant(i,t,!0)})))while(t){if(r.forEach(f),n.util.isMediumEditorElement(t))break;t=t.parentNode}},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var n=this.base.getFocusedElement(),t=this.window.getSelection();if(!n)return this;(this.static||!t.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(n):this.positionToolbar(t)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(n){this.getToolbarElement().style.left="0";var o=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,s=this.window.innerWidth,t=this.getToolbarElement(),r=n.getBoundingClientRect(),u=r.top+o,h=r.left+r.width/2,f=t.offsetHeight,e=t.offsetWidth,c=e/2,i;this.sticky?o>u+n.offsetHeight-f-this.stickyTopOffset?(t.style.top=u+n.offsetHeight-f+"px",t.classList.remove("medium-editor-sticky-toolbar")):o>u-f-this.stickyTopOffset?(t.classList.add("medium-editor-sticky-toolbar"),t.style.top=this.stickyTopOffset+"px"):(t.classList.remove("medium-editor-sticky-toolbar"),t.style.top=u-f+"px"):t.style.top=u-f+"px";switch(this.align){case"left":i=r.left;break;case"right":i=r.right-e;break;case"center":i=h-c}i<0?i=0:i+e>s&&(i=s-Math.ceil(e)-1);t.style.left=i+"px"},positionToolbar:function(n){var r,i;this.getToolbarElement().style.left="0";this.getToolbarElement().style.right="initial";r=n.getRangeAt(0);i=r.getBoundingClientRect();i&&(i.height!==0||i.width!==0||r.startContainer!==r.endContainer)||(i=r.startContainer.nodeType===1&&r.startContainer.querySelector("img")?r.startContainer.querySelector("img").getBoundingClientRect():r.startContainer.getBoundingClientRect());var h=this.window.innerWidth,f=(i.left+i.right)/2,t=this.getToolbarElement(),e=t.offsetHeight,c=t.offsetWidth,u=c/2,o=50,s=this.diffLeft-u;i.top<o?(t.classList.add("medium-toolbar-arrow-over"),t.classList.remove("medium-toolbar-arrow-under"),t.style.top=o+i.bottom-this.diffTop+this.window.pageYOffset-e+"px"):(t.classList.add("medium-toolbar-arrow-under"),t.classList.remove("medium-toolbar-arrow-over"),t.style.top=i.top+this.diffTop+this.window.pageYOffset-e+"px");f<u?(t.style.left=s+u+"px",t.style.right="initial"):h-f<u?(t.style.left="auto",t.style.right=0):(t.style.left=s+f+"px",t.style.right="initial")}});n.extensions.toolbar=t}(),function(){var t=n.Extension.extend({init:function(){n.Extension.prototype.init.apply(this,arguments);this.subscribe("editableDrag",this.handleDrag.bind(this));this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(n){var t="medium-editor-dragover";n.preventDefault();n.dataTransfer.dropEffect="copy";n.type==="dragover"?n.target.classList.add(t):n.type==="dragleave"&&n.target.classList.remove(t)},handleDrop:function(t){var i;t.preventDefault();t.stopPropagation();t.dataTransfer.files&&(i=Array.prototype.slice.call(t.dataTransfer.files,0),i.some(function(t){if(t.type.match("image")){var i,r;i=new FileReader;i.readAsDataURL(t);r="medium-img-"+ +new Date;n.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+r+'" />');i.onload=function(){var n=this.document.getElementById(r);n&&(n.removeAttribute("id"),n.removeAttribute("class"),n.src=i.result)}.bind(this)}}.bind(this)));t.target.classList.remove("medium-editor-dragover")}});n.extensions.imageDragging=t}(),function(){function s(t){var u=n.selection.getSelectionStart(this.options.ownerDocument),i=u.textContent,r=n.selection.getCaretOffsets(u);(i[r.left-1]===undefined||i[r.left-1].trim()===""||i[r.left]!==undefined&&i[r.left].trim()==="")&&t.preventDefault()}function i(t,i){if(this.options.disableReturn||i.getAttribute("data-disable-return"))t.preventDefault();else if(this.options.disableDoubleReturn||i.getAttribute("data-disable-double-return")){var r=n.selection.getSelectionStart(this.options.ownerDocument);(r&&r.textContent.trim()===""&&r.nodeName.toLowerCase()!=="li"||r.previousElementSibling&&r.previousElementSibling.nodeName.toLowerCase()!=="br"&&r.previousElementSibling.textContent.trim()==="")&&t.preventDefault()}}function h(t){var i=n.selection.getSelectionStart(this.options.ownerDocument),r=i&&i.nodeName.toLowerCase();r==="pre"&&(t.preventDefault(),n.util.insertHTMLCommand(this.options.ownerDocument,"    "));n.util.isListItem(i)&&(t.preventDefault(),t.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function r(t){var r,i=n.selection.getSelectionStart(this.options.ownerDocument),u=i.nodeName.toLowerCase(),f=/^(\s+|<br\/?>)?$/i,e=/h\d/i;n.util.isKey(t,[n.util.keyCode.BACKSPACE,n.util.keyCode.ENTER])&&i.previousElementSibling&&e.test(u)&&n.selection.getCaretOffsets(i).left===0?n.util.isKey(t,n.util.keyCode.BACKSPACE)&&f.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),t.preventDefault()):!this.options.disableDoubleReturn&&n.util.isKey(t,n.util.keyCode.ENTER)&&(r=this.options.ownerDocument.createElement("p"),r.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(r,i),t.preventDefault()):n.util.isKey(t,n.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!e.test(u)&&f.test(i.innerHTML)&&e.test(i.nextElementSibling.nodeName.toLowerCase())?(n.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),t.preventDefault()):n.util.isKey(t,n.util.keyCode.BACKSPACE)&&u==="li"&&f.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&i.nextElementSibling.nodeName.toLowerCase()==="li"?(r=this.options.ownerDocument.createElement("p"),r.innerHTML="<br>",i.parentElement.parentElement.insertBefore(r,i.parentElement),n.selection.moveCursor(this.options.ownerDocument,r),i.parentElement.removeChild(i),t.preventDefault()):n.util.isKey(t,n.util.keyCode.BACKSPACE)&&n.util.getClosestTag(i,"blockquote")!==!1&&n.selection.getCaretOffsets(i).left===0&&(t.preventDefault(),n.util.execFormatBlock(this.options.ownerDocument,"p"))}function c(t){var i=n.selection.getSelectionStart(this.options.ownerDocument),r;i&&(n.util.isMediumEditorElement(i)&&i.children.length===0&&!n.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!n.util.isKey(t,n.util.keyCode.ENTER)||n.util.isListItem(i)||n.util.isBlockContainer(i)||(r=i.nodeName.toLowerCase(),r==="a"?this.options.ownerDocument.execCommand("unlink",!1,null):t.shiftKey||t.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function l(n,t){var i=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');i&&(i.value=t.innerHTML.trim())}function a(n){n._mediumEditors||(n._mediumEditors=[null]);this.id||(this.id=n._mediumEditors.length);n._mediumEditors[this.id]=this}function v(n){n._mediumEditors&&n._mediumEditors[this.id]&&(n._mediumEditors[this.id]=null)}function u(t,i,r){var e=[],f,u;if(t||(t=[]),typeof t=="string"&&(t=i.querySelectorAll(t)),n.util.isElement(t)&&(t=[t]),r)for(f=0;f<t.length;f++)u=t[f],!n.util.isElement(u)||u.getAttribute("data-medium-editor-element")||u.getAttribute("medium-editor-textarea-id")||e.push(u);else e=Array.prototype.slice.apply(t);return e}function f(n){var t=n.parentNode.querySelector('textarea[medium-editor-textarea-id="'+n.getAttribute("medium-editor-textarea-id")+'"]');t&&(t.classList.remove("medium-editor-hidden"),t.removeAttribute("medium-editor-textarea-id"));n.parentNode&&n.parentNode.removeChild(n)}function y(n,t){return Object.keys(t).forEach(function(i){n[i]===undefined&&(n[i]=t[i])}),n}function t(n,t,i){var r={window:i.options.contentWindow,document:i.options.ownerDocument,base:i};return n=y(n,r),typeof n.init=="function"&&n.init(),n.name||(n.name=t),n}function e(){return this.elements.every(function(n){return!!n.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function p(){return e.call(this)?this.options.anchorPreview!==!1:!1}function w(){return this.options.placeholder!==!1}function b(){return this.options.autoLink!==!1}function k(){return this.options.imageDragging!==!1}function d(){return this.options.keyboardCommands!==!1}function g(){return!this.options.extensions.imageDragging}function nt(n,t,i){for(var r=i.createElement("div"),o=Date.now(),f="medium-editor-"+o+"-"+t,e=n.attributes,u,s;i.getElementById(f);)o++,f="medium-editor-"+o+"-"+t;for(r.className=n.className,r.id=f,r.innerHTML=n.value,n.setAttribute("medium-editor-textarea-id",f),u=0,s=e.length;u<s;u++)r.hasAttribute(e[u].nodeName)||r.setAttribute(e[u].nodeName,e[u].nodeValue);return n.classList.add("medium-editor-hidden"),n.parentNode.insertBefore(r,n),r}function tt(t,r){if(!t.getAttribute("data-medium-editor-element")){if(t.nodeName.toLowerCase()==="textarea"&&(t=nt(t,r,this.options.ownerDocument),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=l.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||t.getAttribute("data-disable-editing")||(t.setAttribute("contentEditable",!0),t.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(t.getAttribute("data-disable-return")||t.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=i.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),!this.options.disableReturn&&!t.getAttribute("data-disable-return"))this.on(t,"keyup",c.bind(this));t.setAttribute("data-medium-editor-element",!0);t.setAttribute("role","textbox");t.setAttribute("aria-multiline",!0);t.setAttribute("medium-editor-index",n.util.guid());this.events.attachAllEventsToElement(t)}return t}function it(){this.subscribe("editableKeydownTab",h.bind(this));this.subscribe("editableKeydownDelete",r.bind(this));this.subscribe("editableKeydownEnter",r.bind(this));this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",s.bind(this));this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=i.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function rt(){var i,u,r,f;this.extensions=[];Object.keys(this.options.extensions).forEach(function(n){n!=="toolbar"&&this.options.extensions[n]&&this.extensions.push(t(this.options.extensions[n],n,this))},this);g.call(this)&&(i=this.options.fileDragging,i||(i={},k.call(this)||(i.allowedTypes=[])),this.addBuiltInExtension("fileDragging",i));u={paste:!0,"anchor-preview":p.call(this),autoLink:b.call(this),keyboardCommands:d.call(this),placeholder:w.call(this)};Object.keys(u).forEach(function(n){u[n]&&this.addBuiltInExtension(n)},this);r=this.options.extensions.toolbar;!r&&e.call(this)&&(f=n.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection}),r=new n.extensions.toolbar(f));r&&this.extensions.push(t(r,"toolbar",this))}function ut(t,i){return i&&[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]].forEach(function(t){i.hasOwnProperty(t[0])&&i[t[0]]!==undefined&&n.util.deprecated(t[0],t[1],"v6.0.0")}),n.util.defaults({},i,t)}function o(t,i){var f,r,e,o,u;if(f=/^append-(.+)$/gi.exec(t),f)return n.util.execFormatBlock(this.options.ownerDocument,f[1]);if(t==="fontSize")return i.size&&n.util.deprecated(".size option for fontSize command",".value","6.0.0"),r=i.value||i.size,this.options.ownerDocument.execCommand("fontSize",!1,r);if(t==="fontName")return i.name&&n.util.deprecated(".name option for fontName command",".value","6.0.0"),r=i.value||i.name,this.options.ownerDocument.execCommand("fontName",!1,r);if(t==="createLink")return this.createLink(i);if(t==="image")return e=this.options.contentWindow.getSelection().toString().trim(),this.options.ownerDocument.execCommand("insertImage",!1,e);if(/justify([A-Za-z]*)$/g.exec(t))if(o=this.options.ownerDocument.execCommand(t,!1,null),u=n.selection.getSelectedParentElement(n.selection.getSelectionRange(this.options.ownerDocument)),console.log(n.selection.getSelectionRange(this.options.ownerDocument).startOffset),n.selection.getSelectionRange(this.options.ownerDocument).startOffset>0)u&&u.firstChild=="text"&&ft.call(this,n.util.getTopBlockContainer(u));else return o;return r=i&&i.value,this.options.ownerDocument.execCommand(t,!1,r)}function ft(t){if(t){var i,r=Array.prototype.slice.call(t.childNodes).filter(function(n){var t=n.nodeName.toLowerCase()==="div";return t&&!i&&(i=n.style.textAlign),t});r.length&&(this.saveSelection(),r.forEach(function(t){var r,u;t.style.textAlign===i&&(r=t.lastChild,r&&(n.util.unwrap(t,this.options.ownerDocument),u=this.options.ownerDocument.createElement("BR"),r.parentNode.insertBefore(u,r.nextSibling)))},this),t.style.textAlign=i,this.restoreSelection())}}n.prototype={init:function(n,t){return this.options=ut.call(this,this.defaults,t),this.origElements=n,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(this.events=new n.Events(this),this.elements=[],this.addElements(this.origElements),this.elements.length!==0)&&(this.isActive=!0,a.call(this,this.options.contentWindow),rt.call(this),it.call(this))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(n){typeof n.destroy=="function"&&n.destroy()},this),this.events.destroy(),this.elements.forEach(function(n){this.options.spellcheck&&(n.innerHTML=n.innerHTML);n.removeAttribute("contentEditable");n.removeAttribute("spellcheck");n.removeAttribute("data-medium-editor-element");n.removeAttribute("role");n.removeAttribute("aria-multiline");n.removeAttribute("medium-editor-index");n.getAttribute("medium-editor-textarea-id")&&f(n)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,v.call(this,this.options.contentWindow))},on:function(n,t,i,r){return this.events.attachDOMEvent(n,t,i,r),this},off:function(n,t,i,r){return this.events.detachDOMEvent(n,t,i,r),this},subscribe:function(n,t){return this.events.attachCustomEvent(n,t),this},unsubscribe:function(n,t){return this.events.detachCustomEvent(n,t),this},trigger:function(n,t,i){return this.events.triggerCustomEvent(n,t,i),this},delay:function(n){var t=this;return setTimeout(function(){t.isActive&&n()},this.options.delay)},serialize:function(){for(var t,i={},r=this.elements.length,n=0;n<r;n+=1)t=this.elements[n].id!==""?this.elements[n].id:"element-"+n,i[t]={value:this.elements[n].innerHTML.trim()};return i},getExtensionByName:function(n){var t;return this.extensions&&this.extensions.length&&this.extensions.some(function(i){return i.name===n?(t=i,!0):!1}),t},addBuiltInExtension:function(i,r){var u=this.getExtensionByName(i),f;if(u)return u;switch(i){case"anchor":f=n.util.extend({},this.options.anchor,r);u=new n.extensions.anchor(f);break;case"anchor-preview":u=new n.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":u=new n.extensions.autoLink;break;case"fileDragging":u=new n.extensions.fileDragging(r);break;case"fontname":u=new n.extensions.fontName(this.options.fontName);break;case"fontsize":u=new n.extensions.fontSize(r);break;case"keyboardCommands":u=new n.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":u=new n.extensions.paste(this.options.paste);break;case"placeholder":u=new n.extensions.placeholder(this.options.placeholder);break;default:n.extensions.button.isBuiltInButton(i)&&(r?(f=n.util.defaults({},r,n.extensions.button.prototype.defaults[i]),u=new n.extensions.button(f)):u=new n.extensions.button(i))}return u&&this.extensions.push(t(u,i,this)),u},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var n=this.getExtensionByName("toolbar");return n&&n.checkState(),this},queryCommandState:function(n){var t,i=null;t=/^full-(.+)$/gi.exec(n);t&&(n=t[1]);try{i=this.options.ownerDocument.queryCommandState(n)}catch(r){i=null}return i},execAction:function(t,i){var r,u;return r=/^full-(.+)$/gi.exec(t),r?(this.saveSelection(),this.selectAllContents(),u=o.call(this,r[1],i),this.restoreSelection()):u=o.call(this,t,i),(t==="insertunorderedlist"||t==="insertorderedlist")&&n.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),u},getSelectedParentElement:function(t){return t===undefined&&(t=this.options.contentWindow.getSelection().getRangeAt(0)),n.selection.getSelectedParentElement(t)},selectAllContents:function(){var t=n.selection.getSelectionElement(this.options.contentWindow);if(t){while(t.children.length===1)t=t.children[0];this.selectElement(t)}},selectElement:function(t){n.selection.selectNode(t,this.options.ownerDocument);var i=n.selection.getSelectionElement(this.options.contentWindow);i&&this.events.focusElement(i)},getFocusedElement:function(){var n;return this.elements.some(function(t){return!n&&t.getAttribute("data-medium-focused")&&(n=t),!!n},this),n},exportSelection:function(){var r=n.selection.getSelectionElement(this.options.contentWindow),i=this.elements.indexOf(r),t=null;return i>=0&&(t=n.selection.exportSelection(r,this.options.ownerDocument)),t!==null&&i!==0&&(t.editableElementIndex=i),t},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(t,i){if(t){var r=this.elements[t.editableElementIndex||0];n.selection.importSelection(t,r,this.options.ownerDocument,i)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(t){var s=n.selection.getSelectionElement(this.options.contentWindow),h={},f,a,r,o,e,v,w,c,i,u,y,p,l,b;if(this.elements.indexOf(s)!==-1){try{if(this.events.disableCustomEvent("editableInput"),t.url&&n.util.deprecated(".url option for createLink",".value","6.0.0"),f=t.url||t.value,f&&f.trim().length>0&&(a=this.options.contentWindow.getSelection(),a&&(r=a.getRangeAt(0),o=r.commonAncestorContainer,r.endContainer.nodeType===3&&r.startContainer.nodeType!==3&&r.startOffset===0&&r.startContainer.firstChild===r.endContainer&&(o=r.endContainer),v=n.util.getClosestBlockContainer(r.startContainer),w=n.util.getClosestBlockContainer(r.endContainer),o.nodeType!==3&&o.textContent.length!==0&&v===w?(i=v||s,u=this.options.ownerDocument.createDocumentFragment(),this.execAction("unlink"),e=this.exportSelection(),u.appendChild(i.cloneNode(!0)),s===i?n.selection.select(this.options.ownerDocument,i.firstChild,0,i.lastChild,i.lastChild.nodeType===3?i.lastChild.nodeValue.length:i.lastChild.childNodes.length):n.selection.select(this.options.ownerDocument,i,0,i,i.childNodes.length),y=this.exportSelection(),c=n.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,u,{start:e.start-y.start,end:e.end-y.start,editableElementIndex:e.editableElementIndex}),c.length===0&&(u=this.options.ownerDocument.createDocumentFragment(),u.appendChild(o.cloneNode(!0)),c=[u.firstChild.firstChild,u.firstChild.lastChild]),n.util.createLink(this.options.ownerDocument,c,f.trim()),p=(u.firstChild.innerHTML.match(/^\s+/)||[""])[0].length,n.util.insertHTMLCommand(this.options.ownerDocument,u.firstChild.innerHTML.replace(/^\s+/,"")),e.start-=p,e.end-=p,this.importSelection(e)):this.options.ownerDocument.execCommand("createLink",!1,f),this.options.targetBlank||t.target==="_blank"?n.util.setTargetBlank(n.selection.getSelectionStart(this.options.ownerDocument),f):n.util.removeTargetBlank(n.selection.getSelectionStart(this.options.ownerDocument),f),t.buttonClass&&n.util.addClassToAnchors(n.selection.getSelectionStart(this.options.ownerDocument),t.buttonClass))),this.options.targetBlank||t.target==="_blank"||t.buttonClass)for(h=this.options.ownerDocument.createEvent("HTMLEvents"),h.initEvent("input",!0,!0,this.options.contentWindow),l=0,b=this.elements.length;l<b;l+=1)this.elements[l].dispatchEvent(h)}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",h,s)}},cleanPaste:function(n){this.getExtensionByName("paste").cleanPaste(n)},pasteHTML:function(n,t){this.getExtensionByName("paste").pasteHTML(n,t)},setContent:function(n,t){if(t=t||0,this.elements[t]){var i=this.elements[t];i.innerHTML=n;this.checkContentChanged(i)}},checkContentChanged:function(t){t=t||n.selection.getSelectionElement(this.options.contentWindow);this.events.updateInput(t,{target:t,currentTarget:t})},addElements:function(n){var t=u(n,this.options.ownerDocument,!0);if(t.length===0)return!1;t.forEach(function(n){n=tt.call(this,n);this.elements.push(n)},this)},removeElements:function(n){var t=u(n,this.options.ownerDocument),i=t.map(function(n){return n.getAttribute("medium-editor-textarea-id")&&n.parentNode?n.parentNode.querySelector('div[medium-editor-textarea-id="'+n.getAttribute("medium-editor-textarea-id")+'"]'):n});this.elements=this.elements.filter(function(n){return i.indexOf(n)!==-1?(this.events.cleanupElement(n),n.getAttribute("medium-editor-textarea-id")&&f(n),!1):!0},this)}}}(),function(){n.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),n.parseVersionString=function(n){var i=n.split("-"),t=i[0].split("."),r=i.length>1?i[1]:"";return{major:parseInt(t[0],10),minor:parseInt(t[1],10),revision:parseInt(t[2],10),preRelease:r,toString:function(){return[t[0],t[1],t[2]].join(".")+(r?"-"+r:"")}}},n.version=n.parseVersionString.call(this,{version:"5.18.0"}.version),n}());!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Handlebars=t():n.Handlebars=t()}(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){"use strict";function o(){var n=new s.HandlebarsEnvironment;return e.extend(n,s),n.SafeString=a["default"],n.Exception=y["default"],n.Utils=e,n.escapeExpression=e.escapeExpression,n.VM=h,n.template=function(t){return h.template(t,n)},n}var u=i(1)["default"],f=i(2)["default"];t.__esModule=!0;var c=i(3),s=u(c),l=i(17),a=f(l),v=i(5),y=f(v),p=i(4),e=u(p),w=i(18),h=u(w),b=i(19),k=f(b),r=o();r.create=o;k["default"](r);r["default"]=r;t["default"]=r;n.exports=t["default"]},function(n,t){"use strict";t["default"]=function(n){var t,i;if(n&&n.__esModule)return n;if(t={},null!=n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t["default"]=n,t};t.__esModule=!0},function(n,t){"use strict";t["default"]=function(n){return n&&n.__esModule?n:{"default":n}};t.__esModule=!0},function(n,t,i){"use strict";function e(n,t,i){this.helpers=n||{};this.partials=t||{};this.decorators=i||{};v.registerDefaultHelpers(this);y.registerDefaultDecorators(this)}var s=i(2)["default"],h,c,f,l;t.__esModule=!0;t.HandlebarsEnvironment=e;var r=i(4),a=i(5),o=s(a),v=i(6),y=i(14),p=i(16),u=s(p);t.VERSION="4.0.5";h=7;t.COMPILER_REVISION=h;c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=c;f="[object Object]";e.prototype={constructor:e,logger:u["default"],log:u["default"].log,registerHelper:function(n,t){if(r.toString.call(n)===f){if(t)throw new o["default"]("Arg not supported with multiple helpers");r.extend(this.helpers,n)}else this.helpers[n]=t},unregisterHelper:function(n){delete this.helpers[n]},registerPartial:function(n,t){if(r.toString.call(n)===f)r.extend(this.partials,n);else{if("undefined"==typeof t)throw new o["default"]('Attempting to register a partial called "'+n+'" as undefined');this.partials[n]=t}},unregisterPartial:function(n){delete this.partials[n]},registerDecorator:function(n,t){if(r.toString.call(n)===f){if(t)throw new o["default"]("Arg not supported with multiple decorators");r.extend(this.decorators,n)}else this.decorators[n]=t},unregisterDecorator:function(n){delete this.decorators[n]}};l=u["default"].log;t.log=l;t.createFrame=r.createFrame;t.logger=u["default"]},function(n,t){"use strict";function e(n){return v[n]}function f(n){for(var i,t=1;t<arguments.length;t++)for(i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(n[i]=arguments[t][i]);return n}function o(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1}function s(n){if("string"!=typeof n){if(n&&n.toHTML)return n.toHTML();if(null==n)return"";if(!n)return n+"";n=""+n}return p.test(n)?n.replace(y,e):n}function h(n){return n||0===n?u(n)&&0===n.length?!0:!1:!0}function c(n){var t=f({},n);return t._parent=n,t}function l(n,t){return n.path=t,n}function a(n,t){return(n?n+".":"")+t}var i,u;t.__esModule=!0;t.extend=f;t.indexOf=o;t.escapeExpression=s;t.isEmpty=h;t.createFrame=c;t.blockParams=l;t.appendContextPath=a;var v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},y=/[&<>"'`=]/g,p=/[&<>"'`=]/,r=Object.prototype.toString;t.toString=r;i=function(n){return"function"==typeof n};i(/x/)&&(t.isFunction=i=function(n){return"function"==typeof n&&"[object Function]"===r.call(n)});t.isFunction=i;u=Array.isArray||function(n){return n&&"object"==typeof n?"[object Array]"===r.call(n):!1};t.isArray=u},function(n,t){"use strict";function i(n,t){var f=t&&t.loc,e=void 0,o=void 0,s,u;for(f&&(e=f.start.line,o=f.start.column,n+=" - "+e+":"+o),s=Error.prototype.constructor.call(this,n),u=0;u<r.length;u++)this[r[u]]=s[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,i);f&&(this.lineNumber=e,this.column=o)}t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error;t["default"]=i;n.exports=t["default"]},function(n,t,i){"use strict";function u(n){e["default"](n);s["default"](n);c["default"](n);a["default"](n);y["default"](n);w["default"](n);k["default"](n)}var r=i(2)["default"];t.__esModule=!0;t.registerDefaultHelpers=u;var f=i(7),e=r(f),o=i(8),s=r(o),h=i(9),c=r(h),l=i(10),a=r(l),v=i(11),y=r(v),p=i(12),w=r(p),b=i(13),k=r(b)},function(n,t,i){"use strict";t.__esModule=!0;var r=i(4);t["default"]=function(n){n.registerHelper("blockHelperMissing",function(t,i){var f=i.inverse,e=i.fn,u;return t===!0?e(this):t===!1||null==t?f(this):r.isArray(t)?t.length>0?(i.ids&&(i.ids=[i.name]),n.helpers.each(t,i)):f(this):(i.data&&i.ids&&(u=r.createFrame(i.data),u.contextPath=r.appendContextPath(i.data.contextPath,i.name),i={data:u}),e(t,i))})};n.exports=t["default"]},function(n,t,i){"use strict";var u=i(2)["default"];t.__esModule=!0;var r=i(4),f=i(5),e=u(f);t["default"]=function(n){n.registerHelper("each",function(n,t){function s(t,i,f){u&&(u.key=t,u.index=i,u.first=0===i,u.last=!!f,o&&(u.contextPath=o+t));h+=a(n[t],{data:u,blockParams:r.blockParams([n[t],t],[o+t,null])})}var l,f,c;if(!t)throw new e["default"]("Must pass iterator to #each");var a=t.fn,v=t.inverse,i=0,h="",u=void 0,o=void 0;if(t.data&&t.ids&&(o=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(n)&&(n=n.call(this)),t.data&&(u=r.createFrame(t.data)),n&&"object"==typeof n)if(r.isArray(n))for(l=n.length;l>i;i++)i in n&&s(i,i,i===n.length-1);else{f=void 0;for(c in n)n.hasOwnProperty(c)&&(void 0!==f&&s(f,i-1),f=c,i++);void 0!==f&&s(f,i-1,!0)}return 0===i&&(h=v(this)),h})};n.exports=t["default"]},function(n,t,i){"use strict";var f=i(2)["default"],r,u;t.__esModule=!0;r=i(5);u=f(r);t["default"]=function(n){n.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new u["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"');})};n.exports=t["default"]},function(n,t,i){"use strict";t.__esModule=!0;var r=i(4);t["default"]=function(n){n.registerHelper("if",function(n,t){return r.isFunction(n)&&(n=n.call(this)),!t.hash.includeZero&&!n||r.isEmpty(n)?t.inverse(this):t.fn(this)});n.registerHelper("unless",function(t,i){return n.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})})};n.exports=t["default"]},function(n,t){"use strict";t.__esModule=!0;t["default"]=function(n){n.registerHelper("log",function(){for(var i,r=[void 0],t=arguments[arguments.length-1],u=0;u<arguments.length-1;u++)r.push(arguments[u]);i=1;null!=t.hash.level?i=t.hash.level:t.data&&null!=t.data.level&&(i=t.data.level);r[0]=i;n.log.apply(n,r)})};n.exports=t["default"]},function(n,t){"use strict";t.__esModule=!0;t["default"]=function(n){n.registerHelper("lookup",function(n,t){return n&&n[t]})};n.exports=t["default"]},function(n,t,i){"use strict";t.__esModule=!0;var r=i(4);t["default"]=function(n){n.registerHelper("with",function(n,t){var u,i;return(r.isFunction(n)&&(n=n.call(this)),u=t.fn,r.isEmpty(n))?t.inverse(this):(i=t.data,t.data&&t.ids&&(i=r.createFrame(t.data),i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),u(n,{data:i,blockParams:r.blockParams([n],[i&&i.contextPath])}))})};n.exports=t["default"]},function(n,t,i){"use strict";function f(n){u["default"](n)}var e=i(2)["default"],r,u;t.__esModule=!0;t.registerDefaultDecorators=f;r=i(15);u=e(r)},function(n,t,i){"use strict";t.__esModule=!0;var r=i(4);t["default"]=function(n){n.registerDecorator("inline",function(n,t,i,u){var f=n;return t.partials||(t.partials={},f=function(u,f){var e=i.partials,o;return i.partials=r.extend({},e,t.partials),o=n(u,f),i.partials=e,o}),t.partials[u.args[0]]=u.fn,f})};n.exports=t["default"]},function(n,t,i){"use strict";t.__esModule=!0;var u=i(4),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(n){if("string"==typeof n){var t=u.indexOf(r.methodMap,n.toLowerCase());n=t>=0?t:parseInt(n,10)}return n},log:function(n){var t;if(n=r.lookupLevel(n),"undefined"!=typeof console&&r.lookupLevel(r.level)<=n){t=r.methodMap[n];console[t]||(t="log");for(var u=arguments.length,f=Array(u>1?u-1:0),i=1;u>i;i++)f[i-1]=arguments[i];console[t].apply(console,f)}}};t["default"]=r;n.exports=t["default"]},function(n,t){"use strict";function i(n){this.string=n}t.__esModule=!0;i.prototype.toString=i.prototype.toHTML=function(){return""+this.string};t["default"]=i;n.exports=t["default"]},function(n,t,i){"use strict";function h(n){var t=n&&n[0]||1,i=f.COMPILER_REVISION,u,e;if(t!==i){if(i>t){u=f.REVISION_CHANGES[i];e=f.REVISION_CHANGES[t];throw new r["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+u+") or downgrade your runtime to an older version ("+e+").");}throw new r["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+").");}}function c(n,t){function o(i,f,e){var o;if(e.hash&&(f=u.extend({},f,e.hash),e.ids&&(e.ids[0]=!0)),i=t.VM.resolvePartial.call(this,i,f,e),o=t.VM.invokePartial.call(this,i,f,e),null==o&&t.compile&&(e.partials[e.name]=t.compile(i,n.compilerOptions,t),o=e.partials[e.name](f,e)),null!=o){if(e.indent){for(var h=o.split("\n"),s=0,c=h.length;c>s&&(h[s]||s+1!==c);s++)h[s]=e.indent+h[s];o=h.join("\n")}return o}throw new r["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode");}function f(t){function h(t){return""+n.main(i,t,i.helpers,i.partials,u,o,e)}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],u=r.data,e,o;return f._setup(r),!r.partial&&n.useData&&(u=v(t,u)),e=void 0,o=n.useBlockParams?[]:void 0,n.useDepths&&(e=r.depths?t!==r.depths[0]?[t].concat(r.depths):r.depths:[t]),(h=s(n.main,h,i,r.depths||[],u,o))(t,r)}if(!t)throw new r["default"]("No environment passed to template");if(!n||!n.main)throw new r["default"]("Unknown template object: "+typeof n);n.main.decorator=n.main_d;t.VM.checkRevision(n.compiler);var i={strict:function(n,t){if(!(t in n))throw new r["default"]('"'+t+'" not defined in '+n);return n[t]},lookup:function(n,t){for(var r=n.length,i=0;r>i;i++)if(n[i]&&null!=n[i][t])return n[i][t]},lambda:function(n,t){return"function"==typeof n?n.call(t):n},escapeExpression:u.escapeExpression,invokePartial:o,fn:function(t){var i=n[t];return i.decorator=n[t+"_d"],i},programs:[],program:function(n,t,i,r,u){var f=this.programs[n],o=this.fn(n);return t||u||r||i?f=e(this,n,o,t,i,r,u):f||(f=this.programs[n]=e(this,n,o)),f},data:function(n,t){for(;n&&t--;)n=n._parent;return n},merge:function(n,t){var i=n||t;return n&&t&&n!==t&&(i=u.extend({},t,n)),i},noop:t.VM.noop,compilerInfo:n.compiler};return f.isTop=!0,f._setup=function(r){r.partial?(i.helpers=r.helpers,i.partials=r.partials,i.decorators=r.decorators):(i.helpers=i.merge(r.helpers,t.helpers),n.usePartial&&(i.partials=i.merge(r.partials,t.partials)),(n.usePartial||n.useDecorators)&&(i.decorators=i.merge(r.decorators,t.decorators)))},f._child=function(t,u,f,o){if(n.useBlockParams&&!f)throw new r["default"]("must pass block params");if(n.useDepths&&!o)throw new r["default"]("must pass parent depths");return e(i,t,n[t],u,0,f,o)},f}function e(n,t,i,r,u,f,e){function o(t){var u=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e;return e&&t!==e[0]&&(o=[t].concat(e)),i(n,t,n.helpers,n.partials,u.data||r,f&&[u.blockParams].concat(f),o)}return o=s(i,o,n,e,r,f),o.program=t,o.depth=e?e.length:0,o.blockParams=u||0,o}function l(n,t,i){return n?n.call||i.name||(i.name=n,n=i.partials[n]):n="@partial-block"===i.name?i.data["partial-block"]:i.partials[i.name],n}function a(n,t,i){i.partial=!0;i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var e=void 0;if(i.fn&&i.fn!==o&&(i.data=f.createFrame(i.data),e=i.data["partial-block"]=i.fn,e.partials&&(i.partials=u.extend({},i.partials,e.partials))),void 0===n&&e&&(n=e),void 0===n)throw new r["default"]("The partial "+i.name+" could not be found");if(n instanceof Function)return n(t,i)}function o(){return""}function v(n,t){return t&&"root"in t||(t=t?f.createFrame(t):{},t.root=n),t}function s(n,t,i,r,f,e){if(n.decorator){var o={};t=n.decorator(t,o,i,r&&r[0],f,e,r);u.extend(t,o)}return t}var y=i(1)["default"],p=i(2)["default"];t.__esModule=!0;t.checkRevision=h;t.template=c;t.wrapProgram=e;t.resolvePartial=l;t.invokePartial=a;t.noop=o;var w=i(4),u=y(w),b=i(5),r=p(b),f=i(3)},function(n,t){(function(i){"use strict";t.__esModule=!0;t["default"]=function(n){var t="undefined"!=typeof i?i:window,r=t.Handlebars;n.noConflict=function(){return t.Handlebars===n&&(t.Handlebars=r),n}};n.exports=t["default"]}).call(t,function(){return this}())}])}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(window.jQuery)}(function(n){"use strict";var t=0;n.ajaxTransport("iframe",function(i){if(i.async){var e=i.initialIframeSrc||"javascript:false;",r,u,f;return{send:function(o,s){r=n('<form style="display:none;"><\/form>');r.attr("accept-charset",i.formAcceptCharset);f=/\?/.test(i.url)?"&":"?";i.type==="DELETE"?(i.url=i.url+f+"_method=DELETE",i.type="POST"):i.type==="PUT"?(i.url=i.url+f+"_method=PUT",i.type="POST"):i.type==="PATCH"&&(i.url=i.url+f+"_method=PATCH",i.type="POST");t+=1;u=n('<iframe src="'+e+'" name="iframe-transport-'+t+'"><\/iframe>').bind("load",function(){var t,f=n.isArray(i.paramName)?i.paramName:[i.paramName];u.unbind("load").bind("load",function(){var t;try{if(t=u.contents(),!t.length||!t[0].firstChild)throw new Error;}catch(i){t=undefined}s(200,"success",{iframe:t});n('<iframe src="'+e+'"><\/iframe>').appendTo(r);window.setTimeout(function(){r.remove()},0)});r.prop("target",u.prop("name")).prop("action",i.url).prop("method",i.type);i.formData&&n.each(i.formData,function(t,i){n('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(r)});i.fileInput&&i.fileInput.length&&i.type==="POST"&&(t=i.fileInput.clone(),i.fileInput.after(function(n){return t[n]}),i.paramName&&i.fileInput.each(function(t){n(this).prop("name",f[t]||i.paramName)}),r.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form"));r.submit();t&&t.length&&i.fileInput.each(function(i,r){var u=n(t[i]);n(r).prop("name",u.prop("name")).attr("form",u.attr("form"));u.replaceWith(r)})});r.append(u).appendTo(document.body)},abort:function(){u&&u.unbind("load").prop("src",e);r&&r.remove()}}}});n.ajaxSetup({converters:{"iframe text":function(t){return t&&n(t[0].body).text()},"iframe json":function(t){return t&&n.parseJSON(n(t[0].body).text())},"iframe html":function(t){return t&&n(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&n.isXMLDoc(i)?i:n.parseXML(i.XMLDocument&&i.XMLDocument.xml||n(i.body).html())},"iframe script":function(t){return t&&n.globalEval(n(t[0].body).text())}}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","jquery.ui.widget"],n):typeof exports=="object"?n(require("jquery"),require("./vendor/jquery.ui.widget")):n(window.jQuery)}(function(n){"use strict";function t(t){var i=t==="dragover";return function(r){r.dataTransfer=r.originalEvent&&r.originalEvent.dataTransfer;var u=r.dataTransfer;u&&n.inArray("Files",u.types)!==-1&&this._trigger(t,n.Event(t,{delegatedEvent:r}))!==!1&&(r.preventDefault(),i&&(u.dropEffect="copy"))}}n.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||n('<input type="file">').prop("disabled"));n.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);n.support.xhrFormDataFileUpload=!!window.FormData;n.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);n.widget("blueimp.fileupload",{options:{dropZone:n(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&n.each(i,function(n,i){t=t.replace("{"+n+"}",i)}),t},formData:function(n){return n.serializeArray()},add:function(t,i){if(t.isDefaultPrevented())return!1;(i.autoUpload||i.autoUpload!==!1&&n(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:n.support.blobSlice&&function(){var n=this.slice||this.webkitSlice||this.mozSlice;return n.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.loaded=0;this.bitrate=0;this.getBitrate=function(n,t,i){var r=n-this.timestamp;return(!this.bitrate||!i||r>i)&&(this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=n),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&n.support.xhrFileUpload||n.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return n.type(t.formData)==="function"?t.formData(t.form):n.isArray(t.formData)?t.formData:n.type(t.formData)==="object"?(i=[],n.each(t.formData,function(n,t){i.push({name:n,value:t})}),i):[]},_getTotal:function(t){var i=0;return n.each(t,function(n,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?n.extend(t._progress,i):t._progress=i},_initResponseObject:function(n){var t;if(n._response)for(t in n._response)n._response.hasOwnProperty(t)&&delete n._response[t];else n._response={}},_onProgress:function(t,i){if(t.lengthComputable){var r=Date.now?Date.now():(new Date).getTime(),u;if(i._time&&i.progressInterval&&r-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=r;u=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0);this._progress.loaded+=u-i._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,i.bitrateInterval);i._progress.loaded=i.loaded=u;i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(r,u,i.bitrateInterval);this._trigger("progress",n.Event("progress",{delegatedEvent:t}),i);this._trigger("progressall",n.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var r=this,i=t.xhr?t.xhr():n.ajaxSettings.xhr();i.upload&&(n(i.upload).bind("progress",function(n){var i=n.originalEvent;n.lengthComputable=i.lengthComputable;n.loaded=i.loaded;n.total=i.total;r._onProgress(n,t)}),t.xhr=function(){return i})},_isInstanceOf:function(n,t){return Object.prototype.toString.call(t)==="[object "+n+"]"},_initXHRData:function(t){var f=this,i,r=t.files[0],e=t.multipart||!n.support.xhrFileUpload,u=n.type(t.paramName)==="array"?t.paramName[0]:t.paramName;t.headers=n.extend({},t.headers);t.contentRange&&(t.headers["Content-Range"]=t.contentRange);e&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"');e?n.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:u,value:t.blob}):n.each(t.files,function(r,f){i.push({name:n.type(t.paramName)==="array"&&t.paramName[r]||u,value:f})})):(f._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,n.each(this._getFormData(t),function(n,t){i.append(t.name,t.value)})),t.blob?i.append(u,t.blob,r.name):n.each(t.files,function(r,e){(f._isInstanceOf("File",e)||f._isInstanceOf("Blob",e))&&i.append(n.type(t.paramName)==="array"&&t.paramName[r]||u,e,e.uploadName||e.name)})),t.data=i):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r);t.blob=null},_initIframeSettings:function(t){var i=n("<a><\/a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||"");t.formData=this._getFormData(t);t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(n){this._isXHRUpload(n)?(this._chunkedUpload(n,!0)||(n.data||this._initXHRData(n),this._initProgressListener(n)),n.postMessage&&(n.dataType="postmessage "+(n.dataType||""))):this._initIframeSettings(n)},_getParamName:function(t){var r=n(t.fileInput),i=t.paramName;return i?n.isArray(i)||(i=[i]):(i=[],r.each(function(){for(var t=n(this),u=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(u),r-=1}),i.length||(i=[r.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=n(t.fileInput.prop("form")),t.form.length||(t.form=n(this.options.fileInput.prop("form"))));t.paramName=this._getParamName(t);t.url||(t.url=t.form.prop("action")||location.href);t.type=(t.type||n.type(t.form.prop("method"))==="string"&&t.form.prop("method")||"").toUpperCase();t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH"&&(t.type="POST");t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=n.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(n){return n.state?n.state():n.isResolved()?"resolved":n.isRejected()?"rejected":"pending"},_enhancePromise:function(n){return n.success=n.done,n.error=n.fail,n.complete=n.always,n},_getXHRPromise:function(t,i,r){var u=n.Deferred(),f=u.promise();return i=i||this.options.context||f,t===!0?u.resolveWith(i,r):t===!1&&u.rejectWith(i,r),f.abort=u.promise,this._enhancePromise(f)},_addConvenienceMethods:function(t,i){var r=this,u=function(t){return n.Deferred().resolveWith(r,t).promise()};i.process=function(t,f){return(t||f)&&(i._processQueue=this._processQueue=(this._processQueue||u([this])).pipe(function(){return i.errorThrown?n.Deferred().rejectWith(r,[i]).promise():u(arguments)}).pipe(t,f)),this._processQueue||u([this])};i.submit=function(){return this.state()!=="pending"&&(i.jqXHR=this.jqXHR=r._trigger("submit",n.Event("submit",{delegatedEvent:t}),this)!==!1&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()};i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))};i.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0};i.processing=function(){return!this.jqXHR&&this._processQueue&&r._getDeferredState(this._processQueue)==="pending"};i.progress=function(){return this._progress};i.response=function(){return this._response}},_getUploadedBytes:function(n){var i=n.getResponseHeader("Range"),t=i&&i.split("-"),r=t&&t.length>1&&parseInt(t[1],10);return r&&r+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var u=this,f=t.files[0],e=f.size,r=t.uploadedBytes,c=t.maxChunkSize||e,l=this._blobSlice,o=n.Deferred(),s=o.promise(),a,h;return!(this._isXHRUpload(t)&&l&&(r||c<e))||t.data?!1:i?!0:r>=e?(f.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",f.error])):(h=function(){var i=n.extend({},t),s=i._progress.loaded;i.blob=l.call(f,r,r+c,f.type);i.chunkSize=i.blob.size;i.contentRange="bytes "+r+"-"+(r+i.chunkSize-1)+"/"+e;u._initXHRData(i);u._initProgressListener(i);a=(u._trigger("chunksend",null,i)!==!1&&n.ajax(i)||u._getXHRPromise(!1,i.context)).done(function(f,c,l){r=u._getUploadedBytes(l)||r+i.chunkSize;s+i.chunkSize-i._progress.loaded&&u._onProgress(n.Event("progress",{lengthComputable:!0,loaded:r-i.uploadedBytes,total:r-i.uploadedBytes}),i);t.uploadedBytes=i.uploadedBytes=r;i.result=f;i.textStatus=c;i.jqXHR=l;u._trigger("chunkdone",null,i);u._trigger("chunkalways",null,i);r<e?h():o.resolveWith(i.context,[f,c,l])}).fail(function(n,t,r){i.jqXHR=n;i.textStatus=t;i.errorThrown=r;u._trigger("chunkfail",null,i);u._trigger("chunkalways",null,i);o.rejectWith(i.context,[n,t,r])})},this._enhancePromise(s),s.abort=function(){return a.abort()},h(),s)},_beforeSend:function(n,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(t);this._initProgressObject(t);t._progress.loaded=t.loaded=t.uploadedBytes||0;t._progress.total=t.total=this._getTotal(t.files)||1;t._progress.bitrate=t.bitrate=0;this._active+=1;this._progress.loaded+=t.loaded;this._progress.total+=t.total},_onDone:function(t,i,r,u){var f=u._progress.total,e=u._response;u._progress.loaded<f&&this._onProgress(n.Event("progress",{lengthComputable:!0,loaded:f,total:f}),u);e.result=u.result=t;e.textStatus=u.textStatus=i;e.jqXHR=u.jqXHR=r;this._trigger("done",null,u)},_onFail:function(n,t,i,r){var u=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total);u.jqXHR=r.jqXHR=n;u.textStatus=r.textStatus=t;u.errorThrown=r.errorThrown=i;this._trigger("fail",null,r)},_onAlways:function(n,t,i,r){this._trigger("always",null,r)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var r=this,f,s,e,h,u=r._getAJAXSettings(i),o=function(){return r._sending+=1,u._bitrateTimer=new r._BitrateTimer,f=f||((s||r._trigger("send",n.Event("send",{delegatedEvent:t}),u)===!1)&&r._getXHRPromise(!1,u.context,s)||r._chunkedUpload(u)||n.ajax(u)).done(function(n,t,i){r._onDone(n,t,i,u)}).fail(function(n,t,i){r._onFail(n,t,i,u)}).always(function(n,t,i){if(r._onAlways(n,t,i,u),r._sending-=1,r._active-=1,u.limitConcurrentUploads&&u.limitConcurrentUploads>r._sending)for(var f=r._slots.shift();f;){if(r._getDeferredState(f)==="pending"){f.resolve();break}f=r._slots.shift()}r._active===0&&r._trigger("stop")})};return(this._beforeSend(t,u),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)?(this.options.limitConcurrentUploads>1?(e=n.Deferred(),this._slots.push(e),h=e.pipe(o)):(this._sequence=this._sequence.pipe(o,o),h=this._sequence),h.abort=function(){return(s=[undefined,"abort","abort"],!f)?(e&&e.rejectWith(u.context,s),o()):f.abort()},this._enhancePromise(h)):o()},_onAdd:function(t,i){var a=this,p=!0,f=n.extend({},this.options,i),u=i.files,v=u.length,o=f.limitMultiFileUploads,c=f.limitMultiFileUploadSize,b=f.limitMultiFileUploadSizeOverhead,w=0,l=this._getParamName(f),s,e,h,r,y=0;if(!v)return!1;if(c&&u[0].size===undefined&&(c=undefined),(f.singleFileUploads||o||c)&&this._isXHRUpload(f))if(f.singleFileUploads||c||!o)if(!f.singleFileUploads&&c)for(h=[],s=[],r=0;r<v;r=r+1)w+=u[r].size+b,(r+1===v||w+u[r+1].size+b>c||o&&r+1-y>=o)&&(h.push(u.slice(y,r+1)),e=l.slice(y,r+1),e.length||(e=l),s.push(e),y=r+1,w=0);else s=l;else for(h=[],s=[],r=0;r<v;r+=o)h.push(u.slice(r,r+o)),e=l.slice(r,r+o),e.length||(e=l),s.push(e);else h=[u],s=[l];return i.originalFiles=u,n.each(h||u,function(r,u){var f=n.extend({},i);return f.files=h?u:[u],f.paramName=s[r],a._initResponseObject(f),a._initProgressObject(f),a._addConvenienceMethods(t,f),p=a._trigger("add",n.Event("add",{delegatedEvent:t}),f)}),p},_replaceFileInput:function(t){var i=t.fileInput,r=i.clone(!0),u=i.is(document.activeElement);t.fileInputClone=r;n("<form><\/form>").append(r)[0].reset();i.after(r).detach();u&&r.focus();n.cleanData(i.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(n,t){return t===i[0]?r[0]:t});i[0]===this.element[0]&&(this.element=r)},_handleFileTreeEntry:function(t,i){var s=this,r=n.Deferred(),u=function(n){n&&!n.entry&&(n.entry=t);r.resolve([n])},h=function(n){s._handleFileTreeEntries(n,i+t.name+"/").done(function(n){r.resolve(n)}).fail(u)},e=function(){o.readEntries(function(n){n.length?(f=f.concat(n),e()):h(f)},u)},o,f=[];return i=i||"",t.isFile?t._file?(t._file.relativePath=i,r.resolve(t._file)):t.file(function(n){n.relativePath=i;r.resolve(n)},u):t.isDirectory?(o=t.createReader(),e()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,i){var r=this;return n.when.apply(n,n.map(t,function(n){return r._handleFileTreeEntry(n,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(n.map(i,function(n){var t;return n.webkitGetAsEntry?(t=n.webkitGetAsEntry(),t&&(t._file=n.getAsFile()),t):n.getAsEntry()})):n.Deferred().resolve(n.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=n(t);var r=t.prop("webkitEntries")||t.prop("entries"),i,u;if(r&&r.length)return this._handleFileTreeEntries(r);if(i=n.makeArray(t.prop("files")),i.length)i[0].name===undefined&&i[0].fileName&&n.each(i,function(n,t){t.name=t.fileName;t.size=t.fileSize});else{if(u=t.prop("value"),!u)return n.Deferred().resolve([]).promise();i=[{name:u.replace(/^.*\\/,"")}]}return n.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return!(t instanceof n)||t.length===1?this._getSingleFileInputFiles(t):n.when.apply(n,n.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(t){var r=this,i={fileInput:n(t.target),form:n(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(u){i.files=u;r.options.replaceFileInput&&r._replaceFileInput(i);r._trigger("change",n.Event("change",{delegatedEvent:t}),i)!==!1&&r._onAdd(t,i)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};i&&i.length&&(n.each(i,function(n,t){var i=t.getAsFile&&t.getAsFile();i&&r.files.push(i)}),this._trigger("paste",n.Event("paste",{delegatedEvent:t}),r)!==!1&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var u=this,i=t.dataTransfer,r={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i;u._trigger("drop",n.Event("drop",{delegatedEvent:t}),r)!==!1&&u._onAdd(t,r)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));n.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(t,i){var r=n.inArray(t,this._specialOptions)!==-1;r&&this._destroyEventHandlers();this._super(t,i);r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof n||(t.fileInput=n(t.fileInput));t.dropZone instanceof n||(t.dropZone=n(t.dropZone));t.pasteZone instanceof n||(t.pasteZone=n(t.pasteZone))},_getRegExp:function(n){var t=n.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return t!=="url"&&n.type(i)==="string"&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,r=this.element.data();n.each(this.element[0].attributes,function(n,u){var f=u.name.toLowerCase(),e;/^data-/.test(f)&&(f=f.slice(5).replace(/-[a-z]/g,function(n){return n.charAt(1).toUpperCase()}),e=r[f],t._isRegExpOption(f,e)&&(e=t._getRegExp(e)),i[f]=e)})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(n){t.files=n;i._onAdd(null,t)}):(t.files=n.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var e=this,i=n.Deferred(),u=i.promise(),r,f;return u.abort=function(){return(f=!0,r)?r.abort():(i.reject(null,"abort","abort"),u)},this._getFileInputFiles(t.fileInput).always(function(n){if(!f){if(!n.length){i.reject();return}t.files=n;r=e._onSend(null,t);r.then(function(n,t,r){i.resolve(n,t,r)},function(n,t,r){i.reject(n,t,r)})}}),this._enhancePromise(u)}if(t.files=n.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(n){typeof define=="function"&&define.amd?define(["jquery","handlebars/runtime","medium-editor","blueimp-file-upload","jquery-sortable"],n):typeof module=="object"&&module.exports?module.exports=function(t){if(typeof window=="undefined")throw new Error("medium-editor-insert-plugin runs only in a browser.");return t===undefined&&(t=require("jquery")),window.jQuery=t,Handlebars=require("handlebars/runtime"),MediumEditor=require("medium-editor"),require("jquery-sortable"),require("blueimp-file-upload"),n(t,Handlebars,MediumEditor),t}:n(jQuery,Handlebars,MediumEditor)}(function(n,t,i){this.MediumInsert=this.MediumInsert||{};this.MediumInsert.Templates=this.MediumInsert.Templates||{};this.MediumInsert.Templates["src/js/templates/core-buttons.hbs"]=t.template({"1":function(n,t,i,r,u){var e,f,o=t!=null?t:{},s=i.helperMissing,h="function";return'            <li><a data-addon="'+n.escapeExpression((f=(f=i.key||u&&u.key)!=null?f:s,typeof f===h?f.call(o,{name:"key",hash:{},data:u}):f))+'" data-action="add" class="medium-insert-action">'+((e=(f=(f=i.label||(t!=null?t.label:t))!=null?f:s,typeof f===h?f.call(o,{name:"label",hash:{},data:u}):f))!=null?e:"")+"<\/a><\/li>\n"},compiler:[7,">= 4.0.0"],main:function(){return""},useData:!0});this.MediumInsert.Templates["src/js/templates/core-caption.hbs"]=t.template({compiler:[7,">= 4.0.0"],main:function(n,t,i,r,u){var f;return'<figcaption contenteditable="true" class="medium-insert-caption-placeholder" data-placeholder="'+n.escapeExpression((f=(f=i.placeholder||(t!=null?t.placeholder:t))!=null?f:i.helperMissing,typeof f=="function"?f.call(t!=null?t:{},{name:"placeholder",hash:{},data:u}):f))+'"><\/figcaption>'},useData:!0});this.MediumInsert.Templates["src/js/templates/core-empty-line.hbs"]=t.template({compiler:[7,">= 4.0.0"],main:function(){return"<p><br><\/p>\n"},useData:!0});this.MediumInsert.Templates["src/js/templates/embeds-toolbar.hbs"]=t.template({"1":function(n,t,i,r,u){var f;return'    <div class="medium-insert-embeds-toolbar medium-editor-toolbar medium-toolbar-arrow-under medium-editor-toolbar-active">\n        <ul class="medium-editor-toolbar-actions clearfix">\n'+((f=i.each.call(t!=null?t:{},t!=null?t.styles:t,{name:"each",hash:{},fn:n.program(2,u,0),inverse:n.noop,data:u}))!=null?f:"")+"        <\/ul>\n    <\/div>\n"},"2":function(n,t,i,r,u){var f;return(f=i["if"].call(t!=null?t:{},t!=null?t.label:t,{name:"if",hash:{},fn:n.program(3,u,0),inverse:n.noop,data:u}))!=null?f:""},"3":function(n,t,i,r,u){var e,f,o=t!=null?t:{},s=i.helperMissing,h="function";return'                    <li>\n                        <button class="medium-editor-action" data-action="'+n.escapeExpression((f=(f=i.key||u&&u.key)!=null?f:s,typeof f===h?f.call(o,{name:"key",hash:{},data:u}):f))+'">'+((e=(f=(f=i.label||(t!=null?t.label:t))!=null?f:s,typeof f===h?f.call(o,{name:"label",hash:{},data:u}):f))!=null?e:"")+"<\/button>\n                    <\/li>\n"},"5":function(n,t,i,r,u){var f;return'    <div class="medium-insert-embeds-toolbar2 medium-editor-toolbar medium-editor-toolbar-active">\n        <ul class="medium-editor-toolbar-actions clearfix">\n'+((f=i.each.call(t!=null?t:{},t!=null?t.actions:t,{name:"each",hash:{},fn:n.program(2,u,0),inverse:n.noop,data:u}))!=null?f:"")+"        <\/ul>\n    <\/div>\n"},compiler:[7,">= 4.0.0"],main:function(n,t,i,r,u){var f,e=t!=null?t:{};return((f=i["if"].call(e,t!=null?t.styles:t,{name:"if",hash:{},fn:n.program(1,u,0),inverse:n.noop,data:u}))!=null?f:"")+"\n"+((f=i["if"].call(e,t!=null?t.actions:t,{name:"if",hash:{},fn:n.program(5,u,0),inverse:n.noop,data:u}))!=null?f:"")},useData:!0});this.MediumInsert.Templates["src/js/templates/embeds-wrapper.hbs"]=t.template({compiler:[7,">= 4.0.0"],main:function(n,t,i,r,u){var e,f;return'<div class="medium-insert-embeds" contenteditable="false">\n\t<figure>\n\t\t<div class="medium-insert-embed">\n\t\t\t'+((e=(f=(f=i.html||(t!=null?t.html:t))!=null?f:i.helperMissing,typeof f=="function"?f.call(t!=null?t:{},{name:"html",hash:{},data:u}):f))!=null?e:"")+'\n\t\t<\/div>\n\t<\/figure>\n\t<div class="medium-insert-embeds-overlay"><\/div>\n<\/div>'},useData:!0});this.MediumInsert.Templates["src/js/templates/images-fileupload.hbs"]=t.template({compiler:[7,">= 4.0.0"],main:function(){return'<input type="file" multiple>'},useData:!0});this.MediumInsert.Templates["src/js/templates/images-image.hbs"]=t.template({"1":function(){return'        <div class="medium-insert-images-progress"><\/div>\n'},compiler:[7,">= 4.0.0"],main:function(n,t,i,r,u){var e,f,o=t!=null?t:{};return'<figure contenteditable="false">\n    <img src="'+n.escapeExpression((f=(f=i.img||(t!=null?t.img:t))!=null?f:i.helperMissing,typeof f=="function"?f.call(o,{name:"img",hash:{},data:u}):f))+'" alt="" />\n'+((e=i["if"].call(o,t!=null?t.progress:t,{name:"if",hash:{},fn:n.program(1,u,0),inverse:n.noop,data:u}))!=null?e:"")+"<\/figure>\n"},useData:!0});this.MediumInsert.Templates["src/js/templates/images-progressbar.hbs"]=t.template({compiler:[7,">= 4.0.0"],main:function(){return'<progress min="0" max="100" value="0">0<\/progress>'},useData:!0});this.MediumInsert.Templates["src/js/templates/images-toolbar.hbs"]=t.template({"1":function(n,t,i,r,u){var f;return(f=i["if"].call(t!=null?t:{},t!=null?t.label:t,{name:"if",hash:{},fn:n.program(2,u,0),inverse:n.noop,data:u}))!=null?f:""},"2":function(n,t,i,r,u){var e,f,o=t!=null?t:{},s=i.helperMissing,h="function";return'                <li>\n                    <button class="medium-editor-action" data-action="'+n.escapeExpression((f=(f=i.key||u&&u.key)!=null?f:s,typeof f===h?f.call(o,{name:"key",hash:{},data:u}):f))+'">'+((e=(f=(f=i.label||(t!=null?t.label:t))!=null?f:s,typeof f===h?f.call(o,{name:"label",hash:{},data:u}):f))!=null?e:"")+"<\/button>\n                <\/li>\n"},"4":function(n,t,i,r,u){var f;return'\t<div class="medium-insert-images-toolbar2 medium-editor-toolbar medium-editor-toolbar-active">\n\t\t<ul class="medium-editor-toolbar-actions clearfix">\n'+((f=i.each.call(t!=null?t:{},t!=null?t.actions:t,{name:"each",hash:{},fn:n.program(5,u,0),inverse:n.noop,data:u}))!=null?f:"")+"    \t<\/ul>\n    <\/div>\n"},"5":function(n,t,i,r,u){var f;return(f=i["if"].call(t!=null?t:{},t!=null?t.label:t,{name:"if",hash:{},fn:n.program(6,u,0),inverse:n.noop,data:u}))!=null?f:""},"6":function(n,t,i,r,u){var e,f,o=t!=null?t:{},s=i.helperMissing,h="function";return'        \t        <li>\n        \t            <button class="medium-editor-action" data-action="'+n.escapeExpression((f=(f=i.key||u&&u.key)!=null?f:s,typeof f===h?f.call(o,{name:"key",hash:{},data:u}):f))+'">'+((e=(f=(f=i.label||(t!=null?t.label:t))!=null?f:s,typeof f===h?f.call(o,{name:"label",hash:{},data:u}):f))!=null?e:"")+"<\/button>\n        \t        <\/li>\n"},compiler:[7,">= 4.0.0"],main:function(n,t,i,r,u){var f,e=t!=null?t:{};return'<div class="medium-insert-images-toolbar medium-editor-toolbar medium-toolbar-arrow-under medium-editor-toolbar-active">\n    <ul class="medium-editor-toolbar-actions clearfix">\n'+((f=i.each.call(e,t!=null?t.styles:t,{name:"each",hash:{},fn:n.program(1,u,0),inverse:n.noop,data:u}))!=null?f:"")+"    <\/ul>\n<\/div>\n\n"+((f=i["if"].call(e,t!=null?t.actions:t,{name:"if",hash:{},fn:n.program(4,u,0),inverse:n.noop,data:u}))!=null?f:"")},useData:!0}),function(n,t,i,r){"use strict";function o(n){return n.charAt(0).toUpperCase()+n.slice(1)}function u(i,u){var o;this.el=i;this.$el=n(i);this.templates=t.MediumInsert.Templates;u&&(o=u.editor,u.editor=null);this.options=n.extend(!0,{},e,u);this.options.editor=o;this._defaults=e;this._name=f;this.options&&this.options.editor&&(this.options.editor._serialize===r&&(this.options.editor._serialize=this.options.editor.serialize),this.options.editor._destroy===r&&(this.options.editor._destroy=this.options.editor.destroy),this.options.editor._setup===r&&(this.options.editor._setup=this.options.editor.setup),this.options.editor._hideInsertButtons=this.hideButtons,this.options.editor.serialize=this.editorSerialize,this.options.editor.destroy=this.editorDestroy,this.options.editor.setup=this.editorSetup,this.options.editor.getExtensionByName("placeholder")!==r&&(this.options.editor.getExtensionByName("placeholder").updatePlaceholder=this.editorUpdatePlaceholder))}var f="mediumInsert",e={editor:null,enabled:!0,addons:{images:!0,embeds:!0}};u.prototype.init=function(){this.$el.addClass("medium-editor-insert-plugin");(typeof this.options.addons!="object"||Object.keys(this.options.addons).length===0)&&this.disable();this.initAddons();this.clean();this.events()};u.prototype.events=function(){var i=this;this.$el.on("dragover drop",function(n){n.preventDefault()}).on("keyup click",n.proxy(this,"toggleButtons")).on("selectstart mousedown",".medium-insert, .medium-insert-buttons",n.proxy(this,"disableSelection")).on("click",".medium-insert-buttons-show",n.proxy(this,"toggleAddons")).on("click",".medium-insert-action",n.proxy(this,"addonAction")).on("paste",".medium-insert-caption-placeholder",function(t){n.proxy(i,"removeCaptionPlaceholder")(n(t.target))});n(t).on("resize",n.proxy(this,"positionButtons",null))};u.prototype.getEditor=function(){return this.options.editor};u.prototype.editorSerialize=function(){var t=this._serialize();return n.each(t,function(i){var r=n("<div />").html(t[i].value);r.find(".medium-insert-buttons").remove();r.find("[data-embed-code]").each(function(){var t=n(this);t.html(t.attr("data-embed-code"))});t[i].value=r.html()}),t};u.prototype.editorDestroy=function(){n.each(this.elements,function(t,i){n(i).data("plugin_"+f)instanceof u&&n(i).data("plugin_"+f).disable()});this._destroy()};u.prototype.editorSetup=function(){this._setup();n.each(this.elements,function(t,i){n(i).data("plugin_"+f)instanceof u&&n(i).data("plugin_"+f).enable()})};u.prototype.editorUpdatePlaceholder=function(t,i){var r=n(t).children().not(".medium-insert-buttons").contents();i||r.length!==1||r[0].nodeName.toLowerCase()!=="br"?this.hidePlaceholder(t):(this.showPlaceholder(t),this.base._hideInsertButtons(n(t)))};u.prototype.triggerInput=function(){this.getEditor()&&this.getEditor().trigger("editableInput",null,this.el)};u.prototype.deselect=function(){i.getSelection().removeAllRanges()};u.prototype.disable=function(){this.options.enabled=!1;this.$el.find(".medium-insert-buttons").addClass("hide")};u.prototype.enable=function(){this.options.enabled=!0;this.$el.find(".medium-insert-buttons").removeClass("hide")};u.prototype.disableSelection=function(t){var i=n(t.target);(i.is("img")===!1||i.hasClass("medium-insert-buttons-show"))&&t.preventDefault()};u.prototype.initAddons=function(){var t=this;this.options.addons&&this.options.addons.length!==0&&n.each(this.options.addons,function(n,i){var r=f+o(n);if(i===!1){delete t.options.addons[n];return}t.$el[r](i);t.options.addons[n]=t.$el.data("plugin_"+r).options})};u.prototype.clean=function(){var u=this,t,i,r;this.options.enabled!==!1&&(this.$el.children().length===0&&this.$el.html(this.templates["src/js/templates/core-empty-line.hbs"]().trim()),r=this.$el.contents().filter(function(){return this.nodeName==="#text"&&n.trim(n(this).text())!==""||this.nodeName.toLowerCase()==="br"}),r.each(function(){n(this).wrap("<p />");u.moveCaret(n(this).parent(),n(this).text().length)}),this.addButtons(),t=this.$el.find(".medium-insert-buttons"),i=t.prev(),i.attr("class")&&i.attr("class").match(/medium\-insert(?!\-active)/)&&t.before(this.templates["src/js/templates/core-empty-line.hbs"]().trim()))};u.prototype.getButtons=function(){if(this.options.enabled!==!1)return this.templates["src/js/templates/core-buttons.hbs"]({addons:this.options.addons}).trim()};u.prototype.addButtons=function(){this.$el.find(".medium-insert-buttons").length===0&&this.$el.append(this.getButtons())};u.prototype.toggleButtons=function(i){var f=n(i.target),o=t.getSelection(),s=this,h,r,e,u;this.options.enabled!==!1&&(o&&o.rangeCount!==0?(h=o.getRangeAt(0),r=n(h.commonAncestorContainer)):r=f,r.hasClass("medium-editor-insert-plugin")&&(r=r.find("p:first")),e=r.is("p")?r:r.closest("p"),this.clean(),f.hasClass("medium-editor-placeholder")===!1&&f.closest(".medium-insert-buttons").length===0&&r.closest(".medium-insert-buttons").length===0&&(this.$el.find(".medium-insert-active").removeClass("medium-insert-active"),n.each(this.options.addons,function(n){if(f.closest(".medium-insert-"+n).length&&(r=f),r.closest(".medium-insert-"+n).length){e=r.closest(".medium-insert-"+n);u=n;return}}),e.length&&(e.text().trim()===""&&!u||u==="images")?(e.addClass("medium-insert-active"),setTimeout(function(){s.positionButtons(u);s.showButtons(u)},u?100:0)):this.hideButtons()))};u.prototype.showButtons=function(n){var t=this.$el.find(".medium-insert-buttons");t.show();t.find("li").show();n&&(t.find("li").hide(),t.find('a[data-addon="'+n+'"]').parent().show())};u.prototype.hideButtons=function(n){n=n||this.$el;n.find(".medium-insert-buttons").hide();n.find(".medium-insert-buttons-addons").hide();n.find(".medium-insert-buttons-show").removeClass("medium-insert-buttons-rotate")};u.prototype.positionButtons=function(n){var r=this.$el.find(".medium-insert-buttons"),t=this.$el.find(".medium-insert-active"),f=t.find("figure:first").length?t.find("figure:first"):t,i,u;t.length&&(i=t.position().left-parseInt(r.find(".medium-insert-buttons-addons").css("left"),10)-parseInt(r.find(".medium-insert-buttons-addons a:first").css("margin-left"),10),i=i<0?t.position().left:i,u=t.position().top+parseInt(t.css("margin-top"),10),n&&(t.position().left!==f.position().left&&(i=f.position().left),u+=t.height()+15),r.css({left:i,top:u}))};u.prototype.toggleAddons=function(){this.$el.find(".medium-insert-buttons-addons").fadeToggle();this.$el.find(".medium-insert-buttons-show").toggleClass("medium-insert-buttons-rotate")};u.prototype.hideAddons=function(){this.$el.find(".medium-insert-buttons-addons").hide();this.$el.find(".medium-insert-buttons-show").removeClass("medium-insert-buttons-rotate")};u.prototype.addonAction=function(t){var i=n(t.target).is("a")?n(t.target):n(t.target).closest("a"),r=i.data("addon"),u=i.data("action");this.$el.data("plugin_"+f+o(r))[u]()};u.prototype.moveCaret=function(n,r){var u,e,f,o;r=r||0;u=i.createRange();e=t.getSelection();f=n.get(0);f.childNodes.length||(o=i.createTextNode(" "),f.appendChild(o));u.setStart(f.childNodes[0],r);u.collapse(!0);e.removeAllRanges();e.addRange(u)};u.prototype.addCaption=function(n,t){var i=n.find("figcaption");i.length===0&&n.append(this.templates["src/js/templates/core-caption.hbs"]({placeholder:t}))};u.prototype.removeCaptions=function(t){var i=this.$el.find("figcaption");t&&(i=i.not(t));i.each(function(){(n(this).hasClass("medium-insert-caption-placeholder")||n(this).text().trim()==="")&&n(this).remove()})};u.prototype.removeCaptionPlaceholder=function(n){var t=n.is("figcaption")?n:n.find("figcaption");t.length&&t.removeClass("medium-insert-caption-placeholder").removeAttr("data-placeholder")};n.fn[f]=function(t){return this.each(function(){var i=this,r;n(i).is("textarea")&&(r=n(i).attr("medium-editor-textarea-id"),i=n(i).siblings('[medium-editor-textarea-id="'+r+'"]').get(0));n.data(i,"plugin_"+f)?typeof t=="string"&&n.data(i,"plugin_"+f)[t]&&n.data(i,"plugin_"+f)[t]():(n.data(i,"plugin_"+f,new u(i,t)),n.data(i,"plugin_"+f).init())})}}(jQuery,window,document),function(n,t,i){"use strict";function r(i,r){this.el=i;this.$el=n(i);this.templates=t.MediumInsert.Templates;this.core=this.$el.data("plugin_"+u);this.options=n.extend(!0,{},e,r);this._defaults=e;this._name=u;this.core.getEditor()&&(this.core.getEditor()._serializePreEmbeds=this.core.getEditor().serialize,this.core.getEditor().serialize=this.editorSerialize);this.init()}var u="mediumInsert",f="Embeds",e={label:'<span class="fa fa-youtube-play"><\/span>',placeholder:"Paste a YouTube, Vimeo, Facebook, Twitter or Instagram link and press Enter",oembedProxy:"http://medium.iframe.ly/api/oembed?iframe=1",captions:!0,captionPlaceholder:"Type caption (optional)",styles:{wide:{label:'<span class="fa fa-align-justify"><\/span>'},left:{label:'<span class="fa fa-align-left"><\/span>'},right:{label:'<span class="fa fa-align-right"><\/span>'}},actions:{remove:{label:'<span class="fa fa-times"><\/span>',clicked:function(){var t=n.Event("keydown");t.which=8;n(i).trigger(t)}}},parseOnPaste:!1};r.prototype.init=function(){var t=this.$el.find(".medium-insert-embeds");t.attr("contenteditable",!1);t.each(function(){n(this).find(".medium-insert-embeds-overlay").length===0&&n(this).append(n("<div />").addClass("medium-insert-embeds-overlay"))});this.events();this.backwardsCompatibility()};r.prototype.events=function(){n(i).on("click",n.proxy(this,"unselectEmbed")).on("keydown",n.proxy(this,"removeEmbed")).on("click",".medium-insert-embeds-toolbar .medium-editor-action",n.proxy(this,"toolbarAction")).on("click",".medium-insert-embeds-toolbar2 .medium-editor-action",n.proxy(this,"toolbar2Action"));this.$el.on("keyup click paste",n.proxy(this,"togglePlaceholder")).on("keydown",n.proxy(this,"processLink")).on("click",".medium-insert-embeds-overlay",n.proxy(this,"selectEmbed")).on("contextmenu",".medium-insert-embeds-placeholder",n.proxy(this,"fixRightClickOnPlaceholder"));if(this.options.parseOnPaste)this.$el.on("paste",n.proxy(this,"processPasted"))};r.prototype.backwardsCompatibility=function(){var t=this;this.$el.find(".mediumInsert-embeds").removeClass("mediumInsert-embeds").addClass("medium-insert-embeds");this.$el.find(".medium-insert-embeds").each(function(){n(this).find(".medium-insert-embed").length===0&&(n(this).after(t.templates["src/js/templates/embeds-wrapper.hbs"]({html:n(this).html()})),n(this).remove())})};r.prototype.editorSerialize=function(){var t=this._serializePreEmbeds();return n.each(t,function(i){var r=n("<div />").html(t[i].value);r.find(".medium-insert-embeds").removeAttr("contenteditable");r.find(".medium-insert-embeds-overlay").remove();t[i].value=r.html()}),t};r.prototype.add=function(){var n=this.$el.find(".medium-insert-active");n.html(this.templates["src/js/templates/core-empty-line.hbs"]().trim());n.is("p")&&(n.replaceWith('<div class="medium-insert-active">'+n.html()+"<\/div>"),n=this.$el.find(".medium-insert-active"),this.core.moveCaret(n));n.addClass("medium-insert-embeds medium-insert-embeds-input medium-insert-embeds-active");this.togglePlaceholder({target:n.get(0)});n.click();this.core.hideButtons()};r.prototype.togglePlaceholder=function(i){var r=n(i.target),f=t.getSelection(),o,u,e;f&&f.rangeCount!==0&&(o=f.getRangeAt(0),u=n(o.commonAncestorContainer),u.hasClass("medium-insert-embeds-active")?r=u:u.closest(".medium-insert-embeds-active").length&&(r=u.closest(".medium-insert-embeds-active")),r.hasClass("medium-insert-embeds-active")?(e=r.text().trim(),e===""&&r.hasClass("medium-insert-embeds-placeholder")===!1?r.addClass("medium-insert-embeds-placeholder").attr("data-placeholder",this.options.placeholder):e!==""&&r.hasClass("medium-insert-embeds-placeholder")&&r.removeClass("medium-insert-embeds-placeholder").removeAttr("data-placeholder")):this.$el.find(".medium-insert-embeds-active").remove())};r.prototype.fixRightClickOnPlaceholder=function(t){this.core.moveCaret(n(t.target))};r.prototype.processLink=function(n){var i=this.$el.find(".medium-insert-embeds-active"),t;if(i.length){if(t=i.text().trim(),t===""&&[8,46,13].indexOf(n.which)!==-1){i.remove();return}n.which===13&&(n.preventDefault(),n.stopPropagation(),this.options.oembedProxy?this.oembed(t):this.parseUrl(t))}};r.prototype.processPasted=function(t){var i,r;n(".medium-insert-embeds-active").length||(i=t.originalEvent.clipboardData.getData("text"),r=new RegExp("^(http(s?):)?//","i"),r.test(i)&&(this.options.oembedProxy?this.oembed(i,!0):this.parseUrl(i,!0)))};r.prototype.oembed=function(i,r){var u=this;n.support.cors=!0;n.ajax({crossDomain:!0,cache:!1,url:this.options.oembedProxy,dataType:"json",data:{url:i},success:function(t){var f=t&&t.html;if(t&&!f&&t.type==="photo"&&t.url&&(f='<img src="'+t.url+'" alt="">'),!f){n.proxy(u,"convertBadEmbed",i)();return}r?n.proxy(u,"embed",f,i)():n.proxy(u,"embed",f)()},error:function(r,f,e){var o=function(){try{return JSON.parse(r.responseText)}catch(n){}}();typeof t.console!="undefined"?t.console.log(o&&o.error||r.status||e.message):t.alert("Error requesting media from "+u.options.oembedProxy+" to insert: "+e+" (response status: "+r.status+")");n.proxy(u,"convertBadEmbed",i)()}})};r.prototype.parseUrl=function(t,i){var r;if(!new RegExp("youtube|youtu.be|vimeo|instagram|twitter|facebook").test(t)||(r=t.replace(/\n?/g,"").replace(/^((http(s)?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|v\/)?)([a-zA-Z0-9\-_]+)(.*)?$/,'<div class="video video-youtube"><iframe width="420" height="315" src="//www.youtube.com/embed/$7" frameborder="0" allowfullscreen><\/iframe><\/div>').replace(/^https?:\/\/vimeo\.com(\/.+)?\/([0-9]+)$/,'<div class="video video-vimeo"><iframe src="//player.vimeo.com/video/$2" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen><\/iframe><\/div>').replace(/^https:\/\/twitter\.com\/(\w+)\/status\/(\d+)\/?$/,'<blockquote class="twitter-tweet" align="center" lang="en"><a href="https://twitter.com/$1/statuses/$2"><\/a><\/blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"><\/script>').replace(/^(https:\/\/www\.facebook\.com\/(.*))$/,'<script src="//connect.facebook.net/en_US/sdk.js#xfbml=1&amp;version=v2.2" async><\/script><div class="fb-post" data-href="$1"><div class="fb-xfbml-parse-ignore"><a href="$1">Loading Facebook post...<\/a><\/div><\/div>').replace(/^https?:\/\/instagram\.com\/p\/(.+)\/?$/,'<span class="instagram"><iframe src="//instagram.com/p/$1/embed/" width="612" height="710" frameborder="0" scrolling="no" allowtransparency="true"><\/iframe><\/span>'),/<("[^"]*"|'[^']*'|[^'">])*>/.test(r)===!1))return n.proxy(this,"convertBadEmbed",t)(),!1;i?this.embed(r,t):this.embed(r)};r.prototype.embed=function(t,i){var r=this.$el.find(".medium-insert-embeds-active"),u;if(t)t.indexOf("<\/script>")>-1&&(u=n("<div>").attr("data-embed-code",t).html(t),t=n("<div>").append(u).html()),i?(r=this.$el.find(":not(iframe, script, style)").contents().filter(function(){return this.nodeType===3&&this.textContent.indexOf(i)>-1}).parent(),r.after(this.templates["src/js/templates/embeds-wrapper.hbs"]({html:t})),r.text(r.text().replace(i,""))):(r.after(this.templates["src/js/templates/embeds-wrapper.hbs"]({html:t})),r.remove()),this.core.triggerInput(),t.indexOf("facebook")!==-1&&typeof FB!="undefined"&&setTimeout(function(){FB.XFBML.parse()},2e3);else return alert("Incorrect URL format specified"),!1};r.prototype.convertBadEmbed=function(t){var r,u,i,f=this.templates["src/js/templates/core-empty-line.hbs"]().trim();r=this.$el.find(".medium-insert-embeds-active");i=n(f);r.before(i);r.remove();i.html(t);u=n(f);i.after(u);this.core.triggerInput();this.core.moveCaret(u)};r.prototype.selectEmbed=function(t){var i=this,r;this.core.options.enabled&&(r=n(t.target).hasClass("medium-insert-embeds")?n(t.target):n(t.target).closest(".medium-insert-embeds"),r.addClass("medium-insert-embeds-selected"),setTimeout(function(){i.addToolbar();i.options.captions&&i.core.addCaption(r.find("figure"),i.options.captionPlaceholder)},50))};r.prototype.unselectEmbed=function(t){var i=n(t.target).hasClass("medium-insert-embeds")?n(t.target):n(t.target).closest(".medium-insert-embeds"),r=this.$el.find(".medium-insert-embeds-selected");if(i.hasClass("medium-insert-embeds-selected")){r.not(i).removeClass("medium-insert-embeds-selected");n(".medium-insert-embeds-toolbar, .medium-insert-embeds-toolbar2").remove();this.core.removeCaptions(i.find("figcaption"));(n(t.target).is(".medium-insert-caption-placeholder")||n(t.target).is("figcaption"))&&(i.removeClass("medium-insert-embeds-selected"),this.core.removeCaptionPlaceholder(i.find("figure")));return}r.removeClass("medium-insert-embeds-selected");n(".medium-insert-embeds-toolbar, .medium-insert-embeds-toolbar2").remove();n(t.target).is(".medium-insert-caption-placeholder")?this.core.removeCaptionPlaceholder(i.find("figure")):n(t.target).is("figcaption")===!1&&this.core.removeCaptions()};r.prototype.removeEmbed=function(t){var i,r;(t.which===8||t.which===46)&&(i=this.$el.find(".medium-insert-embeds-selected"),i.length&&(t.preventDefault(),n(".medium-insert-embeds-toolbar, .medium-insert-embeds-toolbar2").remove(),r=n(this.templates["src/js/templates/core-empty-line.hbs"]().trim()),i.before(r),i.remove(),this.core.hideAddons(),this.core.moveCaret(r),this.core.triggerInput()))};r.prototype.addToolbar=function(){var t=this.$el.find(".medium-insert-embeds-selected"),f=!1,i,u,r,e,o;t.length!==0&&(e=this.core.getEditor(),o=e.options.elementsContainer||"body",n(o).append(this.templates["src/js/templates/embeds-toolbar.hbs"]({styles:this.options.styles,actions:this.options.actions}).trim()),i=n(".medium-insert-embeds-toolbar"),u=n(".medium-insert-embeds-toolbar2"),r=t.offset().top-i.height()-15,r<0&&(r=0),i.css({top:r,left:t.offset().left+t.width()/2-i.width()/2}).show(),u.css({top:t.offset().top+2,left:t.offset().left+t.width()-u.width()-4}).show(),i.find("button").each(function(){t.hasClass("medium-insert-embeds-"+n(this).data("action"))&&(n(this).addClass("medium-editor-button-active"),f=!0)}),f===!1&&i.find("button").first().addClass("medium-editor-button-active"))};r.prototype.toolbarAction=function(t){var u=n(t.target).is("button")?n(t.target):n(t.target).closest("button"),f=u.closest("li"),e=f.closest("ul"),o=e.find("li"),i=this.$el.find(".medium-insert-embeds-selected"),r=this;u.addClass("medium-editor-button-active");f.siblings().find(".medium-editor-button-active").removeClass("medium-editor-button-active");o.find("button").each(function(){var t="medium-insert-embeds-"+n(this).data("action");n(this).hasClass("medium-editor-button-active")?(i.addClass(t),r.options.styles[n(this).data("action")].added&&r.options.styles[n(this).data("action")].added(i)):(i.removeClass(t),r.options.styles[n(this).data("action")].removed&&r.options.styles[n(this).data("action")].removed(i))});this.core.triggerInput()};r.prototype.toolbar2Action=function(t){var r=n(t.target).is("button")?n(t.target):n(t.target).closest("button"),i=this.options.actions[r.data("action")].clicked;i&&i(this.$el.find(".medium-insert-embeds-selected"));this.core.triggerInput()};n.fn[u+f]=function(t){return this.each(function(){n.data(this,"plugin_"+u+f)||n.data(this,"plugin_"+u+f,new r(this,t))})}}(jQuery,window,document),function(n,t,r){"use strict";function u(i,r){this.el=i;this.$el=n(i);this.$currentImage=null;this.templates=t.MediumInsert.Templates;this.core=this.$el.data("plugin_"+f);this.options=n.extend(!0,{},o,r);this._defaults=o;this._name=f;this.options.preview&&!t.FileReader&&(this.options.preview=!1);this.core.getEditor()&&(this.core.getEditor()._serializePreImages=this.core.getEditor().serialize,this.core.getEditor().serialize=this.editorSerialize);this.init()}var f="mediumInsert",e="Images",o={label:'<span class="fa fa-camera"><\/span>',deleteMethod:"POST",deleteScript:"delete.php",preview:!0,captions:!0,captionPlaceholder:"Type caption for image (optional)",autoGrid:3,fileUploadOptions:{url:"upload.php",acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i},fileDeleteOptions:{},styles:{wide:{label:'<span class="fa fa-align-justify"><\/span>'},left:{label:'<span class="fa fa-align-left"><\/span>'},right:{label:'<span class="fa fa-align-right"><\/span>'},grid:{label:'<span class="fa fa-th"><\/span>'}},actions:{remove:{label:'<span class="fa fa-times"><\/span>',clicked:function(){var t=n.Event("keydown");t.which=8;n(r).trigger(t)}}},sorting:function(){var t=this;n(".medium-insert-images").sortable({group:"medium-insert-images",containerSelector:".medium-insert-images",itemSelector:"figure",placeholder:'<figure class="placeholder">',handle:"img",nested:!1,vertical:!1,afterMove:function(){t.core.triggerInput()}})},messages:{acceptFileTypesError:"This file is not in a supported format: ",maxFileSizeError:"This file is too big: "}};u.prototype.init=function(){var n=this.$el.find(".medium-insert-images");n.find("figcaption").attr("contenteditable",!0);n.find("figure").attr("contenteditable",!1);this.events();this.backwardsCompatibility();this.sorting()};u.prototype.events=function(){n(r).on("click",n.proxy(this,"unselectImage")).on("keydown",n.proxy(this,"removeImage")).on("click",".medium-insert-images-toolbar .medium-editor-action",n.proxy(this,"toolbarAction")).on("click",".medium-insert-images-toolbar2 .medium-editor-action",n.proxy(this,"toolbar2Action"));this.$el.on("click",".medium-insert-images img",n.proxy(this,"selectImage"))};u.prototype.backwardsCompatibility=function(){this.$el.find(".mediumInsert").removeClass("mediumInsert").addClass("medium-insert-images");this.$el.find(".medium-insert-images.small").removeClass("small").addClass("medium-insert-images-left")};u.prototype.editorSerialize=function(){var t=this._serializePreImages();return n.each(t,function(i){var r=n("<div />").html(t[i].value);r.find(".medium-insert-images").find("figcaption, figure").removeAttr("contenteditable");t[i].value=r.html()}),t};u.prototype.add=function(){var t=this,r=n(this.templates["src/js/templates/images-fileupload.hbs"]()),i={dataType:"json",add:function(i,r){n.proxy(t,"uploadAdd",i,r)()},done:function(i,r){n.proxy(t,"uploadDone",i,r)()}};(new XMLHttpRequest).upload&&(i.progress=function(i,r){n.proxy(t,"uploadProgress",i,r)()},i.progressall=function(i,r){n.proxy(t,"uploadProgressall",i,r)()});r.fileupload(n.extend(!0,{},this.options.fileUploadOptions,i));r.click()};u.prototype.uploadAdd=function(t,i){var r=this.$el.find(".medium-insert-active"),o=this,u=[],f=i.files[0],s=this.options.fileUploadOptions.acceptFileTypes,h=this.options.fileUploadOptions.maxFileSize,e;if(s&&!s.test(f.type)?u.push(this.options.messages.acceptFileTypesError+f.name):h&&f.size>h&&u.push(this.options.messages.maxFileSizeError+f.name),u.length>0){alert(u.join("\n"));return}this.core.hideButtons();r.is("p")&&(r.replaceWith('<div class="medium-insert-active">'+r.html()+"<\/div>"),r=this.$el.find(".medium-insert-active"),r.next().is("p")?this.core.moveCaret(r.next()):(r.after("<p><br><\/p>"),this.core.moveCaret(r.next())));r.addClass("medium-insert-images");this.options.preview===!1&&r.find("progress").length===0&&(new XMLHttpRequest).upload&&r.append(this.templates["src/js/templates/images-progressbar.hbs"]());(i.autoUpload||i.autoUpload!==!1&&n(t.target).fileupload("option","autoUpload"))&&i.process().done(function(){o.options.preview?(e=new FileReader,e.onload=function(t){n.proxy(o,"showImage",t.target.result,i)()},e.readAsDataURL(i.files[0])):i.submit()})};u.prototype.uploadProgressall=function(n,t){var i,r;this.options.preview===!1&&(i=parseInt(t.loaded/t.total*100,10),r=this.$el.find(".medium-insert-active").find("progress"),r.attr("value",i).text(i),i===100&&r.remove())};u.prototype.uploadProgress=function(n,t){var i,r;this.options.preview&&(i=100-parseInt(t.loaded/t.total*100,10),r=t.context.find(".medium-insert-images-progress"),r.css("width",i+"%"),i===0&&r.remove())};u.prototype.uploadDone=function(t,i){n.proxy(this,"showImage",i.result.files[0].url,i)();this.core.clean();this.sorting()};u.prototype.showImage=function(t,i){var r=this.$el.find(".medium-insert-active"),u,f;return r.click(),f=this,this.options.preview&&i.context?(u=this.getDOMImage(),u.onload=function(){i.context.find("img").attr("src",u.src);this.options.uploadCompleted&&this.options.uploadCompleted(i.context,i);f.core.triggerInput()}.bind(this),u.src=t):(i.context=n(this.templates["src/js/templates/images-image.hbs"]({img:t,progress:this.options.preview})).appendTo(r),r.find("br").remove(),this.options.autoGrid&&r.find("figure").length>=this.options.autoGrid&&(n.each(this.options.styles,function(n,t){var i="medium-insert-images-"+n;r.removeClass(i);t.removed&&t.removed(r)}),r.addClass("medium-insert-images-grid"),this.options.styles.grid.added&&this.options.styles.grid.added(r)),this.options.preview?i.submit():this.options.uploadCompleted&&this.options.uploadCompleted(i.context,i)),this.core.triggerInput(),i.context};u.prototype.getDOMImage=function(){return new t.Image};u.prototype.selectImage=function(t){var r=this,i;this.core.options.enabled&&(i=n(t.target),this.$currentImage=i,this.$el.blur(),i.addClass("medium-insert-image-active"),i.closest(".medium-insert-images").addClass("medium-insert-active"),setTimeout(function(){r.addToolbar();r.options.captions&&r.core.addCaption(i.closest("figure"),r.options.captionPlaceholder)},50))};u.prototype.unselectImage=function(t){var i=n(t.target),r=this.$el.find(".medium-insert-image-active");if(i.is("img")&&i.hasClass("medium-insert-image-active")){r.not(i).removeClass("medium-insert-image-active");n(".medium-insert-images-toolbar, .medium-insert-images-toolbar2").remove();this.core.removeCaptions(i);return}r.removeClass("medium-insert-image-active");n(".medium-insert-images-toolbar, .medium-insert-images-toolbar2").remove();i.is(".medium-insert-caption-placeholder")?this.core.removeCaptionPlaceholder(r.closest("figure")):i.is("figcaption")===!1&&this.core.removeCaptions();this.$currentImage=null};u.prototype.removeImage=function(u){var f=[],p=this.$el.find(".medium-insert-image-active"),s,e,l,w,h,y,a,c,v,o;if((u.which===8||u.which===46)&&(p.length&&f.push(p),l=t.getSelection(),l&&l.rangeCount&&(w=l.getRangeAt(0),h=w.commonAncestorContainer,a=h.nodeName==="#text"?n(h).parent():n(h),y=i.selection.getCaretOffsets(h).left,u.which===8&&y===0?c=a.prev():u.which===46&&y===a.text().length&&(c=a.next()),c&&c.hasClass("medium-insert-images")&&f.push(c.find("img")),v=i.selection.getSelectionHtml(r),v&&n("<div><\/div>").html(v).find(".medium-insert-images img").each(function(){f.push(n(this))})),f.length)){for(o=0;o<f.length;o++)this.deleteFile(f[o].attr("src")),s=f[o].closest(".medium-insert-images"),f[o].closest("figure").remove(),s.find("figure").length===0&&(e=s.next(),(e.is("p")===!1||e.text()!=="")&&(e=n(this.templates["src/js/templates/core-empty-line.hbs"]().trim()),s.before(e)),s.remove());this.core.hideAddons();!v&&e&&(u.preventDefault(),this.core.moveCaret(e));n(".medium-insert-images-toolbar, .medium-insert-images-toolbar2").remove();this.core.triggerInput()}};u.prototype.deleteFile=function(t){this.options.deleteScript&&n.ajax(n.extend(!0,{},{url:this.options.deleteScript,type:this.options.deleteMethod||"POST",data:{file:t}},this.options.fileDeleteOptions))};u.prototype.addToolbar=function(){var t=this.$el.find(".medium-insert-image-active"),e=t.closest(".medium-insert-images"),f=!1,o=this.core.getEditor(),s=o.options.elementsContainer||"body",i,u,r;n(s).append(this.templates["src/js/templates/images-toolbar.hbs"]({styles:this.options.styles,actions:this.options.actions}).trim());i=n(".medium-insert-images-toolbar");u=n(".medium-insert-images-toolbar2");r=t.offset().top-i.height()-15;r<0&&(r=0);i.css({top:r,left:t.offset().left+t.width()/2-i.width()/2}).show();u.css({top:t.offset().top+2,left:t.offset().left+t.width()-u.width()-4}).show();i.find("button").each(function(){e.hasClass("medium-insert-images-"+n(this).data("action"))&&(n(this).addClass("medium-editor-button-active"),f=!0)});f===!1&&i.find("button").first().addClass("medium-editor-button-active")};u.prototype.toolbarAction=function(t){var r=this,u,f,e,o,i;this.$currentImage!==null&&(u=n(t.target).is("button")?n(t.target):n(t.target).closest("button"),f=u.closest("li"),e=f.closest("ul"),o=e.find("li"),i=this.$el.find(".medium-insert-active"),u.addClass("medium-editor-button-active"),f.siblings().find(".medium-editor-button-active").removeClass("medium-editor-button-active"),o.find("button").each(function(){var t="medium-insert-images-"+n(this).data("action");n(this).hasClass("medium-editor-button-active")?(i.addClass(t),r.options.styles[n(this).data("action")].added&&r.options.styles[n(this).data("action")].added(i)):(i.removeClass(t),r.options.styles[n(this).data("action")].removed&&r.options.styles[n(this).data("action")].removed(i))}),this.core.hideButtons(),this.core.triggerInput())};u.prototype.toolbar2Action=function(t){var r,i;this.$currentImage!==null&&(r=n(t.target).is("button")?n(t.target):n(t.target).closest("button"),i=this.options.actions[r.data("action")].clicked,i&&i(this.$el.find(".medium-insert-image-active")),this.core.hideButtons(),this.core.triggerInput())};u.prototype.sorting=function(){n.proxy(this.options.sorting,this)()};n.fn[f+e]=function(t){return this.each(function(){n.data(this,"plugin_"+f+e)||n.data(this,"plugin_"+f+e,new u(this,t))})}}(jQuery,window,document,i.util)}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"&&typeof module=="object"?module.exports=n(require("jquery")):n(jQuery)}(function(n,t){"use strict";function s(t,i,r,u){for(var e,f,h,c,a,v,o=[],s=0;s<t.length;s++)e=t[s],e?(f=tinycolor(e),h=f.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light",h+=tinycolor.equals(i,e)?" sp-thumb-active":"",c=f.toString(u.preferredFormat||"rgb"),a=l?"background-color:"+f.toRgbString():"filter:"+f.toFilter(),o.push('<span title="'+c+'" data-color="'+f.toRgbString()+'" class="'+h+'"><span class="sp-thumb-inner" style="'+a+';"><\/span><\/span>')):(v="sp-clear-display",o.push(n("<div />").append(n('<span data-color="" style="background-color:transparent;" class="'+v+'"><\/span>').attr("title",u.noColorSelectedText)).html()));return"<div class='sp-cf "+r+"'>"+o.join("")+"<\/div>"}function y(){for(var n=0;n<i.length;n++)i[n]&&i[n].hide()}function p(t,i){var r=n.extend({},c,t);return r.callbacks={move:f(r.move,i),change:f(r.change,i),show:f(r.show,i),hide:f(r.hide,i),beforeShow:f(r.beforeShow,i)},r}function w(u,f){function fr(){var n,t,i;if(h.showPaletteOnly&&(h.showPalette=!0),rr.text(h.showPaletteOnly?h.togglePaletteMoreText:h.togglePaletteLessText),h.palette)for(ai=h.palette.slice(0),ei=Array.isArray(ai[0])?ai:[ai],vi={},n=0;n<ei.length;n++)for(t=0;t<ei[n].length;t++)i=tinycolor(ei[n][t]).toRgbString(),vi[i]=!0;c.toggleClass("sp-flat",ft);c.toggleClass("sp-input-disabled",!h.showInput);c.toggleClass("sp-alpha-enabled",h.showAlpha);c.toggleClass("sp-clear-enabled",lt);c.toggleClass("sp-buttons-disabled",!h.showButtons);c.toggleClass("sp-palette-buttons-disabled",!h.togglePaletteOnly);c.toggleClass("sp-palette-disabled",!h.showPalette);c.toggleClass("sp-palette-only",h.showPaletteOnly);c.toggleClass("sp-initial-disabled",!h.showInitial);c.addClass(h.className).addClass(h.containerClassName);vt()}function pu(){function u(t){return t.data&&t.data.ignore?(at(n(t.target).closest(".sp-thumb-el").data("color")),ht()):(at(n(t.target).closest(".sp-thumb-el").data("color")),ht(),h.hideAfterPaletteSelect?(ut(!0),st()):ut()),!1}var t,i;r&&c.find("*:not(input)").attr("unselectable","on");fr();ur&&w.after(kt).hide();lt||ir.hide();ft?w.after(c).hide():(t=h.appendTo==="parent"?w.parent():n(h.appendTo),t.length!==1&&(t=n("body")),t.append(c));nu();si.on("click.spectrum touchstart.spectrum",function(t){nr||ru();t.stopPropagation();n(t.target).is("input")||t.preventDefault()});(w.is(":disabled")||h.disabled===!0)&&su();c.on("click",k);it.on("change",hr);it.on("paste",function(){setTimeout(hr,1)});it.on("keydown",function(n){n.keyCode==13&&hr()});dr.text(h.cancelText);dr.on("click.spectrum",function(n){n.stopPropagation();n.preventDefault();eu();st()});ir.attr("title",h.clearText);ir.on("click.spectrum",function(n){n.stopPropagation();n.preventDefault();ot=!0;ht();ft&&ut(!0)});gr.text(h.chooseText);gr.on("click.spectrum",function(n){n.stopPropagation();n.preventDefault();r&&it.is(":focus")&&it.trigger("change");bu()&&(ut(!0),st())});rr.text(h.showPaletteOnly?h.togglePaletteMoreText:h.togglePaletteLessText);rr.on("click.spectrum",function(n){n.stopPropagation();n.preventDefault();h.showPaletteOnly=!h.showPaletteOnly;h.showPaletteOnly||ft||c.css("left","-="+(au.outerWidth(!0)+5));fr()});o(wr,function(n,t,i){nt=n/gi;ot=!1;i.shiftKey&&(nt=Math.round(nt*10)/10);ht()},or,sr);o(tr,function(n,t){ri=parseFloat(t/li);ot=!1;h.showAlpha||(nt=1);ht()},or,sr);o(yi,function(n,t,i){var r,u;if(i.shiftKey){if(!et){var f=ui*wt,e=rt-fi*rt,o=Math.abs(n-f)>Math.abs(t-e);et=o?"x":"y"}}else et=null;r=!et||et==="x";u=!et||et==="y";r&&(ui=parseFloat(n/wt));u&&(fi=parseFloat((rt-t)/rt));ot=!1;h.showAlpha||(nt=1);ht()},or,sr);hi?(at(hi),ti(),ni=h.preferredFormat||tinycolor(hi).format,er(hi)):ti();ft&&cr();i=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";br.on(i,".sp-thumb-el",u);kr.on(i,".sp-thumb-el:nth-child(1)",{ignore:!0},u)}function nu(){if(yt&&window.localStorage){try{var t=window.localStorage[yt].split(",#");t.length>1&&(delete window.localStorage[yt],n.each(t,function(n,t){er(t)}))}catch(i){}try{tt=window.localStorage[yt].split(";")}catch(i){}}}function er(t){if(hu){var i=tinycolor(t).toRgbString();if(!vi[i]&&n.inArray(i,tt)===-1)for(tt.push(i);tt.length>lu;)tt.shift();if(yt&&window.localStorage)try{window.localStorage[yt]=tt.join(";")}catch(r){}}}function wu(){var t=[],n,i;if(h.showPalette)for(n=0;n<tt.length;n++)i=tinycolor(tt[n]).toRgbString(),vi[i]||t.push(tt[n]);return t.reverse().slice(0,h.maxSelectionSize)}function tu(){var t=g(),i=n.map(ei,function(n,i){return s(n,t,"sp-palette-row sp-palette-row-"+i,h)});nu();tt&&i.push(s(wu(),t,"sp-palette-row sp-palette-row-selection",h));br.html(i.join(""))}function iu(){if(h.showInitial){var t=gt,n=g();kr.html(s([t,n],n,"sp-palette-row-initial",h))}}function or(){(rt<=0||wt<=0||li<=0)&&vt();di=!0;c.addClass(pr);et=null;w.trigger("dragstart.spectrum",[g()])}function sr(){di=!1;c.removeClass(pr);w.trigger("dragstop.spectrum",[g()])}function hr(){var n=it.val(),t;(n===null||n==="")&&lt?(at(null),ht(),ut()):(t=tinycolor(n),t.isValid()?(at(t),ht(),ut()):it.addClass("sp-validation-error"))}function ru(){pt?st():cr()}function cr(){var t=n.Event("beforeShow.spectrum");if(pt){vt();return}if(w.trigger(t,[g()]),ii.beforeShow(g())!==!1&&!t.isDefaultPrevented()){y();pt=!0;n(bt).on("keydown.spectrum",uu);n(bt).on("click.spectrum",fu);n(window).on("resize.spectrum",ar);kt.addClass("sp-active");c.removeClass("sp-hidden");vt();ti();gt=g();iu();ii.show(gt);w.trigger("show.spectrum",[gt])}}function uu(n){n.keyCode===27&&st()}function fu(n){n.button!=2&&(di||(yu?ut(!0):eu(),st()))}function st(){pt&&!ft&&(pt=!1,n(bt).off("keydown.spectrum",uu),n(bt).off("click.spectrum",fu),n(window).off("resize.spectrum",ar),kt.removeClass("sp-active"),c.addClass("sp-hidden"),ii.hide(g()),w.trigger("hide.spectrum",[g()]))}function eu(){at(gt,!0);ut(!1)}function at(n,t){if(tinycolor.equals(n,g())){ti();return}var i,r;!n&&lt?ot=!0:(ot=!1,i=tinycolor(n),r=i.toHsv(),ri=r.h%360/360,ui=r.s,fi=r.v,nt=r.a);ti();i&&i.isValid()&&!t&&(ni=h.preferredFormat||i.getFormat())}function g(n){return(n=n||{},lt&&ot)?null:tinycolor.fromRatio({h:ri,s:ui,v:fi,a:Math.round(nt*1e3)/1e3},{format:n.format||ni})}function bu(){return!it.hasClass("sp-validation-error")}function ht(){ti();ii.move(g());w.trigger("move.spectrum",[g()])}function ti(){var s,n,t,e,i,c,o,u,f;it.removeClass("sp-validation-error");ou();s=tinycolor.fromRatio({h:ri,s:1,v:1});yi.css("background-color",s.toHexString());n=ni;nt<1&&!(nt===0&&n==="name")&&(n==="hex"||n==="hex3"||n==="hex6"||n==="name")&&(n="rgb");t=g({format:n});e="";dt.removeClass("sp-clear-display");dt.css("background-color","transparent");!t&&lt?dt.addClass("sp-clear-display"):(i=t.toHexString(),c=t.toRgbString(),l||t.alpha===1?dt.css("background-color",c):(dt.css("background-color","transparent"),dt.css("filter",t.toFilter())),h.showAlpha&&(o=t.toRgb(),o.a=0,u=tinycolor(o).toRgbString(),f="linear-gradient(left, "+u+", "+i+")",r?oi.css("filter",tinycolor(u).toFilter({gradientType:1},i)):(oi.css("background","-webkit-"+f),oi.css("background","-moz-"+f),oi.css("background","-ms-"+f),oi.css("background","linear-gradient(to right, "+u+", "+i+")"))),e=t.toString(n));h.showInput&&it.val(e);h.showPalette&&tu();iu()}function ou(){var u=ui,f=fi,n,t,i,r;lt&&ot?(bi.hide(),wi.hide(),pi.hide()):(bi.show(),wi.show(),pi.show(),n=u*wt,t=rt-f*rt,n=Math.max(-ct,Math.min(wt-ct,n-ct)),t=Math.max(-ct,Math.min(rt-ct,t-ct)),pi.css({top:t+"px",left:n+"px"}),i=nt*gi,bi.css({left:i-vr/2+"px"}),r=ri*li,wi.css({top:r-yr+"px"}))}function ut(n){var t=g(),i="",r=!tinycolor.equals(t,gt);t&&(i=t.toString(ni),er(t));ki&&w.val(i);n&&(ii.change(t),w.trigger("change",[t]))}function vt(){pt&&(wt=yi.width(),rt=yi.height(),ct=pi.height(),cu=tr.width(),li=tr.height(),yr=wi.height(),gi=wr.width(),vr=bi.width(),ft||(c.css("position","absolute"),h.offset?c.offset(h.offset):c.offset(b(c,si))),ou(),h.showPalette&&tu(),w.trigger("reflow.spectrum"))}function ku(){w.show();si.off("click.spectrum touchstart.spectrum");c.remove();kt.remove();i[ci.id]=null}function du(i,r){if(i===t)return n.extend({},h);if(r===t)return h[i];h[i]=r;i==="preferredFormat"&&(ni=h.preferredFormat);fr()}function gu(){nr=!1;w.attr("disabled",!1);si.removeClass("sp-disabled")}function su(){st();nr=!0;w.attr("disabled",!0);si.addClass("sp-disabled")}function nf(n){h.offset=n;vt()}var h=p(f,u),ft=h.flat,hu=h.showSelectionPalette,yt=h.localStorageKey,lr=h.theme,ii=h.callbacks,ar=d(vt,10),pt=!1,di=!1,wt=0,rt=0,ct=0,li=0,cu=0,gi=0,vr=0,yr=0,ri=0,ui=0,fi=0,nt=1,ai=[],ei=[],vi={},tt=h.selectionPalette.slice(0),lu=h.maxSelectionSize,pr="sp-dragging",et=null,bt=u.ownerDocument,tf=bt.body,w=n(u),nr=!1,c=n(v,bt).addClass(lr),au=c.find(".sp-picker-container"),yi=c.find(".sp-color"),pi=c.find(".sp-dragger"),tr=c.find(".sp-hue"),wi=c.find(".sp-slider"),oi=c.find(".sp-alpha-inner"),wr=c.find(".sp-alpha"),bi=c.find(".sp-alpha-handle"),it=c.find(".sp-input"),br=c.find(".sp-palette"),kr=c.find(".sp-initial"),dr=c.find(".sp-cancel"),ir=c.find(".sp-clear"),gr=c.find(".sp-choose"),rr=c.find(".sp-palette-toggle"),ki=w.is("input"),vu=ki&&w.attr("type")==="color"&&e(),ur=ki&&!ft,kt=ur?n(a).addClass(lr).addClass(h.className).addClass(h.replacerClassName):n([]),si=ur?kt:w,dt=kt.find(".sp-preview-inner"),hi=h.color||ki&&w.val(),gt=!1,ni=h.preferredFormat,yu=!h.showButtons||h.clickoutFiresChange,ot=!hi,lt=h.allowEmpty&&!vu,ci;return pu(),ci={show:cr,hide:st,toggle:ru,reflow:vt,option:du,enable:gu,disable:su,offset:nf,set:function(n){at(n);ut()},get:g,destroy:ku,container:c},ci.id=i.push(ci)-1,ci}function b(t,i){var c=0,e=t.outerWidth(),o=t.outerHeight(),l=i.outerHeight(),s=t[0].ownerDocument,a=s.documentElement,h=a.clientWidth+n(s).scrollLeft(),v=a.clientHeight+n(s).scrollTop(),r=i.offset(),u=r.left,f=r.top;return f+=l,u-=Math.min(u,u+e>h&&h>e?Math.abs(u+e-h):0),f-=Math.min(f,f+o>v&&v>o?Math.abs(o+l-c):c),{top:f,bottom:r.bottom,left:u,right:r.right,width:r.width,height:r.height}}function u(){}function k(n){n.stopPropagation()}function f(n,t){var i=Array.prototype.slice,r=i.call(arguments,2);return function(){return n.apply(t,r.concat(i.call(arguments)))}}function o(t,i,u,f){function h(n){n.stopPropagation&&n.stopPropagation();n.preventDefault&&n.preventDefault();n.returnValue=!1}function v(n){if(s){if(r&&o.documentMode<9&&!n.button)return y();var u=n.originalEvent&&n.originalEvent.touches&&n.originalEvent.touches[0],f=u&&u.pageX||n.pageX,e=u&&u.pageY||n.pageY,v=Math.max(0,Math.min(f-c.left,a)),w=Math.max(0,Math.min(e-c.top,l));p&&h(n);i.apply(t,[v,w,n])}}function w(i){var r=i.which?i.which==3:i.button==2;if(!r&&!s&&u.apply(t,arguments)!==!1){s=!0;l=n(t).height();a=n(t).width();c=n(t).offset();n(o).on(e);n(o.body).addClass("sp-dragging");v(i);h(i)}}function y(){s&&(n(o).off(e),n(o.body).removeClass("sp-dragging"),setTimeout(function(){f.apply(t,arguments)},0));s=!1}i=i||function(){};u=u||function(){};f=f||function(){};var o=document,s=!1,c={},l=0,a=0,p="ontouchstart"in window,e={};e.selectstart=h;e.dragstart=h;e["touchmove mousemove"]=v;e["touchend mouseup"]=y;n(t).on("touchstart mousedown",w)}function d(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;n.apply(u,f)};i&&clearTimeout(r);(i||!r)&&(r=setTimeout(e,t))}}function e(){return n.fn.spectrum.inputTypeColorSupport()}var c={beforeShow:u,move:u,change:u,show:u,hide:u,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},i=[],r=!!/msie/i.exec(window.navigator.userAgent),l=function(){function t(n,t){return!!~(""+n).indexOf(t)}var i=document.createElement("div"),n=i.style;return n.cssText="background-color:rgba(0,0,0,.5)",t(n.backgroundColor,"rgba")||t(n.backgroundColor,"hsla")}(),a="<div class='sp-replacer'><div class='sp-preview'><div class='sp-preview-inner'><\/div><\/div><div class='sp-dd'>&#9660;<\/div><\/div>",v=function(){var t="",n;if(r)for(n=1;n<=6;n++)t+="<div class='sp-"+n+"'><\/div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'><\/div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'><\/button>","<\/div>","<\/div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'><\/div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'><\/div>","<\/div>","<\/div>","<\/div>","<div class='sp-clear sp-clear-display'>","<\/div>","<div class='sp-hue'>","<div class='sp-slider'><\/div>",t,"<\/div>","<\/div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'><\/div><\/div><\/div>","<\/div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","<\/div>","<div class='sp-initial sp-thumb sp-cf'><\/div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'><\/a>","<button type='button' class='sp-choose'><\/button>","<\/div>","<\/div>","<\/div>"].join("")}(),h="spectrum.id";n.fn.spectrum=function(t){if(typeof t=="string"){var r=this,u=Array.prototype.slice.call(arguments,1);return this.each(function(){var f=i[n(this).data(h)],e;if(f){if(e=f[t],!e)throw new Error("Spectrum: no such method: '"+t+"'");t=="get"?r=f.get():t=="container"?r=f.container:t=="option"?r=f.option.apply(f,u):t=="destroy"?(f.destroy(),n(this).removeData(h)):e.apply(f,u)}}),r}return this.spectrum("destroy").each(function(){var i=n.extend({},n(this).data(),t),r=w(this,i);n(this).data(h,r.id)})};n.fn.spectrum.load=!0;n.fn.spectrum.loadOpts={};n.fn.spectrum.draggable=o;n.fn.spectrum.defaults=c;n.fn.spectrum.inputTypeColorSupport=function e(){if(typeof e._cachedResult=="undefined"){var t=n("<input type='color'/>")[0];e._cachedResult=t.type==="color"&&t.value!==""}return e._cachedResult};n.spectrum={};n.spectrum.localization={};n.spectrum.palettes={};n.fn.spectrum.processNativeColorInputs=function(){var t=n("input[type=color]");t.length&&!e()&&t.spectrum({preferredFormat:"hex6"})},function(){function tt(n){var t={r:0,g:0,b:0},i=1,f=!1,e=!1;return typeof n=="string"&&(n=ii(n)),typeof n=="object"&&(n.hasOwnProperty("r")&&n.hasOwnProperty("g")&&n.hasOwnProperty("b")?(t=it(n.r,n.g,n.b),f=!0,e=String(n.r).substr(-1)==="%"?"prgb":"rgb"):n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("v")?(n.s=h(n.s),n.v=h(n.v),t=ut(n.h,n.s,n.v),f=!0,e="hsv"):n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("l")&&(n.s=h(n.s),n.l=h(n.l),t=rt(n.h,n.s,n.l),f=!0,e="hsl"),n.hasOwnProperty("a")&&(i=n.a)),i=k(i),{ok:f,format:n.format||e,r:r(255,u(t.r,0)),g:r(255,u(t.g,0)),b:r(255,u(t.b,0)),a:i}}function it(n,t,r){return{r:i(n,255)*255,g:i(t,255)*255,b:i(r,255)*255}}function v(n,t,f){var s;n=i(n,255);t=i(t,255);f=i(f,255);var e=u(n,t,f),h=r(n,t,f),o,c,l=(e+h)/2;if(e==h)o=c=0;else{s=e-h;c=l>.5?s/(2-e-h):s/(e+h);switch(e){case n:o=(t-f)/s+(t<f?6:0);break;case t:o=(f-n)/s+2;break;case f:o=(n-t)/s+4}o/=6}return{h:o,s:c,l:l}}function rt(n,t,r){function h(n,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?n+(t-n)*6*i:i<1/2?t:i<2/3?n+(t-n)*(2/3-i)*6:n}var e,o,s,u,f;return n=i(n,360),t=i(t,100),r=i(r,100),t===0?e=o=s=r:(u=r<.5?r*(1+t):r+t-r*t,f=2*r-u,e=h(f,u,n+1/3),o=h(f,u,n),s=h(f,u,n-1/3)),{r:e*255,g:o*255,b:s*255}}function y(n,t,f){n=i(n,255);t=i(t,255);f=i(f,255);var e=u(n,t,f),h=r(n,t,f),o,c,l=e,s=e-h;if(c=e===0?0:s/e,e==h)o=0;else{switch(e){case n:o=(t-f)/s+(t<f?6:0);break;case t:o=(f-n)/s+2;break;case f:o=(n-t)/s+4}o/=6}return{h:o,s:c,v:l}}function ut(n,t,r){n=i(n,360)*6;t=i(t,100);r=i(r,100);var h=s.floor(n),c=n-h,u=r*(1-t),f=r*(1-c*t),e=r*(1-(1-c)*t),o=h%6,l=[r,f,u,u,e,r][o],a=[e,r,r,f,u,u][o],v=[u,u,e,r,r,f][o];return{r:l*255,g:a*255,b:v*255}}function p(n,i,r,u){var f=[o(t(n).toString(16)),o(t(i).toString(16)),o(t(r).toString(16))];return u&&f[0].charAt(0)==f[0].charAt(1)&&f[1].charAt(0)==f[1].charAt(1)&&f[2].charAt(0)==f[2].charAt(1)?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0):f.join("")}function w(n,i,r,u){var f=[o(ni(u)),o(t(n).toString(16)),o(t(i).toString(16)),o(t(r).toString(16))];return f.join("")}function ft(t,i){i=i===0?0:i||10;var r=n(t).toHsl();return r.s-=i/100,r.s=l(r.s),n(r)}function et(t,i){i=i===0?0:i||10;var r=n(t).toHsl();return r.s+=i/100,r.s=l(r.s),n(r)}function ot(t){return n(t).desaturate(100)}function st(t,i){i=i===0?0:i||10;var r=n(t).toHsl();return r.l+=i/100,r.l=l(r.l),n(r)}function ht(i,f){f=f===0?0:f||10;var e=n(i).toRgb();return e.r=u(0,r(255,e.r-t(255*-(f/100)))),e.g=u(0,r(255,e.g-t(255*-(f/100)))),e.b=u(0,r(255,e.b-t(255*-(f/100)))),n(e)}function ct(t,i){i=i===0?0:i||10;var r=n(t).toHsl();return r.l-=i/100,r.l=l(r.l),n(r)}function lt(i,r){var u=n(i).toHsl(),f=(t(u.h)+r)%360;return u.h=f<0?360+f:f,n(u)}function at(t){var i=n(t).toHsl();return i.h=(i.h+180)%360,n(i)}function vt(t){var i=n(t).toHsl(),r=i.h;return[n(t),n({h:(r+120)%360,s:i.s,l:i.l}),n({h:(r+240)%360,s:i.s,l:i.l})]}function yt(t){var i=n(t).toHsl(),r=i.h;return[n(t),n({h:(r+90)%360,s:i.s,l:i.l}),n({h:(r+180)%360,s:i.s,l:i.l}),n({h:(r+270)%360,s:i.s,l:i.l})]}function pt(t){var i=n(t).toHsl(),r=i.h;return[n(t),n({h:(r+72)%360,s:i.s,l:i.l}),n({h:(r+216)%360,s:i.s,l:i.l})]}function wt(t,i,r){i=i||6;r=r||30;var u=n(t).toHsl(),f=360/r,e=[n(t)];for(u.h=(u.h-(f*i>>1)+720)%360;--i;)u.h=(u.h+f)%360,e.push(n(u));return e}function bt(t,i){i=i||6;for(var r=n(t).toHsv(),e=r.h,o=r.s,u=r.v,f=[],s=1/i;i--;)f.push(n({h:e,s:o,v:u})),u=(u+s)%1;return f}function kt(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[n[t]]=t);return i}function k(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function i(n,t){dt(n)&&(n="100%");var i=gt(n);return(n=r(t,u(0,parseFloat(n))),i&&(n=parseInt(n*t,10)/100),s.abs(n-t)<1e-6)?1:n%t/parseFloat(t)}function l(n){return r(1,u(0,n))}function f(n){return parseInt(n,16)}function dt(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function gt(n){return typeof n=="string"&&n.indexOf("%")!=-1}function o(n){return n.length==1?"0"+n:""+n}function h(n){return n<=1&&(n=n*100+"%"),n}function ni(n){return Math.round(parseFloat(n)*255).toString(16)}function ti(n){return f(n)/255}function ii(n){var i,t;if(n=n.replace(d,"").replace(g,"").toLowerCase(),i=!1,c[n])n=c[n],i=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(t=e.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=e.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=e.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=e.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=e.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=e.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=e.hex8.exec(n))?{a:ti(t[1]),r:f(t[2]),g:f(t[3]),b:f(t[4]),format:i?"name":"hex8"}:(t=e.hex6.exec(n))?{r:f(t[1]),g:f(t[2]),b:f(t[3]),format:i?"name":"hex"}:(t=e.hex3.exec(n))?{r:f(t[1]+""+t[1]),g:f(t[2]+""+t[2]),b:f(t[3]+""+t[3]),format:i?"name":"hex"}:!1}var d=/^[\s,#]+/,g=/\s+$/,nt=0,s=Math,t=s.round,r=s.min,u=s.max,a=s.random,n=function(i,r){if(i=i?i:"",r=r||{},i instanceof n)return i;if(!(this instanceof n))return new n(i,r);var u=tt(i);this._originalInput=i;this._r=u.r;this._g=u.g;this._b=u.b;this._a=u.a;this._roundA=t(1e3*this._a)/1e3;this._format=r.format||u.format;this._gradientType=r.gradientType;this._r<1&&(this._r=t(this._r));this._g<1&&(this._g=t(this._g));this._b<1&&(this._b=t(this._b));this._ok=u.ok;this._tc_id=nt++},c,b,e;n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},setAlpha:function(n){return this._a=k(n),this._roundA=t(1e3*this._a)/1e3,this},toHsv:function(){var n=y(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=y(this._r,this._g,this._b),i=t(n.h*360),r=t(n.s*100),u=t(n.v*100);return this._a==1?"hsv("+i+", "+r+"%, "+u+"%)":"hsva("+i+", "+r+"%, "+u+"%, "+this._roundA+")"},toHsl:function(){var n=v(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=v(this._r,this._g,this._b),i=t(n.h*360),r=t(n.s*100),u=t(n.l*100);return this._a==1?"hsl("+i+", "+r+"%, "+u+"%)":"hsla("+i+", "+r+"%, "+u+"%, "+this._roundA+")"},toHex:function(n){return p(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(){return w(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t(i(this._r,255)*100)+"%",g:t(i(this._g,255)*100)+"%",b:t(i(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t(i(this._r,255)*100)+"%, "+t(i(this._g,255)*100)+"%, "+t(i(this._b,255)*100)+"%)":"rgba("+t(i(this._r,255)*100)+"%, "+t(i(this._g,255)*100)+"%, "+t(i(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:b[p(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var i="#"+w(this._r,this._g,this._b,this._a),r=i,f=this._gradientType?"GradientType = 1, ":"",u;return t&&(u=n(t),r=u.toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+f+"startColorstr="+i+",endColorstr="+r+")"},toString:function(n){var i=!!n;n=n||this._format;var t=!1,r=this._a<1&&this._a>=0,u=!i&&r&&(n==="hex"||n==="hex6"||n==="hex3"||n==="name");return u?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(t=this.toRgbString()),n==="prgb"&&(t=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(t=this.toHexString()),n==="hex3"&&(t=this.toHexString(!0)),n==="hex8"&&(t=this.toHex8String()),n==="name"&&(t=this.toName()),n==="hsl"&&(t=this.toHslString()),n==="hsv"&&(t=this.toHsvString()),t||this.toHexString())},_applyModification:function(n,t){var i=n.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(st,arguments)},brighten:function(){return this._applyModification(ht,arguments)},darken:function(){return this._applyModification(ct,arguments)},desaturate:function(){return this._applyModification(ft,arguments)},saturate:function(){return this._applyModification(et,arguments)},greyscale:function(){return this._applyModification(ot,arguments)},spin:function(){return this._applyModification(lt,arguments)},_applyCombination:function(n,t){return n.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(wt,arguments)},complement:function(){return this._applyCombination(at,arguments)},monochromatic:function(){return this._applyCombination(bt,arguments)},splitcomplement:function(){return this._applyCombination(pt,arguments)},triad:function(){return this._applyCombination(vt,arguments)},tetrad:function(){return this._applyCombination(yt,arguments)}};n.fromRatio=function(t,i){var u,r;if(typeof t=="object"){u={};for(r in t)t.hasOwnProperty(r)&&(u[r]=r==="a"?t[r]:h(t[r]));t=u}return n(t,i)};n.equals=function(t,i){return!t||!i?!1:n(t).toRgbString()==n(i).toRgbString()};n.random=function(){return n.fromRatio({r:a(),g:a(),b:a()})};n.mix=function(t,i,r){var s,l;r=r===0?0:r||50;var f=n(t).toRgb(),e=n(i).toRgb(),h=r/100,o=h*2-1,c=e.a-f.a,u;return u=o*c==-1?o:(o+c)/(1+o*c),u=(u+1)/2,s=1-u,l={r:e.r*u+f.r*s,g:e.g*u+f.g*s,b:e.b*u+f.b*s,a:e.a*h+f.a*(1-h)},n(l)};n.readability=function(t,i){var f=n(t),e=n(i),r=f.toRgb(),u=e.toRgb(),o=f.getBrightness(),s=e.getBrightness(),h=Math.max(r.r,u.r)-Math.min(r.r,u.r)+Math.max(r.g,u.g)-Math.min(r.g,u.g)+Math.max(r.b,u.b)-Math.min(r.b,u.b);return{brightness:Math.abs(o-s),color:h}};n.isReadable=function(t,i){var r=n.readability(t,i);return r.brightness>125&&r.color>500};n.mostReadable=function(t,i){for(var h=null,o=0,r=!1,u=0;u<i.length;u++){var f=n.readability(t,i[u]),e=f.brightness>125&&f.color>500,s=3*(f.brightness/125)+f.color/500;(e&&!r||e&&r&&s>o||!e&&!r&&s>o)&&(r=e,o=s,h=n(i[u]))}return h};c=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};b=n.hexNames=kt(c);e=function(){var n="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=n}();n(function(){n.fn.spectrum.load&&n.fn.spectrum.processNativeColorInputs()})});MediumButton.prototype.getButton=function(){return this.button};MediumButton.prototype.checkState=function(){var n=getCurrentSelection();this.options.start!=""&&n.indexOf(this.options.start)>-1&&n.indexOf(this.options.end)>-1&&this.button.classList.add("medium-editor-button-active")};MediumLinkButton.prototype.getButton=function(){return this.button};MediumLinkButton.prototype.checkState=function(){var n=getCurrentSelection();this.options.start!=""&&n.indexOf(this.options.start)>-1&&n.indexOf(this.options.end)>-1&&this.button.classList.add("medium-editor-button-active")};var colorPickerNode={},ColorPickerExtension=MediumEditor.extensions.button.extend({name:"colorPicker",action:"applyForeColor",aria:"color picker",tagNames:["Colorpicker"],style:{prop:"text-decoration",value:"color picker"},useQueryState:!0,contentDefault:"<span class='editor-color-picker'><span>",init:function(){this.button=this.document.createElement("button");this.button.classList.add("medium-editor-action");this.button.innerHTML='<i class="custom-font-color" aria-hidden="true" title="Colorpicker" ><\/i>';initPicker(this.button)}}),HighlightColorPicker=MediumEditor.extensions.button.extend({name:"highlight",action:"applybackColor",aria:"highlight",contentDefault:"<span class='editor-color-picker'><span>",init:function(){this.button=this.document.createElement("button");this.button.classList.add("medium-editor-action");this.button.innerHTML='<i class="custom-pencil-icn" aria-hidden="true" data-toggle="tooltip" title="Highlight" ><\/i>';initPickerforhighlight(this.button)}}),highlightpickerExtension=new HighlightColorPicker,pickerExtension=new ColorPickerExtension;editor=new MediumEditor(".editable",{toolbar:{buttons:["colorPicker","bold","highlight"]},extensions:{colorPicker:pickerExtension,highlight:highlightpickerExtension}})